(()=>{"use strict";const e=()=>{let e=localStorage.getItem("myProject");return e?JSON.parse(e):[]},t=(t,o)=>{let r,l=e();l.map(((e,c)=>{e.name==o.name&&t===o?(l.splice(c,1),r=JSON.stringify(l),localStorage.setItem("myProject",r)):e.name==o.name&&(l.splice(c,1,t),r=JSON.stringify(l),localStorage.setItem("myProject",r))}))},o=e=>{localStorage.setItem("currentProject",JSON.stringify(e))},r=()=>{let e=localStorage.getItem("currentProject");return e?JSON.parse(e):null},l=e=>{let t=(e=>{let t=[];return e.todo.forEach(((e,o)=>{let r=`\n    <tr class='${e.checked?"complete":e.priority}'>\n      <td>${e.title}</td>\n      <td>${e.due}</td>\n      <td>${e.priority}</td>\n      <td>\n        <button class='check-todo' data-index='${o}'>\n          ${e.checked?"<span class='material-icons'>task_alt</span>":"<span class='material-icons'>remove_circle_outline</span>"}\n        </button>\n      </td>\n      <td><button class='edit-todo' data-index='${o}'><span class="material-icons">description</span></button></td>\n      <td><button class='delete-todo' data-index='${o}'><span class="material-icons">delete_forever</span></button></td>\n    </tr>`;t.push(r)})),t})(e);return t?t.map((e=>e)).join(""):[]},c=e=>{let l=r(),c=r(),n=e.target.closest("button").dataset.index,a=c.todo[n];a.checked=!a.checked,o(c),t(c,l),location.reload()},n=e=>{if(!confirm("Delete this todo?"))return;let l=r(),c=r(),n=e.target.closest("button").dataset.index;c.todo.splice(n,1),o(c),t(c,l),location.reload()},a=document.getElementsByClassName("modal"),d=document.querySelector(".project"),s=document.querySelector(".toggle-project"),i=document.querySelectorAll(".toggle-icons"),m=document.getElementById("add-project"),u=document.querySelector(".new-project-form-modal"),y=document.querySelector(".new-project-form"),g=document.getElementsByClassName("cancel"),p=document.querySelector(".project-list"),f=document.querySelector(".project-body"),S=document.querySelector(".project-name"),h=document.querySelector(".todo-list"),L=document.getElementsByClassName("list-item");s.onclick=()=>{d.classList.toggle("active"),i.forEach((e=>e.classList.toggle("hidden")))},m.onclick=()=>{u.classList.toggle("hidden")},y.addEventListener("submit",(t=>{let r={name:t.target.elements.name.value,todo:[]};(t=>{let o=e();o.push(t),localStorage.setItem("myProject",JSON.stringify(o))})(r),o(r)})),Array.from(g).forEach((e=>{let t=e.closest("section");e.onclick=()=>{t.classList.toggle("hidden")}})),window.addEventListener("click",(e=>{e.target.className.split(" ").some((e=>"modal"==e))&&Array.from(a).forEach((e=>{e.classList.add("hidden")}))})),e().map((e=>{let t=document.createElement("li");t.innerHTML=e.name,t.classList.add("list-item"),p.appendChild(t)})),(()=>{let t=Array.from(L);t.forEach((t=>{t.addEventListener("click",(c=>{r(c);let n=(t=>e().find((e=>e.name==t)))(t.textContent);o(n),S.innerHTML=n.name,h.innerHTML=l(n),f.classList.remove("hidden"),location.reload()}))}));const r=e=>{t=Array.from(L),t.forEach((e=>{e.classList.remove("selected")})),e.target.classList.add("selected")}})();const v=document.querySelector(".project-body"),E=document.querySelector(".project-name"),j=document.querySelector(".edit-project-form-modal"),q=document.querySelector(".edit-project-form"),k=document.querySelector(".edit-project"),b=document.querySelector(".delete-project"),N=document.querySelector(".new-todo-form-modal"),A=document.querySelector(".new-todo-form"),C=document.querySelector(".new-todo"),I=document.querySelector(".todo-list"),$=(0==e().length&&v.classList.add("hidden"),(()=>{let e=r();e&&(E.innerHTML=e.name,v.classList.remove("hidden"),I.innerHTML=l(e))})(),k.onclick=()=>{j.classList.toggle("hidden")},q.addEventListener("submit",(e=>{let l=r(),c=r();c.name=e.target.elements.name.value,o(c),t(c,l)})),b.addEventListener("click",(()=>{if(!confirm("Delete this project?"))return;let e=r(),o=r();localStorage.removeItem("currentProject"),t(o,e),location.reload()})),C.onclick=()=>{N.classList.toggle("hidden")},A.addEventListener("submit",(e=>{let l=(e=>{let t=e.target.elements;return{title:t.title.value,due:t.due.value,priority:t.priority.value,checked:!1}})(e),c=r(),n=r();n.todo.push(l),o(n),t(n,c)})),document.getElementsByClassName("check-todo")),w=document.getElementsByClassName("edit-todo"),x=document.querySelector(".edit-todo-form-modal"),B=document.querySelector(".edit-todo-form"),P=document.getElementsByClassName("delete-todo");Array.from($).forEach((e=>{e.addEventListener("click",c)})),Array.from(w).forEach((e=>{e.addEventListener("click",(e=>{x.classList.toggle("hidden");let l=e.target.closest("button").dataset.index;((e,t)=>{let o=r().todo[t],l=o.title,c=o.due,n=o.priority;e.title.value=l,e.due.value=c,e.priority.value=n})(B,l),B.addEventListener("submit",(e=>{((e,l)=>{let c=r(),n=r(),a=n.todo[l],d=e.target.elements;a.title=d.title.value,a.due=d.due.value,a.priority=d.priority.value,o(n),t(n,c)})(e,l)}))}))})),Array.from(P).forEach((e=>{e.addEventListener("click",n)}))})();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly90b2RvX2xpc3QvLi9zcmMvcHJvamVjdC5qcyIsIndlYnBhY2s6Ly90b2RvX2xpc3QvLi9zcmMvdG9kby5qcyIsIndlYnBhY2s6Ly90b2RvX2xpc3QvLi9zcmMvc2lkZWJhci5qcyIsIndlYnBhY2s6Ly90b2RvX2xpc3QvLi9zcmMvYm9keS5qcyIsIndlYnBhY2s6Ly90b2RvX2xpc3QvLi9zcmMvdGFibGUuanMiXSwibmFtZXMiOlsiZ2V0QWxsUHJvamVjdHMiLCJwcm9qZWN0TFMiLCJsb2NhbFN0b3JhZ2UiLCJnZXRJdGVtIiwiSlNPTiIsInBhcnNlIiwidXBkYXRlUHJvamVjdFN0b3JhZ2UiLCJuZXdQcm9qZWN0Iiwib2xkUHJvamVjdCIsInRlbXBTdG9yYWdlIiwicHJvamVjdFN0b3JhZ2UiLCJtYXAiLCJwcm9qZWN0IiwiaW5kZXgiLCJuYW1lIiwic3BsaWNlIiwic3RyaW5naWZ5Iiwic2V0SXRlbSIsInN5bmNQcm9qZWN0IiwiZ2V0Q3VycmVudFByb2plY3QiLCJjdXJyZW50UHJvamVjdExTIiwic2hvd1RvZG9zIiwidG9kb0l0ZW1zIiwidGFibGVSb3dzIiwidG9kbyIsImZvckVhY2giLCJyb3dIdG1sIiwiY2hlY2tlZCIsInByaW9yaXR5IiwidGl0bGUiLCJkdWUiLCJwdXNoIiwiZ2V0VG9kb0NvbnRlbnQiLCJ0YWJsZVJvdyIsImpvaW4iLCJjaGVja1RvZG8iLCJlIiwidG9kb0luZGV4IiwidGFyZ2V0IiwiY2xvc2VzdCIsImRhdGFzZXQiLCJhbHRlcmVkVG9kbyIsImxvY2F0aW9uIiwicmVsb2FkIiwiZGVsZXRlVG9kbyIsImNvbmZpcm0iLCJtb2RhbFNlY3Rpb25zIiwiZG9jdW1lbnQiLCJnZXRFbGVtZW50c0J5Q2xhc3NOYW1lIiwic2lkZWJhciIsInF1ZXJ5U2VsZWN0b3IiLCJ0b2dnbGVCdG4iLCJ0b2dnbGVJY29ucyIsInF1ZXJ5U2VsZWN0b3JBbGwiLCJhZGRQcm9qZWN0QnRuIiwiZ2V0RWxlbWVudEJ5SWQiLCJuZXdQcm9qZWN0TW9kYWwiLCJuZXdQcm9qZWN0Rm9ybSIsImNhbmNlbEJ0bnMiLCJwcm9qZWN0TGlzdCIsInByb2plY3RCb2R5IiwicHJvamVjdE5hbWUiLCJ0b2RvTGlzdCIsInByb2plY3RzTGlzdCIsIm9uY2xpY2siLCJjbGFzc0xpc3QiLCJ0b2dnbGUiLCJpY29uIiwiYWRkRXZlbnRMaXN0ZW5lciIsImVsZW1lbnRzIiwidmFsdWUiLCJhbGxQcm9qZWN0cyIsInN0b3JlUHJvamVjdCIsIkFycmF5IiwiZnJvbSIsImJ1dHRvbiIsIm1vZGFsIiwid2luZG93IiwiY2xhc3NOYW1lIiwic3BsaXQiLCJzb21lIiwib25lY2xhc3MiLCJzZWN0aW9uIiwiYWRkIiwibmV3TGluZSIsImNyZWF0ZUVsZW1lbnQiLCJpbm5lckhUTUwiLCJhcHBlbmRDaGlsZCIsInByb2plY3RzQXJyYXkiLCJsaXN0SXRlbSIsInNlbGVjdE9uZVByb2plY3QiLCJmaW5kIiwic3RvcmVkUHJvamVjdCIsImZpbmRQcm9qZWN0IiwidGV4dENvbnRlbnQiLCJyZW1vdmUiLCJlZGl0UHJvamVjdE1vZGFsIiwiZWRpdFByb2plY3RGb3JtIiwiZWRpdFByb2plY3RCdG4iLCJkZWxQcm9qZWN0QnRuIiwibmV3VG9kb01vZGFsIiwibmV3VG9kb0J0biIsImNoZWNrVG9kb0J0bnMiLCJsZW5ndGgiLCJjdXJyZW50UHJvamVjdCIsInJlbW92ZUl0ZW0iLCJuZXdUb2RvIiwiZm9ybURhdGEiLCJjcmVhdGVUb2RvIiwiZWRpdFRvZG9CdG5zIiwiZWRpdFRvZG9Nb2RhbCIsImVkaXRUb2RvRm9ybSIsImRlbFRvZG9CdG5zIiwiZm9ybSIsIm9sZFRvZG8iLCJvbGRUaXRsZSIsIm9sZER1ZSIsIm9sZFByaW9yaXR5IiwiZmlsbFRvZG9jb250ZW50IiwiZm9ybVZhbHVlIiwiZWRpdFRvZG8iXSwibWFwcGluZ3MiOiJtQkFDQSxNQWdCTUEsRUFBaUIsS0FDckIsSUFBSUMsRUFBWUMsYUFBYUMsUUFBUSxhQUNyQyxPQUFHRixFQUNpQkcsS0FBS0MsTUFBTUos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LEVBQVliLFNBQVcyRixFQUFVM0YsU0FBUzBDLE1BRTFDcEQsRUFBWVgsR0FDWkQsRUFBcUJDLEVBQVlDLElHL0UzQmdILENBQVNwRixFQUFHQyxZQVFKb0MsTUFBTUMsS0FBS3NDLEdBQ2pCdkYsU0FBU2tELElBQ2ZBLEVBQU9QLGlCQUFpQixRQUFTeEIsTyIsImZpbGUiOiJtYWluLmpzIiwic291cmNlc0NvbnRlbnQiOlsiLy8gUHJvamVjdCBmYWN0b3J5XG5jb25zdCBQcm9qZWN0ID0gKG5hbWUpID0+IHtcbiAgbGV0IHRvZG8gPSBbXVxuICByZXR1cm4ge1xuICAgIG5hbWUsXG4gICAgdG9kb1xuICB9XG59XG5cbi8vIFN0b3JlIG5ldyBwcm9qZWN0XG5jb25zdCBzdG9yZVByb2plY3QgPSAobmV3UHJvamVjdCkgPT4ge1xuICBsZXQgYWxsUHJvamVjdHMgPSBnZXRBbGxQcm9qZWN0cygpXG4gIGFsbFByb2plY3RzLnB1c2gobmV3UHJvamVjdClcbiAgbG9jYWxTdG9yYWdlLnNldEl0ZW0oXCJteVByb2plY3RcIiwgSlNPTi5zdHJpbmdpZnkoYWxsUHJvamVjdHMpKVxufVxuXG4vLyBHZXQgc3RvcmVkIHByb2plY3RzXG5jb25zdCBnZXRBbGxQcm9qZWN0cyA9ICgpID0+IHtcbiAgbGV0IHByb2plY3RMUyA9IGxvY2FsU3RvcmFnZS5nZXRJdGVtKFwibXlQcm9qZWN0XCIpXG4gIGlmKHByb2plY3RMUykge1xuICAgIGxldCBhbGxQcm9qZWN0cyA9IEpTT04ucGFyc2UocHJvamVjdExTKVxuICAgIHJldHVybiBhbGxQcm9qZWN0c1xuICB9IGVsc2Uge1xuICAgIHJldHVybiBbXVxuICB9XG59XG5cbi8vIEZpbmQgYSBwcm9qZWN0XG5jb25zdCBmaW5kUHJvamVjdCA9IChwcm9qZWN0TmFtZSkgPT4ge1xuICBsZXQgYWxsUHJvamVjdHMgPSBnZXRBbGxQcm9qZWN0cygpXG4gIGxldCB0aGF0UHJvamVjdCA9IGFsbFByb2plY3RzLmZpbmQoc3RvcmVkUHJvamVjdCA9PiBzdG9yZWRQcm9qZWN0Lm5hbWUgPT0gcHJvamVjdE5hbWUpXG4gIHJldHVybiB0aGF0UHJvamVjdFxufVxuXG4vLyBVcGRhdGUgcHJvamVjdCBzdG9yYWdlXG5jb25zdCB1cGRhdGVQcm9qZWN0U3RvcmFnZSA9IChuZXdQcm9qZWN0LCBvbGRQcm9qZWN0KSA9PiB7XG4gIGxldCBwcm9qZWN0U3RvcmFnZSA9IGdldEFsbFByb2plY3RzKClcbiAgbGV0IHRlbXBTdG9yYWdlXG5cbiAgcHJvamVjdFN0b3JhZ2UubWFwKChwcm9qZWN0LCBpbmRleCkgPT4ge1xuICAgIGlmIChwcm9qZWN0Lm5hbWUgPT0gb2xkUHJvamVjdC5uYW1lICYmIG5ld1Byb2plY3QgPT09IG9sZFByb2plY3QpIHtcbiAgICAgIC8vIERlbGV0ZVxuICAgICAgcHJvamVjdFN0b3JhZ2Uuc3BsaWNlKGluZGV4LCAxKVxuICAgICAgdGVtcFN0b3JhZ2UgPSBKU09OLnN0cmluZ2lmeShwcm9qZWN0U3RvcmFnZSlcbiAgICAgIGxvY2FsU3RvcmFnZS5zZXRJdGVtKFwibXlQcm9qZWN0XCIsIHRlbXBTdG9yYWdlKVxuICAgIH0gZWxzZSBpZiAocHJvamVjdC5uYW1lID09IG9sZFByb2plY3QubmFtZSkge1xuICAgICAgLy8gQWRkXG4gICAgICBwcm9qZWN0U3RvcmFnZS5zcGxpY2UoaW5kZXgsIDEsIG5ld1Byb2plY3QpXG4gICAgICB0ZW1wU3RvcmFnZSA9IEpTT04uc3RyaW5naWZ5KHByb2plY3RTdG9yYWdlKVxuICAgICAgbG9jYWxTdG9yYWdlLnNldEl0ZW0oXCJteVByb2plY3RcIiwgdGVtcFN0b3JhZ2UpXG4gICAgfSBcbiAgfSlcbn1cblxuLy8gU3luY2hyb25pemUgY3VycmVudCBwcm9qZWN0XG5jb25zdCBzeW5jUHJvamVjdCA9IChwcm9qZWN0KSA9PiB7XG4gIGxvY2FsU3RvcmFnZS5zZXRJdGVtKFwiY3VycmVudFByb2plY3RcIixKU09OLnN0cmluZ2lmeShwcm9qZWN0KSlcbn1cblxuLy8gR2V0IGN1cnJlbnQgcHJvamVjdFxuY29uc3QgZ2V0Q3VycmVudFByb2plY3QgPSAoKSA9PiB7XG4gIGxldCBjdXJyZW50UHJvamVjdExTID0gbG9jYWxTdG9yYWdlLmdldEl0ZW0oXCJjdXJyZW50UHJvamVjdFwiKVxuICBpZiAoY3VycmVudFByb2plY3RMUykge1xuICAgIGxldCBjdXJyZW50UHJvamVjdCA9IEpTT04ucGFyc2UoY3VycmVudFByb2plY3RMUylcbiAgICByZXR1cm4gY3VycmVudFByb2plY3RcbiAgfSBlbHNlIHtcbiAgICByZXR1cm4gbnVsbFxuICB9XG59XG5cbi8vIENyZWF0ZSBuZXcgcHJvamVjdFxuY29uc3QgY3JlYXRlTmV3UHJvamVjdCA9IChlKSA9PiB7XG4gIGxldCBwcm9qZWN0TmFtZSA9IGUudGFyZ2V0LmVsZW1lbnRzLm5hbWUudmFsdWVcbiAgbGV0IG5ld1Byb2plY3QgPSBQcm9qZWN0KHByb2plY3ROYW1lKVxuICBzdG9yZVByb2plY3QobmV3UHJvamVjdCkgIFxuICBzeW5jUHJvamVjdChuZXdQcm9qZWN0KVxufVxuXG4vLyBFZGl0IHByb2plY3QgbmFtZVxuY29uc3QgZWRpdFRoaXNQcm9qZWN0ID0gKGUpID0+IHtcbiAgbGV0IG9sZFByb2plY3QgPSBnZXRDdXJyZW50UHJvamVjdCgpXG4gIGxldCBuZXdQcm9qZWN0ID0gZ2V0Q3VycmVudFByb2plY3QoKVxuICBuZXdQcm9qZWN0Lm5hbWUgPSBlLnRhcmdldC5lbGVtZW50cy5uYW1lLnZhbHVlXG4gIHN5bmNQcm9qZWN0KG5ld1Byb2plY3QpXG4gIHVwZGF0ZVByb2plY3RTdG9yYWdlKG5ld1Byb2plY3QsIG9sZFByb2plY3QpXG59XG5cbi8vIERlbGV0ZSBwcm9qZWN0XG5jb25zdCBkZWxldGVUaGlzUHJvamVjdCA9ICgpID0+IHtcbiAgbGV0IGNvbmZpcm1hdGlvbiA9IGNvbmZpcm0oXCJEZWxldGUgdGhpcyBwcm9qZWN0P1wiKVxuICBpZiAoIWNvbmZpcm1hdGlvbikgcmV0dXJuXG5cbiAgbGV0IG9sZFByb2plY3QgPSBnZXRDdXJyZW50UHJvamVjdCgpXG4gIGxldCBuZXdQcm9qZWN0ID0gZ2V0Q3VycmVudFByb2plY3QoKVxuICBcbiAgLy8gVXBkYXRlIHR3byBkYXRhYmFzZVxuICBsb2NhbFN0b3JhZ2UucmVtb3ZlSXRlbShcImN1cnJlbnRQcm9qZWN0XCIpXG4gIHVwZGF0ZVByb2plY3RTdG9yYWdlKG5ld1Byb2plY3QsIG9sZFByb2plY3QpXG4gIGxvY2F0aW9uLnJlbG9hZCgpXG59XG5cbi8vIFVwZGF0ZSBwcm9qZWN0IGN1cnJlbnRQcm9qZWN0LnVwZGF0ZSB0aGlzLm5hbWVcblxuXG5leHBvcnQge1xuICBQcm9qZWN0LFxuICBzdG9yZVByb2plY3QsXG4gIGdldEFsbFByb2plY3RzLFxuICBmaW5kUHJvamVjdCxcbiAgc3luY1Byb2plY3QsXG4gIGdldEN1cnJlbnRQcm9qZWN0LFxuICBjcmVhdGVOZXdQcm9qZWN0LFxuICBlZGl0VGhpc1Byb2plY3QsXG4gIGRlbGV0ZVRoaXNQcm9qZWN0LFxuICB1cGRhdGVQcm9qZWN0U3RvcmFnZVxufVxuXG4iLCJpbXBvcnQge2dldEFsbFByb2plY3RzLCB1cGRhdGVQcm9qZWN0U3RvcmFnZSwgc3luY1Byb2plY3QsXG4gICAgICAgIGdldEN1cnJlbnRQcm9qZWN0fSBmcm9tIFwiLi9wcm9qZWN0XCJcblxuLy8gVG9kbyBmYWN0b3J5XG5jb25zdCBUb2RvID0gKHRpdGxlLCBkdWUsIHByaW9yaXR5LCBjaGVja2VkKSA9PiB7XG5cbiAgcmV0dXJuIHtcbiAgICB0aXRsZSxcbiAgICBkdWUsXG4gICAgcHJpb3JpdHksXG4gICAgY2hlY2tlZFxuICB9XG59XG5cbi8vIENyZWF0ZSBuZXcgdG9kb1xuY29uc3QgY3JlYXRlVG9kbyA9IChlKSA9PiB7XG4gIGxldCBmb3JtRGF0YSA9IGUudGFyZ2V0LmVsZW1lbnRzXG4gIGxldCB0aXRsZSA9IGZvcm1EYXRhLnRpdGxlLnZhbHVlXG4gIGxldCBkdWUgPSBmb3JtRGF0YS5kdWUudmFsdWVcbiAgbGV0IHByaW9yaXR5ID0gZm9ybURhdGEucHJpb3JpdHkudmFsdWVcbiAgbGV0IGNoZWNrZWQgPSBmYWxzZVxuICBsZXQgbmV3VG9kbyA9IFRvZG8odGl0bGUsIGR1ZSwgcHJpb3JpdHksIGNoZWNrZWQpXG5cbiAgcmV0dXJuIG5ld1RvZG9cbn1cblxuLy8gR2V0IHRvZG8gY29udGVudFxuY29uc3QgZ2V0VG9kb0NvbnRlbnQgPSAocHJvamVjdCkgPT4ge1xuICBsZXQgdGFibGVSb3dzID0gW11cbiAgbGV0IGFycmF5ID0gcHJvamVjdC50b2RvXG5cbiAgYXJyYXkuZm9yRWFjaCgodG9kbywgaW5kZXgpID0+IHtcbiAgICBsZXQgcm93SHRtbCA9IGBcbiAgICA8dHIgY2xhc3M9JyR7dG9kby5jaGVja2VkID8gJ2NvbXBsZXRlJyA6IHRvZG8ucHJpb3JpdHl9Jz5cbiAgICAgIDx0ZD4ke3RvZG8udGl0bGV9PC90ZD5cbiAgICAgIDx0ZD4ke3RvZG8uZHVlfTwvdGQ+XG4gICAgICA8dGQ+JHt0b2RvLnByaW9yaXR5fTwvdGQ+XG4gICAgICA8dGQ+XG4gICAgICAgIDxidXR0b24gY2xhc3M9J2NoZWNrLXRvZG8nIGRhdGEtaW5kZXg9JyR7aW5kZXh9Jz5cbiAgICAgICAgICAke1xuICAgICAgICAgICAgdG9kby5jaGVja2VkXG4gICAgICAgICAgICAgID8gXCI8c3BhbiBjbGFzcz0nbWF0ZXJpYWwtaWNvbnMnPnRhc2tfYWx0PC9zcGFuPlwiXG4gICAgICAgICAgICAgIDogXCI8c3BhbiBjbGFzcz0nbWF0ZXJpYWwtaWNvbnMnPnJlbW92ZV9jaXJjbGVfb3V0bGluZTwvc3Bhbj5cIlxuICAgICAgICAgIH1cbiAgICAgICAgPC9idXR0b24+XG4gICAgICA8L3RkPlxuICAgICAgPHRkPjxidXR0b24gY2xhc3M9J2VkaXQtdG9kbycgZGF0YS1pbmRleD0nJHtpbmRleH0nPjxzcGFuIGNsYXNzPVwibWF0ZXJpYWwtaWNvbnNcIj5kZXNjcmlwdGlvbjwvc3Bhbj48L2J1dHRvbj48L3RkPlxuICAgICAgPHRkPjxidXR0b24gY2xhc3M9J2RlbGV0ZS10b2RvJyBkYXRhLWluZGV4PScke2luZGV4fSc+PHNwYW4gY2xhc3M9XCJtYXRlcmlhbC1pY29uc1wiPmRlbGV0ZV9mb3JldmVyPC9zcGFuPjwvYnV0dG9uPjwvdGQ+XG4gICAgPC90cj5gXG5cbiAgdGFibGVSb3dzLnB1c2gocm93SHRtbClcbiAgfSlcblxuICByZXR1cm4gdGFibGVSb3dzXG59XG5cbi8vIFNob3cgdG9kb3NcbmNvbnN0IHNob3dUb2RvcyA9IChwcm9qZWN0KSA9PiB7XG4gIGxldCB0b2RvSXRlbXMgPSBnZXRUb2RvQ29udGVudChwcm9qZWN0KVxuICBpZiAodG9kb0l0ZW1zKSB7XG4gICAgbGV0IGxpc3RIdG1sID0gdG9kb0l0ZW1zLm1hcCgodGFibGVSb3cpID0+IHRhYmxlUm93KS5qb2luKFwiXCIpXG4gICAgcmV0dXJuIGxpc3RIdG1sXG4gIH0gZWxzZSB7XG4gICAgcmV0dXJuIFtdXG4gIH1cbn1cblxuLy8gQ2hlY2sgb3IgdW5jaGVjayB0b2RvXG5jb25zdCBjaGVja1RvZG8gPSAoZSkgPT4ge1xuICBsZXQgb2xkUHJvamVjdCA9IGdldEN1cnJlbnRQcm9qZWN0KClcbiAgbGV0IG5ld1Byb2plY3QgPSBnZXRDdXJyZW50UHJvamVjdCgpXG4gIGxldCB0b2RvSW5kZXggPSBlLnRhcmdldC5jbG9zZXN0KFwiYnV0dG9uXCIpLmRhdGFzZXQuaW5kZXhcbiAgbGV0IGFsdGVyZWRUb2RvID0gbmV3UHJvamVjdC50b2RvW3RvZG9JbmRleF1cbiAgXG4gIGFsdGVyZWRUb2RvLmNoZWNrZWQgPSAhKGFsdGVyZWRUb2RvLmNoZWNrZWQpXG4gIHN5bmNQcm9qZWN0KG5ld1Byb2plY3QpXG4gIHVwZGF0ZVByb2plY3RTdG9yYWdlKG5ld1Byb2plY3QsIG9sZFByb2plY3QpXG4gIC8vIFVwZGF0ZSBpbnRlcmZhY2VcbiAgbG9jYXRpb24ucmVsb2FkKClcbn1cblxuLy8gQXV0b2ZpbGwgb2xkIHRvZG8gY29udGVudFxuY29uc3QgZmlsbFRvZG9jb250ZW50ID0gKGZvcm0sIHRvZG9JbmRleCkgPT4ge1xuICBsZXQgb2xkUHJvamVjdCA9IGdldEN1cnJlbnRQcm9qZWN0KClcbiAgbGV0IG9sZFRvZG8gPSBvbGRQcm9qZWN0LnRvZG9bdG9kb0luZGV4XVxuICBsZXQgb2xkVGl0bGUgPSBvbGRUb2RvLnRpdGxlXG4gIGxldCBvbGREdWUgPSBvbGRUb2RvLmR1ZVxuICBsZXQgb2xkUHJpb3JpdHkgPSBvbGRUb2RvLnByaW9yaXR5XG5cbiAgZm9ybS50aXRsZS52YWx1ZSA9IG9sZFRpdGxlXG4gIGZvcm0uZHVlLnZhbHVlID0gb2xkRHVlXG4gIGZvcm0ucHJpb3JpdHkudmFsdWUgPSBvbGRQcmlvcml0eVxufVxuXG4vLyBFZGl0IHRvZG8gY29udGVudFxuY29uc3QgZWRpdFRvZG8gPSAoZSwgdG9kb0luZGV4KSA9PiB7XG4gIGxldCBvbGRQcm9qZWN0ID0gZ2V0Q3VycmVudFByb2plY3QoKVxuICBsZXQgbmV3UHJvamVjdCA9IGdldEN1cnJlbnRQcm9qZWN0KClcbiAgbGV0IGFsdGVyZWRUb2RvID0gbmV3UHJvamVjdC50b2RvW3RvZG9JbmRleF1cbiAgbGV0IGZvcm1WYWx1ZSA9IGUudGFyZ2V0LmVsZW1lbnRzXG5cbiAgYWx0ZXJlZFRvZG8udGl0bGUgPSBmb3JtVmFsdWUudGl0bGUudmFsdWVcbiAgYWx0ZXJlZFRvZG8uZHVlID0gZm9ybVZhbHVlLmR1ZS52YWx1ZVxuICBhbHRlcmVkVG9kby5wcmlvcml0eSA9IGZvcm1WYWx1ZS5wcmlvcml0eS52YWx1ZVxuXG4gIHN5bmNQcm9qZWN0KG5ld1Byb2plY3QpXG4gIHVwZGF0ZVByb2plY3RTdG9yYWdlKG5ld1Byb2plY3QsIG9sZFByb2plY3QpXG59XG5cbi8vIERlbGV0ZSB0b2RvXG5jb25zdCBkZWxldGVUb2RvID0gKGUpID0+IHtcbiAgbGV0IGNvbmZpcm1hdGlvbiA9IGNvbmZpcm0oXCJEZWxldGUgdGhpcyB0b2RvP1wiKVxuICBpZiAoIWNvbmZpcm1hdGlvbikgcmV0dXJuXG5cbiAgbGV0IG9sZFByb2plY3QgPSBnZXRDdXJyZW50UHJvamVjdCgpXG4gIGxldCBuZXdQcm9qZWN0ID0gZ2V0Q3VycmVudFByb2plY3QoKVxuICBsZXQgdG9kb0luZGV4ID0gZS50YXJnZXQuY2xvc2VzdChcImJ1dHRvblwiKS5kYXRhc2V0LmluZGV4XG4gIGxldCBhbHRlcmVkVG9kbyA9IG5ld1Byb2plY3QudG9kb1xuXG4gIGFsdGVyZWRUb2RvLnNwbGljZSh0b2RvSW5kZXgsIDEpXG4gIC8vIFVwZGF0ZSB0d28gZGF0YWJhc2VcbiAgc3luY1Byb2plY3QobmV3UHJvamVjdClcbiAgdXBkYXRlUHJvamVjdFN0b3JhZ2UobmV3UHJvamVjdCwgb2xkUHJvamVjdClcbiAgbG9jYXRpb24ucmVsb2FkKClcbn1cblxuZXhwb3J0IHtcbiAgVG9kbyxcbiAgY3JlYXRlVG9kbyxcbiAgc2hvd1RvZG9zLFxuICBjaGVja1RvZG8sXG4gIGZpbGxUb2RvY29udGVudCxcbiAgZWRpdFRvZG8sXG4gIGRlbGV0ZVRvZG9cbn0iLCJpbXBvcnQge1Byb2plY3QsIHN0b3JlUHJvamVjdCwgZ2V0QWxsUHJvamVjdHMsIFxuICAgICAgICBmaW5kUHJvamVjdCwgc3luY1Byb2plY3QsIGNyZWF0ZU5ld1Byb2plY3R9IGZyb20gXCIuL3Byb2plY3RcIlxuaW1wb3J0IHtzaG93VG9kb3N9IGZyb20gXCIuL3RvZG9cIlxuXG5jb25zdCBtb2RhbFNlY3Rpb25zID0gZG9jdW1lbnQuZ2V0RWxlbWVudHNCeUNsYXNzTmFtZShcIm1vZGFsXCIpXG5jb25zdCBzaWRlYmFyID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5wcm9qZWN0XCIpXG5jb25zdCB0b2dnbGVCdG4gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLnRvZ2dsZS1wcm9qZWN0XCIpXG5jb25zdCB0b2dnbGVJY29ucyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoXCIudG9nZ2xlLWljb25zXCIpXG5jb25zdCBhZGRQcm9qZWN0QnRuID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJhZGQtcHJvamVjdFwiKVxuY29uc3QgbmV3UHJvamVjdE1vZGFsID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5uZXctcHJvamVjdC1mb3JtLW1vZGFsXCIpICBcbmNvbnN0IG5ld1Byb2plY3RGb3JtID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5uZXctcHJvamVjdC1mb3JtXCIpXG5jb25zdCBjYW5jZWxCdG5zID0gZG9jdW1lbnQuZ2V0RWxlbWVudHNCeUNsYXNzTmFtZShcImNhbmNlbFwiKVxuY29uc3QgcHJvamVjdExpc3QgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLnByb2plY3QtbGlzdFwiKVxuY29uc3QgcHJvamVjdEJvZHkgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLnByb2plY3QtYm9keVwiKVxuY29uc3QgcHJvamVjdE5hbWUgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLnByb2plY3QtbmFtZVwiKVxuY29uc3QgdG9kb0xpc3QgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLnRvZG8tbGlzdFwiKVxuY29uc3QgcHJvamVjdHNMaXN0ID0gZG9jdW1lbnQuZ2V0RWxlbWVudHNCeUNsYXNzTmFtZShcImxpc3QtaXRlbVwiKVxuXG4vLyBTaG93IG9yIGhpZGUgc2lkZWJhclxubGV0IGNhblRvZ2dsZVNpZGVCYXIgPSAoKCkgPT4ge1xuICB0b2dnbGVCdG4ub25jbGljayA9ICgpID0+IHtcbiAgICBzaWRlYmFyLmNsYXNzTGlzdC50b2dnbGUoXCJhY3RpdmVcIilcbiAgICB0b2dnbGVJY29ucy5mb3JFYWNoKChpY29uKSA9PiBpY29uLmNsYXNzTGlzdC50b2dnbGUoXCJoaWRkZW5cIikpXG4gIH1cbn0pKClcblxuLy8gT3BlbiBuZXcgcHJvamVjdCBmb3JtXG5sZXQgY2FuVHJpZ2dlck5ld1Byb2plY3RGb3JtID0gKCgpID0+IHtcbiAgYWRkUHJvamVjdEJ0bi5vbmNsaWNrID0gKCkgPT4ge1xuICAgIG5ld1Byb2plY3RNb2RhbC5jbGFzc0xpc3QudG9nZ2xlKFwiaGlkZGVuXCIpXG4gIH1cbn0pKClcblxuLy8gQ3JlYXRlIHByb2plY3RcbmxldCBjYW5DcmVhdGVQcm9qZWN0ID0gKCgpID0+IHtcbiAgbmV3UHJvamVjdEZvcm0uYWRkRXZlbnRMaXN0ZW5lcihcInN1Ym1pdFwiLCBjcmVhdGVOZXdQcm9qZWN0KVxufSkoKVxuXG4vLyBDYW5jZWwgZm9ybVxubGV0IGNhbkNhbmNlbEZvcm0gPSAoKCkgPT4ge1xuICBsZXQgYnV0dG9uc0FycmF5ID0gQXJyYXkuZnJvbShjYW5jZWxCdG5zKVxuICBidXR0b25zQXJyYXkuZm9yRWFjaCgoYnV0dG9uKSA9PiB7XG4gICAgbGV0IG1vZGFsID0gYnV0dG9uLmNsb3Nlc3QoXCJzZWN0aW9uXCIpXG4gICAgYnV0dG9uLm9uY2xpY2sgPSAoKSA9PiB7XG4gICAgICBtb2RhbC5jbGFzc0xpc3QudG9nZ2xlKFwiaGlkZGVuXCIpXG4gICAgfVxuICB9KVxufSkoKVxuXG4vLyBDYW5jZWwgZm9ybSBieSBjbGlja2luZyBvdXRzaWRlXG5sZXQgY2FuQ2xpY2tPdXRzaWRlID0gKCgpID0+IHtcbiAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoZSkgPT4ge1xuICAgIGxldCBjbGFzc2VzID0gZS50YXJnZXQuY2xhc3NOYW1lLnNwbGl0KFwiIFwiKVxuICAgIGxldCBoYXNNb2RhbCA9IGNsYXNzZXMuc29tZSgob25lY2xhc3MpID0+IG9uZWNsYXNzID09IFwibW9kYWxcIilcbiAgICBpZiAoaGFzTW9kYWwpIHtcbiAgICAgIGxldCBtb2RhbHMgPSBBcnJheS5mcm9tKG1vZGFsU2VjdGlvbnMpXG4gICAgICBtb2RhbHMuZm9yRWFjaCgoc2VjdGlvbikgPT4ge1xuICAgICAgICBzZWN0aW9uLmNsYXNzTGlzdC5hZGQoXCJoaWRkZW5cIilcbiAgICAgIH0gKVxuICAgIH1cbiAgfSkgIFxufSkoKVxuXG4vLyBTaG93IHByb2plY3RzXG5sZXQgY2FuU2hvd1Byb2plY3QgPSAoKCkgPT4ge1xuICBsZXQgYWxsUHJvamVjdHMgPSBnZXRBbGxQcm9qZWN0cygpXG4gIGFsbFByb2plY3RzLm1hcCgocHJvamVjdCkgPT4ge1xuICAgIGxldCBuZXdMaW5lID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImxpXCIpXG4gICAgbmV3TGluZS5pbm5lckhUTUwgPSBwcm9qZWN0Lm5hbWVcbiAgICBuZXdMaW5lLmNsYXNzTGlzdC5hZGQoXCJsaXN0LWl0ZW1cIilcbiAgICBwcm9qZWN0TGlzdC5hcHBlbmRDaGlsZChuZXdMaW5lKVxuICB9KVxufSkoKVxuXG4vLyBTaG93IHRvZG9cbmxldCBjYW5TaG93Q29udGVudCA9ICgoKSA9PiB7XG4gIGxldCBwcm9qZWN0c0FycmF5ID0gQXJyYXkuZnJvbShwcm9qZWN0c0xpc3QpXG4gIHByb2plY3RzQXJyYXkuZm9yRWFjaCgobGlzdEl0ZW0pID0+IHsgICAgXG4gICAgbGlzdEl0ZW0uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsKGUpID0+IHtcbiAgICAgIHNlbGVjdE9uZVByb2plY3QoZSlcbiAgICAgIGxldCBwcm9qZWN0ID0gZmluZFByb2plY3QobGlzdEl0ZW0udGV4dENvbnRlbnQpXG4gICAgICAvLyBTeW5jaHJvbml6ZSBjdXJyZW50IHByb2plY3RcbiAgICAgIHN5bmNQcm9qZWN0KHByb2plY3QpXG4gICAgICAvLyBBdXRvIHVwZGF0ZSBwcm9qZWN0IGNvbnRlbnRcbiAgICAgIHByb2plY3ROYW1lLmlubmVySFRNTCA9IHByb2plY3QubmFtZVxuICAgICAgdG9kb0xpc3QuaW5uZXJIVE1MID0gc2hvd1RvZG9zKHByb2plY3QpXG4gICAgICBwcm9qZWN0Qm9keS5jbGFzc0xpc3QucmVtb3ZlKFwiaGlkZGVuXCIpICBcbiAgICAgIGxvY2F0aW9uLnJlbG9hZCgpXG4gICAgfSlcbiAgfSlcblxuICAvLyBTZWxlY3RlZCBwcm9qZWN0IGRpc3BsYXlcbiAgY29uc3Qgc2VsZWN0T25lUHJvamVjdCA9IChlKSA9PiB7XG4gICAgcHJvamVjdHNBcnJheSA9IEFycmF5LmZyb20ocHJvamVjdHNMaXN0KVxuICAgIHByb2plY3RzQXJyYXkuZm9yRWFjaCgobGlzdEl0ZW0pID0+IHtcbiAgICAgIGxpc3RJdGVtLmNsYXNzTGlzdC5yZW1vdmUoXCJzZWxlY3RlZFwiKVxuICAgIH0pXG4gICAgbGV0IHNlbGVjdGVkID0gZS50YXJnZXRcbiAgICBzZWxlY3RlZC5jbGFzc0xpc3QuYWRkKFwic2VsZWN0ZWRcIilcbiAgfVxufSkoKVxuXG4iLCJpbXBvcnQge2dldEFsbFByb2plY3RzLCBnZXRDdXJyZW50UHJvamVjdCwgZWRpdFRoaXNQcm9qZWN0LCBcbiAgICAgICAgZGVsZXRlVGhpc1Byb2plY3QsIHN5bmNQcm9qZWN0LCB1cGRhdGVQcm9qZWN0U3RvcmFnZX0gZnJvbSBcIi4vcHJvamVjdFwiXG5pbXBvcnQge2NyZWF0ZVRvZG8sIHNob3dUb2Rvc30gZnJvbSBcIi4vdG9kb1wiXG5cbmNvbnN0IHByb2plY3RCb2R5ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5wcm9qZWN0LWJvZHlcIilcbmNvbnN0IHByb2plY3ROYW1lID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5wcm9qZWN0LW5hbWVcIilcbmNvbnN0IGVkaXRQcm9qZWN0TW9kYWwgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLmVkaXQtcHJvamVjdC1mb3JtLW1vZGFsXCIpXG5jb25zdCBlZGl0UHJvamVjdEZvcm0gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLmVkaXQtcHJvamVjdC1mb3JtXCIpXG5jb25zdCBlZGl0UHJvamVjdEJ0biA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuZWRpdC1wcm9qZWN0XCIpXG5jb25zdCBkZWxQcm9qZWN0QnRuID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5kZWxldGUtcHJvamVjdFwiKVxuY29uc3QgbmV3VG9kb01vZGFsID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5uZXctdG9kby1mb3JtLW1vZGFsXCIpXG5jb25zdCBuZXdQcm9qZWN0Rm9ybSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIubmV3LXRvZG8tZm9ybVwiKVxuY29uc3QgbmV3VG9kb0J0biA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIubmV3LXRvZG9cIilcbmNvbnN0IHRvZG9MaXN0ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi50b2RvLWxpc3RcIilcblxuLy8gQXV0byBoaWRlIGJvZHkgd2hlbiBubyBwcm9qZWN0c1xuY29uc3QgYXV0b0hpZGVCb2R5ID0gKCgpID0+IHtcbiAgbGV0IGFsbFByb2plY3RzID0gZ2V0QWxsUHJvamVjdHMoKVxuICBpZiAoYWxsUHJvamVjdHMubGVuZ3RoID09IDApIHtcbiAgICBwcm9qZWN0Qm9keS5jbGFzc0xpc3QuYWRkKFwiaGlkZGVuXCIpXG4gIH1cbn0pKClcblxuLy8gQXV0byBzaG93IGxhc3QgY2hlY2tlZCBwcm9qZWN0XG5jb25zdCBhdXRvU2hvd0JvZHkgPSAoKCkgPT4ge1xuICBsZXQgY3VycmVudFByb2plY3QgPSBnZXRDdXJyZW50UHJvamVjdCgpXG4gIGlmIChjdXJyZW50UHJvamVjdCkge1xuICAgIHByb2plY3ROYW1lLmlubmVySFRNTCA9IGN1cnJlbnRQcm9qZWN0Lm5hbWVcbiAgICBwcm9qZWN0Qm9keS5jbGFzc0xpc3QucmVtb3ZlKFwiaGlkZGVuXCIpXG4gICAgdG9kb0xpc3QuaW5uZXJIVE1MID0gc2hvd1RvZG9zKGN1cnJlbnRQcm9qZWN0KVxuICB9IFxufSkoKVxuXG4vLyBPcGVuIGVkaXQgcHJvamVjdCBmb3JtXG5jb25zdCBjYW5UcmlnZ2VyRWRpdFByb2plY3RGb3JtID0gKCgpID0+e1xuICBlZGl0UHJvamVjdEJ0bi5vbmNsaWNrID0gKCkgPT4ge1xuICAgIGVkaXRQcm9qZWN0TW9kYWwuY2xhc3NMaXN0LnRvZ2dsZShcImhpZGRlblwiKVxuICB9XG59KSgpXG5cbi8vIEVkaXQgcHJvamVjdFxuY29uc3QgY2FuRWRpdFByb2plY3QgPSAoKCkgPT4ge1xuICBlZGl0UHJvamVjdEZvcm0uYWRkRXZlbnRMaXN0ZW5lcihcInN1Ym1pdFwiLCBlZGl0VGhpc1Byb2plY3QpXG59KSgpXG5cbi8vIERlbGV0ZSBwcm9qZWN0XG5jb25zdCBjYW5EZWxldGVQcm9qZWN0ID0gKCgpID0+IHtcbiAgZGVsUHJvamVjdEJ0bi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgZGVsZXRlVGhpc1Byb2plY3QpXG59KSgpXG5cbi8vIE9wZW4gbmV3IHRvZG8gZm9ybVxuY29uc3QgY2FuVHJpZ2dlck5ld1RvZG9Gb3JtID0gKCgpID0+IHtcbiAgbmV3VG9kb0J0bi5vbmNsaWNrID0gKCkgPT4ge1xuICAgIG5ld1RvZG9Nb2RhbC5jbGFzc0xpc3QudG9nZ2xlKFwiaGlkZGVuXCIpXG4gIH1cbn0pKClcblxuLy8gQ3JlYXRlIG5ldyB0b2RvXG5jb25zdCBjYW5DcmVhdGVUb2RvID0gKCgpID0+IHtcbiAgbmV3UHJvamVjdEZvcm0uYWRkRXZlbnRMaXN0ZW5lcihcInN1Ym1pdFwiLChlKSA9PiB7XG4gICAgbGV0IG5ld1RvZG8gPSBjcmVhdGVUb2RvKGUpXG4gICAgbGV0IG9sZFByb2plY3QgPSBnZXRDdXJyZW50UHJvamVjdCgpXG4gICAgbGV0IG5ld1Byb2plY3QgPSBnZXRDdXJyZW50UHJvamVjdCgpXG4gICAgbmV3UHJvamVjdC50b2RvLnB1c2gobmV3VG9kbylcbiAgICBzeW5jUHJvamVjdChuZXdQcm9qZWN0KVxuICAgIHVwZGF0ZVByb2plY3RTdG9yYWdlKG5ld1Byb2plY3QsIG9sZFByb2plY3QpXG4gIH0pXG59KSgpXG5cbiIsIi8vIFRhYmxlIHdpdGhpbiBib2R5XG5pbXBvcnQge2NoZWNrVG9kbywgZmlsbFRvZG9jb250ZW50LCBlZGl0VG9kbyxcbiAgICAgICAgZGVsZXRlVG9kb30gZnJvbSBcIi4vdG9kb1wiXG5cbmNvbnN0IGNoZWNrVG9kb0J0bnMgPSBkb2N1bWVudC5nZXRFbGVtZW50c0J5Q2xhc3NOYW1lKFwiY2hlY2stdG9kb1wiKVxuY29uc3QgZWRpdFRvZG9CdG5zID0gZG9jdW1lbnQuZ2V0RWxlbWVudHNCeUNsYXNzTmFtZShcImVkaXQtdG9kb1wiKVxuY29uc3QgZWRpdFRvZG9Nb2RhbCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuZWRpdC10b2RvLWZvcm0tbW9kYWxcIilcbmNvbnN0IGVkaXRUb2RvRm9ybSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuZWRpdC10b2RvLWZvcm1cIilcbmNvbnN0IGRlbFRvZG9CdG5zID0gZG9jdW1lbnQuZ2V0RWxlbWVudHNCeUNsYXNzTmFtZShcImRlbGV0ZS10b2RvXCIpXG5cbi8vIENoZWNrIG9yIHVuY2hlY2sgb25lIHRvZG9cbmNvbnN0IGNhbkNoZWNrVG9kbyA9ICgoKSA9PiB7XG4gIGxldCBidXR0b25zID0gQXJyYXkuZnJvbShjaGVja1RvZG9CdG5zKVxuICBidXR0b25zLmZvckVhY2goKGJ1dHRvbikgPT4ge1xuICAgIGJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgY2hlY2tUb2RvKVxuICB9KVxufSkoKVxuXG4vLyBPcGVuIGVkaXQgdG9kbyBmb3JtIGFuZCBlZGl0XG5jb25zdCBjYW5UcmlnZ2VyQW5kRWRpdFRvZG9Gb3JtID0gKCgpID0+e1xuICBsZXQgYnV0dG9ucyA9IEFycmF5LmZyb20oZWRpdFRvZG9CdG5zKVxuICBidXR0b25zLmZvckVhY2goKGJ1dHRvbikgPT4ge1xuICAgIGJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKGUpID0+IHtcbiAgICAgIGVkaXRUb2RvTW9kYWwuY2xhc3NMaXN0LnRvZ2dsZShcImhpZGRlblwiKVxuICAgICAgbGV0IHRvZG9JbmRleCA9IGUudGFyZ2V0LmNsb3Nlc3QoXCJidXR0b25cIikuZGF0YXNldC5pbmRleFxuICAgICAgZmlsbFRvZG9jb250ZW50KGVkaXRUb2RvRm9ybSwgdG9kb0luZGV4KVxuICAgICAgZWRpdFRvZG9Gb3JtLmFkZEV2ZW50TGlzdGVuZXIoXCJzdWJtaXRcIiwgKGUpID0+IHtcbiAgICAgICAgZWRpdFRvZG8oZSwgdG9kb0luZGV4KVxuICAgICAgfSlcbiAgICB9KVxuICB9KVxufSkoKVxuXG4vLyBEZWxldGUgb25lIHRvZG9cbmNvbnN0IGNhbkRlbFRvZG8gPSAoKCkgPT4ge1xuICBsZXQgYnV0dG9ucyA9IEFycmF5LmZyb20oZGVsVG9kb0J0bnMpXG4gIGJ1dHRvbnMuZm9yRWFjaCgoYnV0dG9uKSA9PiB7XG4gICAgYnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCBkZWxldGVUb2RvKVxuICB9KVxufSkoKVxuIl0sInNvdXJjZVJvb3QiOiIifQ==