(()=>{"use strict";const e=()=>{let e=localStorage.getItem("myProject");return e?JSON.parse(e):[]},t=(e,t)=>{let o,r=JSON.parse(localStorage.getItem("myProject"));r.map(((n,c)=>{n.name==t.name&&e===t?(r.splice(c,1),o=JSON.stringify(r),localStorage.setItem("myProject",o)):n.name==t.name&&(r.splice(c,1,e),o=JSON.stringify(r),localStorage.setItem("myProject",o))}))},o=e=>{localStorage.setItem("currentProject",JSON.stringify(e))},r=()=>{let e=localStorage.getItem("currentProject");return e?JSON.parse(e):null},n=e=>{let t=(e=>{let t=[];return e.todo.forEach((e=>{let o=`\n    <tr class='${e.checked?"complete":e.priority}'>\n      <td>${e.title}</td>\n      <td>${e.due}</td>\n      <td>${e.priority}</td>\n      <td>\n        <button class='progress'>\n          ${e.checked?"<span class='material-icons'>task_alt</span>":"<span class='material-icons'>remove_circle_outline</span>"}\n        </button>\n      </td>\n      <td><button class='edit-todo'><span class="material-icons">zoom_in</span></button></td>\n      <td><button class='delete-todo'><span class="material-icons">delete_forever</span></button></td>\n    </tr>`;t.push(o)})),t})(e);return t?t.map((e=>e)).join(""):[]},c=document.getElementsByClassName("modal"),l=document.querySelector(".project"),a=document.querySelector(".toggle-project"),s=document.querySelectorAll(".toggle-icons"),d=document.getElementById("add-project"),i=document.querySelector(".new-project-form-modal"),m=document.querySelector(".new-project-form"),u=document.getElementsByClassName("cancel"),p=document.querySelector(".project-list"),g=document.querySelector(".project-body"),y=document.querySelector(".project-name"),S=document.querySelector(".todo-list");a.onclick=()=>{l.classList.toggle("active"),s.forEach((e=>e.classList.toggle("hidden")))},d.onclick=()=>{i.classList.toggle("hidden")},m.addEventListener("submit",(t=>{let r={name:t.target.elements.name.value,todo:[]};(t=>{let o=e();o.push(t),localStorage.setItem("myProject",JSON.stringify(o))})(r),o(r)})),Array.from(u).forEach((e=>{let t=e.closest("section");e.onclick=()=>{t.classList.toggle("hidden")}})),window.addEventListener("click",(e=>{e.target.className.split(" ").some((e=>"modal"==e))&&Array.from(c).forEach((e=>{e.classList.add("hidden")}))})),e().map((e=>{let t=document.createElement("li");t.innerHTML=e.name,t.classList.add("list-item"),p.appendChild(t)})),(()=>{let t=document.getElementsByClassName("list-item");Array.from(t).forEach((t=>{t.addEventListener("click",(()=>{let r=(t=>e().find((e=>e.name==t)))(t.textContent);o(r),y.innerHTML=r.name,S.innerHTML=n(r),g.classList.remove("hidden")}))}))})();const j=document.querySelector(".project-body"),h=document.querySelector(".project-name"),f=document.querySelector(".edit-project-form-modal"),L=document.querySelector(".edit-project-form"),q=document.querySelector(".edit-project"),v=document.querySelector(".delete-project"),E=document.querySelector(".new-todo-form-modal"),k=document.querySelector(".new-todo-form"),b=document.querySelector(".new-todo"),N=document.querySelector(".todo-list");0==e().length&&j.classList.add("hidden"),(()=>{let e=r();e&&(h.innerHTML=e.name,j.classList.remove("hidden"),N.innerHTML=n(e))})(),q.onclick=()=>{f.classList.toggle("hidden")},L.addEventListener("submit",(e=>{let n=r(),c=r();c.name=e.target.elements.name.value,o(c),t(c,n)})),v.addEventListener("click",(()=>{if(!confirm("Delete this project?"))return;let e=r(),o=r();localStorage.removeItem("currentProject"),t(o,e),location.reload()})),b.onclick=()=>{E.classList.toggle("hidden")},k.addEventListener("submit",(e=>{let n=(e=>{let t=e.target.elements;return{title:t.title.value,due:t.due.value,priority:t.priority.value,checked:!1}})(e),c=r(),l=r();l.todo.push(n),o(l),t(l,c)}))})();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly90b2RvX2xpc3QvLi9zcmMvcHJvamVjdC5qcyIsIndlYnBhY2s6Ly90b2RvX2xpc3QvLi9zcmMvdG9kby5qcyIsIndlYnBhY2s6Ly90b2RvX2xpc3QvLi9zcmMvc2lkZWJhci5qcyIsIndlYnBhY2s6Ly90b2RvX2xpc3QvLi9zcmMvYm9keS5qcyJdLCJuYW1lcyI6WyJnZXRBbGxQcm9qZWN0cyIsInByb2plY3RMUyIsImxvY2FsU3RvcmFnZSIsImdldEl0ZW0iLCJKU09OIiwicGFyc2UiLCJ1cGRhdGVQcm9qZWN0U3RvcmFnZSIsIm5ld1Byb2plY3QiLCJvbGRQcm9qZWN0IiwidGVtcFN0b3JhZ2UiLCJwcm9qZWN0U3RvcmFnZSIsIm1hcCIsInByb2plY3QiLCJpbmRleCIsIm5hbWUiLCJzcGxpY2UiLCJzdHJpbmdpZnkiLCJzZXRJdGVtIiwic3luY1Byb2plY3QiLCJnZXRDdXJyZW50UHJvamVjdCIsImN1cnJlbnRQcm9qZWN0TFMiLCJzaG93VG9kb3MiLCJ0b2RvSXRlbXMiLCJ0YWJsZVJvd3MiLCJ0b2RvIiwiZm9yRWFjaCIsInJvd0h0bWwiLCJjaGVja2VkIiwicHJpb3JpdHkiLCJ0aXRsZSIsImR1ZSIsInB1c2giLCJnZXRUb2RvQ29udGVudCIsInRhYmxlUm93Iiwiam9pbiIsIm1vZGFsU2VjdGlvbnMiLCJkb2N1bWVudCIsImdldEVsZW1lbnRzQnlDbGFzc05hbWUiLCJzaWRlYmFyIiwicXVlcnlTZWxlY3RvciIsInRvZ2dsZUJ0biIsInRvZ2dsZUljb25zIiwicXVlcnlTZWxlY3RvckFsbCIsImFkZFByb2plY3RCdG4iLCJnZXRFbGVtZW50QnlJZCIsIm5ld1Byb2plY3RNb2RhbCIsIm5ld1Byb2plY3RGb3JtIiwiY2FuY2VsQnRucyIsInByb2plY3RMaXN0IiwicHJvamVjdEJvZHkiLCJwcm9qZWN0TmFtZSIsInRvZG9MaXN0Iiwib25jbGljayIsImNsYXNzTGlzdCIsInRvZ2dsZSIsImljb24iLCJhZGRFdmVudExpc3RlbmVyIiwiZSIsInRhcmdldCIsImVsZW1lbnRzIiwidmFsdWUiLCJhbGxQcm9qZWN0cyIsInN0b3JlUHJvamVjdCIsIkFycmF5IiwiZnJvbSIsImJ1dHRvbiIsIm1vZGFsIiwiY2xvc2VzdCIsIndpbmRvdyIsImNsYXNzTmFtZSIsInNwbGl0Iiwic29tZSIsIm9uZWNsYXNzIiwic2VjdGlvbiIsImFkZCIsIm5ld0xpbmUiLCJjcmVhdGVFbGVtZW50IiwiaW5uZXJIVE1MIiwiYXBwZW5kQ2hpbGQiLCJwcm9qZWN0cyIsImxpc3RJdGVtIiwiZmluZCIsInN0b3JlZFByb2plY3QiLCJmaW5kUHJvamVjdCIsInRleHRDb250ZW50IiwicmVtb3ZlIiwiZWRpdFByb2plY3RNb2RhbCIsImVkaXRQcm9qZWN0Rm9ybSIsImVkaXRQcm9qZWN0QnRuIiwiZGVsUHJvamVjdEJ0biIsIm5ld1RvZG9Nb2RhbCIsIm5ld1RvZG9CdG4iLCJsZW5ndGgiLCJjdXJyZW50UHJvamVjdCIsImNvbmZpcm0iLCJyZW1vdmVJdGVtIiwibG9jYXRpb24iLCJyZWxvYWQiLCJuZXdUb2RvIiwiZm9ybURhdGEiLCJjcmVhdGVUb2RvIl0sIm1hcHBpbmdzIjoibUJBQ0EsTUFnQk1BLEVBQWlCLEtBQ3JCLElBQUlDLEVBQVlDLGFBQWFDLFFBQVEsYUFDckMsT0FBR0YsRUFDaUJHLEtBQUtDLE1BQU1KLEdBR3RCLElBWUxLLEVBQXVCLENBQUNDLEVBQVlDLEtBQ3hDLElBQ0lDLEVBREFDLEVBQWlCTixLQUFLQyxNQUFNSCxhQUFhQyxRQUFRLGNBR3JETyxFQUFlQyxLQUFJLENBQUNDLEVBQVNDLEtBQ3ZCRCxFQUFRRSxNQUFRTixFQUFXTSxNQUFRUCxJQUFlQyxHQUVwREUsRUFBZUssT0FBT0YsRUFBTyxHQUM3QkosRUFBY0wsS0FBS1ksVUFBVU4sR0FDN0JSLGFBQWFlLFFBQVEsWUFBYVIsSUFDekJHLEVBQVFFLE1BQVFOLEVBQVdNLE9BRXBDSixFQUFlSyxPQUFPRixFQUFPLEVBQUdOLEdBQ2hDRSxFQUFjTCxLQUFLWSxVQUFVTixHQUM3QlIs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QixNQVRyQmhDLFNBVWF1RSxFQUFTdkUsU0FBU2dDLE1BVC9CakMsU0FVWSxJRTJDRXlFLENBQVczQyxHQUNyQmpELEVBQWFXLElBQ2JaLEVBQWFZLElBQ2pCWixFQUFXaUIsS0FBS08sS0FBS21FLEdBQ3JCaEYsRUFBWVgsR0FDWkQsRUFBcUJDLEVBQVlDLE8iLCJmaWxlIjoibWFpbi5qcyIsInNvdXJjZXNDb250ZW50IjpbIi8vIFByb2plY3QgZmFjdG9yeVxuY29uc3QgUHJvamVjdCA9IChuYW1lKSA9PiB7XG4gIGxldCB0b2RvID0gW11cbiAgcmV0dXJuIHtcbiAgICBuYW1lLFxuICAgIHRvZG9cbiAgfVxufVxuXG4vLyBTdG9yZSBuZXcgcHJvamVjdFxuY29uc3Qgc3RvcmVQcm9qZWN0ID0gKG5ld1Byb2plY3QpID0+IHtcbiAgbGV0IGFsbFByb2plY3RzID0gZ2V0QWxsUHJvamVjdHMoKVxuICBhbGxQcm9qZWN0cy5wdXNoKG5ld1Byb2plY3QpXG4gIGxvY2FsU3RvcmFnZS5zZXRJdGVtKFwibXlQcm9qZWN0XCIsIEpTT04uc3RyaW5naWZ5KGFsbFByb2plY3RzKSlcbn1cblxuLy8gR2V0IHN0b3JlZCBwcm9qZWN0c1xuY29uc3QgZ2V0QWxsUHJvamVjdHMgPSAoKSA9PiB7XG4gIGxldCBwcm9qZWN0TFMgPSBsb2NhbFN0b3JhZ2UuZ2V0SXRlbShcIm15UHJvamVjdFwiKVxuICBpZihwcm9qZWN0TFMpIHtcbiAgICBsZXQgYWxsUHJvamVjdHMgPSBKU09OLnBhcnNlKHByb2plY3RMUylcbiAgICByZXR1cm4gYWxsUHJvamVjdHNcbiAgfSBlbHNlIHtcbiAgICByZXR1cm4gW11cbiAgfVxufVxuXG4vLyBGaW5kIGEgcHJvamVjdFxuY29uc3QgZmluZFByb2plY3QgPSAocHJvamVjdE5hbWUpID0+IHtcbiAgbGV0IGFsbFByb2plY3RzID0gZ2V0QWxsUHJvamVjdHMoKVxuICBsZXQgdGhhdFByb2plY3QgPSBhbGxQcm9qZWN0cy5maW5kKCBzdG9yZWRQcm9qZWN0ID0+IHN0b3JlZFByb2plY3QubmFtZSA9PSBwcm9qZWN0TmFtZSlcbiAgcmV0dXJuIHRoYXRQcm9qZWN0XG59XG5cbi8vIFVwZGF0ZSBwcm9qZWN0IHN0b3JhZ2VcbmNvbnN0IHVwZGF0ZVByb2plY3RTdG9yYWdlID0gKG5ld1Byb2plY3QsIG9sZFByb2plY3QpID0+IHtcbiAgbGV0IHByb2plY3RTdG9yYWdlID0gSlNPTi5wYXJzZShsb2NhbFN0b3JhZ2UuZ2V0SXRlbShcIm15UHJvamVjdFwiKSlcbiAgbGV0IHRlbXBTdG9yYWdlXG5cbiAgcHJvamVjdFN0b3JhZ2UubWFwKChwcm9qZWN0LCBpbmRleCkgPT4ge1xuICAgIGlmIChwcm9qZWN0Lm5hbWUgPT0gb2xkUHJvamVjdC5uYW1lICYmIG5ld1Byb2plY3QgPT09IG9sZFByb2plY3QpIHtcbiAgICAgIC8vIERlbGV0ZVxuICAgICAgcHJvamVjdFN0b3JhZ2Uuc3BsaWNlKGluZGV4LCAxKVxuICAgICAgdGVtcFN0b3JhZ2UgPSBKU09OLnN0cmluZ2lmeShwcm9qZWN0U3RvcmFnZSlcbiAgICAgIGxvY2FsU3RvcmFnZS5zZXRJdGVtKFwibXlQcm9qZWN0XCIsIHRlbXBTdG9yYWdlKVxuICAgIH0gZWxzZSBpZiAocHJvamVjdC5uYW1lID09IG9sZFByb2plY3QubmFtZSkge1xuICAgICAgLy8gQWRkXG4gICAgICBwcm9qZWN0U3RvcmFnZS5zcGxpY2UoaW5kZXgsIDEsIG5ld1Byb2plY3QpXG4gICAgICB0ZW1wU3RvcmFnZSA9IEpTT04uc3RyaW5naWZ5KHByb2plY3RTdG9yYWdlKVxuICAgICAgbG9jYWxTdG9yYWdlLnNldEl0ZW0oXCJteVByb2plY3RcIiwgdGVtcFN0b3JhZ2UpXG4gICAgfSBcbiAgfSlcbn1cblxuLy8gU3luY2hyb25pemUgY3VycmVudCBwcm9qZWN0XG5jb25zdCBzeW5jUHJvamVjdCA9IChwcm9qZWN0KSA9PiB7XG4gIGxvY2FsU3RvcmFnZS5zZXRJdGVtKFwiY3VycmVudFByb2plY3RcIixKU09OLnN0cmluZ2lmeShwcm9qZWN0KSlcbn1cblxuLy8gR2V0IGN1cnJlbnQgcHJvamVjdFxuY29uc3QgZ2V0Q3VycmVudFByb2plY3QgPSAoKSA9PiB7XG4gIGxldCBjdXJyZW50UHJvamVjdExTID0gbG9jYWxTdG9yYWdlLmdldEl0ZW0oXCJjdXJyZW50UHJvamVjdFwiKVxuICBpZiAoY3VycmVudFByb2plY3RMUykge1xuICAgIGxldCBjdXJyZW50UHJvamVjdCA9IEpTT04ucGFyc2UoY3VycmVudFByb2plY3RMUylcbiAgICByZXR1cm4gY3VycmVudFByb2plY3RcbiAgfSBlbHNlIHtcbiAgICByZXR1cm4gbnVsbFxuICB9XG59XG5cbi8vIENyZWF0ZSBuZXcgcHJvamVjdFxuY29uc3QgY3JlYXRlTmV3UHJvamVjdCA9IChlKSA9PiB7XG4gIGxldCBwcm9qZWN0TmFtZSA9IGUudGFyZ2V0LmVsZW1lbnRzLm5hbWUudmFsdWVcbiAgbGV0IG5ld1Byb2plY3QgPSBQcm9qZWN0KHByb2plY3ROYW1lKVxuICBzdG9yZVByb2plY3QobmV3UHJvamVjdCkgIFxuICBzeW5jUHJvamVjdChuZXdQcm9qZWN0KVxufVxuXG4vLyBFZGl0IHByb2plY3QgbmFtZVxuY29uc3QgZWRpdFRoaXNQcm9qZWN0ID0gKGUpID0+IHtcbiAgbGV0IG9sZFByb2plY3QgPSBnZXRDdXJyZW50UHJvamVjdCgpXG4gIGxldCBuZXdQcm9qZWN0ID0gZ2V0Q3VycmVudFByb2plY3QoKVxuICBuZXdQcm9qZWN0Lm5hbWUgPSBlLnRhcmdldC5lbGVtZW50cy5uYW1lLnZhbHVlXG4gIHN5bmNQcm9qZWN0KG5ld1Byb2plY3QpXG4gIHVwZGF0ZVByb2plY3RTdG9yYWdlKG5ld1Byb2plY3QsIG9sZFByb2plY3QpXG59XG5cbi8vIERlbGV0ZSBwcm9qZWN0XG5jb25zdCBkZWxldGVUaGlzUHJvamVjdCA9ICgpID0+IHtcbiAgbGV0IGNvbmZpcm1hdGlvbiA9IGNvbmZpcm0oXCJEZWxldGUgdGhpcyBwcm9qZWN0P1wiKVxuICBpZiAoIWNvbmZpcm1hdGlvbikgcmV0dXJuXG5cbiAgbGV0IG9sZFByb2plY3QgPSBnZXRDdXJyZW50UHJvamVjdCgpXG4gIGxldCBuZXdQcm9qZWN0ID0gZ2V0Q3VycmVudFByb2plY3QoKVxuICBsb2NhbFN0b3JhZ2UucmVtb3ZlSXRlbShcImN1cnJlbnRQcm9qZWN0XCIpXG4gIHVwZGF0ZVByb2plY3RTdG9yYWdlKG5ld1Byb2plY3QsIG9sZFByb2plY3QpXG4gIGxvY2F0aW9uLnJlbG9hZCgpXG59XG5cbi8vIFVwZGF0ZSBwcm9qZWN0IGN1cnJlbnRQcm9qZWN0LnVwZGF0ZSB0aGlzLm5hbWVcblxuXG5leHBvcnQge1xuICBQcm9qZWN0LFxuICBzdG9yZVByb2plY3QsXG4gIGdldEFsbFByb2plY3RzLFxuICBmaW5kUHJvamVjdCxcbiAgc3luY1Byb2plY3QsXG4gIGdldEN1cnJlbnRQcm9qZWN0LFxuICBjcmVhdGVOZXdQcm9qZWN0LFxuICBlZGl0VGhpc1Byb2plY3QsXG4gIGRlbGV0ZVRoaXNQcm9qZWN0LFxuICB1cGRhdGVQcm9qZWN0U3RvcmFnZVxufVxuXG4iLCIvLyBUb2RvIGZhY3RvcnlcbmNvbnN0IFRvZG8gPSAodGl0bGUsIGR1ZSwgcHJpb3JpdHksIGNoZWNrZWQpID0+IHtcblxuICByZXR1cm4ge1xuICAgIHRpdGxlLFxuICAgIGR1ZSxcbiAgICBwcmlvcml0eSxcbiAgICBjaGVja2VkXG4gIH1cbn1cblxuLy8gQ3JlYXRlIG5ldyB0b2RvXG5jb25zdCBjcmVhdGVUb2RvID0gKGUpID0+IHtcbiAgbGV0IGZvcm1EYXRhID0gZS50YXJnZXQuZWxlbWVudHNcbiAgbGV0IHRpdGxlID0gZm9ybURhdGEudGl0bGUudmFsdWVcbiAgbGV0IGR1ZSA9IGZvcm1EYXRhLmR1ZS52YWx1ZVxuICBsZXQgcHJpb3JpdHkgPSBmb3JtRGF0YS5wcmlvcml0eS52YWx1ZVxuICBsZXQgY2hlY2tlZCA9IGZhbHNlXG4gIGxldCBuZXdUb2RvID0gVG9kbyh0aXRsZSwgZHVlLCBwcmlvcml0eSwgY2hlY2tlZClcblxuICByZXR1cm4gbmV3VG9kb1xufVxuXG4vLyBHZXQgdG9kbyBjb250ZW50XG5jb25zdCBnZXRUb2RvQ29udGVudCA9IChwcm9qZWN0KSA9PiB7XG4gIGxldCB0YWJsZVJvd3MgPSBbXVxuICBsZXQgYXJyYXkgPSBwcm9qZWN0LnRvZG9cblxuICBhcnJheS5mb3JFYWNoKCh0b2RvKSA9PiB7XG4gICAgbGV0IHJvd0h0bWwgPSBgXG4gICAgPHRyIGNsYXNzPScke3RvZG8uY2hlY2tlZCA/ICdjb21wbGV0ZScgOiB0b2RvLnByaW9yaXR5fSc+XG4gICAgICA8dGQ+JHt0b2RvLnRpdGxlfTwvdGQ+XG4gICAgICA8dGQ+JHt0b2RvLmR1ZX08L3RkPlxuICAgICAgPHRkPiR7dG9kby5wcmlvcml0eX08L3RkPlxuICAgICAgPHRkPlxuICAgICAgICA8YnV0dG9uIGNsYXNzPSdwcm9ncmVzcyc+XG4gICAgICAgICAgJHtcbiAgICAgICAgICAgIHRvZG8uY2hlY2tlZFxuICAgICAgICAgICAgICA/IFwiPHNwYW4gY2xhc3M9J21hdGVyaWFsLWljb25zJz50YXNrX2FsdDwvc3Bhbj5cIlxuICAgICAgICAgICAgICA6IFwiPHNwYW4gY2xhc3M9J21hdGVyaWFsLWljb25zJz5yZW1vdmVfY2lyY2xlX291dGxpbmU8L3NwYW4+XCJcbiAgICAgICAgICB9XG4gICAgICAgIDwvYnV0dG9uPlxuICAgICAgPC90ZD5cbiAgICAgIDx0ZD48YnV0dG9uIGNsYXNzPSdlZGl0LXRvZG8nPjxzcGFuIGNsYXNzPVwibWF0ZXJpYWwtaWNvbnNcIj56b29tX2luPC9zcGFuPjwvYnV0dG9uPjwvdGQ+XG4gICAgICA8dGQ+PGJ1dHRvbiBjbGFzcz0nZGVsZXRlLXRvZG8nPjxzcGFuIGNsYXNzPVwibWF0ZXJpYWwtaWNvbnNcIj5kZWxldGVfZm9yZXZlcjwvc3Bhbj48L2J1dHRvbj48L3RkPlxuICAgIDwvdHI+YFxuXG4gIHRhYmxlUm93cy5wdXNoKHJvd0h0bWwpXG4gIH0pXG5cbiAgcmV0dXJuIHRhYmxlUm93c1xufVxuXG5jb25zdCBzaG93VG9kb3MgPSAocHJvamVjdCkgPT4ge1xuICBsZXQgdG9kb0l0ZW1zID0gZ2V0VG9kb0NvbnRlbnQocHJvamVjdClcbiAgaWYgKHRvZG9JdGVtcykge1xuICAgIGxldCBsaXN0SHRtbCA9IHRvZG9JdGVtcy5tYXAoKHRhYmxlUm93KSA9PiB0YWJsZVJvdykuam9pbihcIlwiKVxuICAgIHJldHVybiBsaXN0SHRtbFxuICB9IGVsc2Uge1xuICAgIHJldHVybiBbXVxuICB9XG5cbn1cblxuZXhwb3J0IHtcbiAgVG9kbyxcbiAgY3JlYXRlVG9kbyxcbiAgc2hvd1RvZG9zXG59IiwiaW1wb3J0IHtQcm9qZWN0LCBzdG9yZVByb2plY3QsIGdldEFsbFByb2plY3RzLCBcbiAgICAgICAgZmluZFByb2plY3QsIHN5bmNQcm9qZWN0LCBjcmVhdGVOZXdQcm9qZWN0fSBmcm9tIFwiLi9wcm9qZWN0XCJcbmltcG9ydCB7c2hvd1RvZG9zfSBmcm9tIFwiLi90b2RvXCJcblxuY29uc3QgbW9kYWxTZWN0aW9ucyA9IGRvY3VtZW50LmdldEVsZW1lbnRzQnlDbGFzc05hbWUoXCJtb2RhbFwiKVxuY29uc3Qgc2lkZWJhciA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIucHJvamVjdFwiKVxuY29uc3QgdG9nZ2xlQnRuID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi50b2dnbGUtcHJvamVjdFwiKVxuY29uc3QgdG9nZ2xlSWNvbnMgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKFwiLnRvZ2dsZS1pY29uc1wiKVxuY29uc3QgYWRkUHJvamVjdEJ0biA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwiYWRkLXByb2plY3RcIilcbmNvbnN0IG5ld1Byb2plY3RNb2RhbCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIubmV3LXByb2plY3QtZm9ybS1tb2RhbFwiKSAgXG5jb25zdCBuZXdQcm9qZWN0Rm9ybSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIubmV3LXByb2plY3QtZm9ybVwiKVxuY29uc3QgY2FuY2VsQnRucyA9IGRvY3VtZW50LmdldEVsZW1lbnRzQnlDbGFzc05hbWUoXCJjYW5jZWxcIilcbmNvbnN0IHByb2plY3RMaXN0ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5wcm9qZWN0LWxpc3RcIilcbmNvbnN0IHByb2plY3RCb2R5ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5wcm9qZWN0LWJvZHlcIilcbmNvbnN0IHByb2plY3ROYW1lID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5wcm9qZWN0LW5hbWVcIilcbmNvbnN0IHRvZG9MaXN0ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi50b2RvLWxpc3RcIilcblxuLy8gU2hvdyBvciBoaWRlIHNpZGViYXJcbmxldCBjYW5Ub2dnbGVTaWRlQmFyID0gKCgpID0+IHtcbiAgdG9nZ2xlQnRuLm9uY2xpY2sgPSAoKSA9PiB7XG4gICAgc2lkZWJhci5jbGFzc0xpc3QudG9nZ2xlKFwiYWN0aXZlXCIpXG4gICAgdG9nZ2xlSWNvbnMuZm9yRWFjaCgoaWNvbikgPT4gaWNvbi5jbGFzc0xpc3QudG9nZ2xlKFwiaGlkZGVuXCIpKVxuICB9XG59KSgpXG5cbi8vIE9wZW4gbmV3IHByb2plY3QgZm9ybVxubGV0IGNhblRyaWdnZXJOZXdQcm9qZWN0Rm9ybSA9ICgoKSA9PiB7XG4gIGFkZFByb2plY3RCdG4ub25jbGljayA9ICgpID0+IHtcbiAgICBuZXdQcm9qZWN0TW9kYWwuY2xhc3NMaXN0LnRvZ2dsZShcImhpZGRlblwiKVxuICB9XG59KSgpXG5cbi8vIENyZWF0ZSBwcm9qZWN0XG5sZXQgY2FuQ3JlYXRlUHJvamVjdCA9ICgoKSA9PiB7XG4gIG5ld1Byb2plY3RGb3JtLmFkZEV2ZW50TGlzdGVuZXIoXCJzdWJtaXRcIiwgY3JlYXRlTmV3UHJvamVjdClcbn0pKClcblxuLy8gQ2FuY2VsIGZvcm1cbmxldCBjYW5DYW5jZWxGb3JtID0gKCgpID0+IHtcbiAgbGV0IGJ1dHRvbnNBcnJheSA9IEFycmF5LmZyb20oY2FuY2VsQnRucylcbiAgYnV0dG9uc0FycmF5LmZvckVhY2goKGJ1dHRvbikgPT4ge1xuICAgIGxldCBtb2RhbCA9IGJ1dHRvbi5jbG9zZXN0KFwic2VjdGlvblwiKVxuICAgIGJ1dHRvbi5vbmNsaWNrID0gKCkgPT4ge1xuICAgICAgbW9kYWwuY2xhc3NMaXN0LnRvZ2dsZShcImhpZGRlblwiKVxuICAgIH1cbiAgfSlcbn0pKClcblxuLy8gQ2FuY2VsIGZvcm0gYnkgY2xpY2tpbmcgb3V0c2lkZVxubGV0IGNhbkNsaWNrT3V0c2lkZSA9ICgoKSA9PiB7XG4gIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKGUpID0+IHtcbiAgICBsZXQgY2xhc3NlcyA9IGUudGFyZ2V0LmNsYXNzTmFtZS5zcGxpdChcIiBcIilcbiAgICBsZXQgaGFzTW9kYWwgPSBjbGFzc2VzLnNvbWUoKG9uZWNsYXNzKSA9PiBvbmVjbGFzcyA9PSBcIm1vZGFsXCIpXG4gICAgaWYgKGhhc01vZGFsKSB7XG4gICAgICBsZXQgbW9kYWxzID0gQXJyYXkuZnJvbShtb2RhbFNlY3Rpb25zKVxuICAgICAgbW9kYWxzLmZvckVhY2goKHNlY3Rpb24pID0+IHtcbiAgICAgICAgc2VjdGlvbi5jbGFzc0xpc3QuYWRkKFwiaGlkZGVuXCIpXG4gICAgICB9IClcbiAgICB9XG4gIH0pICBcbn0pKClcblxuLy8gU2hvdyBwcm9qZWN0c1xubGV0IGNhblNob3dQcm9qZWN0ID0gKCgpID0+IHtcbiAgbGV0IGFsbFByb2plY3RzID0gZ2V0QWxsUHJvamVjdHMoKVxuICBhbGxQcm9qZWN0cy5tYXAoKHByb2plY3QpID0+IHtcbiAgICBsZXQgbmV3TGluZSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJsaVwiKVxuICAgIG5ld0xpbmUuaW5uZXJIVE1MID0gcHJvamVjdC5uYW1lXG4gICAgbmV3TGluZS5jbGFzc0xpc3QuYWRkKFwibGlzdC1pdGVtXCIpXG4gICAgcHJvamVjdExpc3QuYXBwZW5kQ2hpbGQobmV3TGluZSlcbiAgfSlcbn0pKClcblxuLy8gU2hvdyB0b2RvXG5sZXQgY2FuU2hvd0NvbnRlbnQgPSAoKCkgPT4ge1xuICBsZXQgcHJvamVjdHMgPSBkb2N1bWVudC5nZXRFbGVtZW50c0J5Q2xhc3NOYW1lKFwibGlzdC1pdGVtXCIpXG4gIGxldCBwcm9qZWN0c0FycmF5ID0gQXJyYXkuZnJvbShwcm9qZWN0cylcbiAgcHJvamVjdHNBcnJheS5mb3JFYWNoKChsaXN0SXRlbSkgPT4geyAgICBcbiAgICBsaXN0SXRlbS5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwoKSA9PiB7XG4gICAgICBsZXQgcHJvamVjdCA9IGZpbmRQcm9qZWN0KGxpc3RJdGVtLnRleHRDb250ZW50KVxuICAgICAgLy8gU3luY2hyb25pemUgY3VycmVudCBwcm9qZWN0XG4gICAgICBzeW5jUHJvamVjdChwcm9qZWN0KVxuICAgICAgcHJvamVjdE5hbWUuaW5uZXJIVE1MID0gcHJvamVjdC5uYW1lXG4gICAgICB0b2RvTGlzdC5pbm5lckhUTUwgPSBzaG93VG9kb3MocHJvamVjdClcbiAgICAgIHByb2plY3RCb2R5LmNsYXNzTGlzdC5yZW1vdmUoXCJoaWRkZW5cIikgIFxuICAgIH0pXG4gIH0pXG59KSgpXG5cbiIsImltcG9ydCB7Z2V0QWxsUHJvamVjdHMsIGdldEN1cnJlbnRQcm9qZWN0LCBlZGl0VGhpc1Byb2plY3QsIFxuICAgICAgICBkZWxldGVUaGlzUHJvamVjdCwgc3luY1Byb2plY3QsIHVwZGF0ZVByb2plY3RTdG9yYWdlfSBmcm9tIFwiLi9wcm9qZWN0XCJcbmltcG9ydCB7Y3JlYXRlVG9kbywgc2hvd1RvZG9zfSBmcm9tIFwiLi90b2RvXCJcblxuY29uc3QgcHJvamVjdEJvZHkgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLnByb2plY3QtYm9keVwiKVxuY29uc3QgcHJvamVjdE5hbWUgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLnByb2plY3QtbmFtZVwiKVxuY29uc3QgZWRpdFByb2plY3RNb2RhbCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuZWRpdC1wcm9qZWN0LWZvcm0tbW9kYWxcIilcbmNvbnN0IGVkaXRQcm9qZWN0Rm9ybSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuZWRpdC1wcm9qZWN0LWZvcm1cIilcbmNvbnN0IGVkaXRQcm9qZWN0QnRuID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5lZGl0LXByb2plY3RcIilcbmNvbnN0IGRlbFByb2plY3RCdG4gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLmRlbGV0ZS1wcm9qZWN0XCIpXG5jb25zdCBuZXdUb2RvTW9kYWwgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLm5ldy10b2RvLWZvcm0tbW9kYWxcIilcbmNvbnN0IG5ld1Byb2plY3RGb3JtID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5uZXctdG9kby1mb3JtXCIpXG5jb25zdCBuZXdUb2RvQnRuID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5uZXctdG9kb1wiKVxuY29uc3QgdG9kb0xpc3QgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLnRvZG8tbGlzdFwiKVxuXG4vLyBIaWRlIGJvZHkgd2hlbiBubyBwcm9qZWN0c1xuY29uc3QgYXV0b0hpZGVCb2R5ID0gKCgpID0+IHtcbiAgbGV0IGFsbFByb2plY3RzID0gZ2V0QWxsUHJvamVjdHMoKVxuICBpZiAoYWxsUHJvamVjdHMubGVuZ3RoID09IDApIHtcbiAgICBwcm9qZWN0Qm9keS5jbGFzc0xpc3QuYWRkKFwiaGlkZGVuXCIpXG4gIH1cbn0pKClcblxuLy8gU2hvdyBsYXN0IGNoZWNrZWQgcHJvamVjdFxuY29uc3QgYXV0b1Nob3dCb2R5ID0gKCgpID0+IHtcbiAgbGV0IGN1cnJlbnRQcm9qZWN0ID0gZ2V0Q3VycmVudFByb2plY3QoKVxuICBpZiAoY3VycmVudFByb2plY3QpIHtcbiAgICBwcm9qZWN0TmFtZS5pbm5lckhUTUwgPSBjdXJyZW50UHJvamVjdC5uYW1lXG4gICAgcHJvamVjdEJvZHkuY2xhc3NMaXN0LnJlbW92ZShcImhpZGRlblwiKVxuICAgIHRvZG9MaXN0LmlubmVySFRNTCA9IHNob3dUb2RvcyhjdXJyZW50UHJvamVjdClcbiAgfSBcbn0pKClcblxuLy8gT3BlbiBlZGl0IHByb2plY3QgZm9ybVxuY29uc3QgY2FuVHJpZ2dlckVkaXRQcm9qZWN0Rm9ybSA9ICgoKSA9PntcbiAgZWRpdFByb2plY3RCdG4ub25jbGljayA9ICgpID0+IHtcbiAgICBlZGl0UHJvamVjdE1vZGFsLmNsYXNzTGlzdC50b2dnbGUoXCJoaWRkZW5cIilcbiAgfVxufSkoKVxuXG4vLyBFZGl0IHByb2plY3RcbmNvbnN0IGNhbkVkaXRQcm9qZWN0ID0gKCgpID0+IHtcbiAgZWRpdFByb2plY3RGb3JtLmFkZEV2ZW50TGlzdGVuZXIoXCJzdWJtaXRcIiwgZWRpdFRoaXNQcm9qZWN0KVxufSkoKVxuXG4vLyBEZWxldGUgcHJvamVjdFxuY29uc3QgY2FuRGVsZXRlUHJvamVjdCA9ICgoKSA9PiB7XG4gIGRlbFByb2plY3RCdG4uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIGRlbGV0ZVRoaXNQcm9qZWN0KVxufSkoKVxuXG4vLyBPcGVuIG5ldyB0b2RvIGZvcm1cbmNvbnN0IGNhblRyaWdnZXJOZXdUb2RvRm9ybSA9ICgoKSA9PiB7XG4gIG5ld1RvZG9CdG4ub25jbGljayA9ICgpID0+IHtcbiAgICBuZXdUb2RvTW9kYWwuY2xhc3NMaXN0LnRvZ2dsZShcImhpZGRlblwiKVxuICB9XG59KSgpXG5cbi8vIENyZWF0ZSBuZXcgdG9kb1xuY29uc3QgY2FuQ3JlYXRlVG9kbyA9ICgoKSA9PiB7XG4gIG5ld1Byb2plY3RGb3JtLmFkZEV2ZW50TGlzdGVuZXIoXCJzdWJtaXRcIiwoZSkgPT4ge1xuICAgIGxldCBuZXdUb2RvID0gY3JlYXRlVG9kbyhlKVxuICAgIGxldCBvbGRQcm9qZWN0ID0gZ2V0Q3VycmVudFByb2plY3QoKVxuICAgIGxldCBuZXdQcm9qZWN0ID0gZ2V0Q3VycmVudFByb2plY3QoKVxuICAgIG5ld1Byb2plY3QudG9kby5wdXNoKG5ld1RvZG8pXG4gICAgc3luY1Byb2plY3QobmV3UHJvamVjdClcbiAgICB1cGRhdGVQcm9qZWN0U3RvcmFnZShuZXdQcm9qZWN0LCBvbGRQcm9qZWN0KVxuICB9KVxufSkoKVxuIl0sInNvdXJjZVJvb3QiOiIifQ==