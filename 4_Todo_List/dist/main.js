(()=>{"use strict";const e=()=>{let e=localStorage.getItem("myProject");return e?JSON.parse(e):[]},t=(t,o)=>{let r,l=e();l.map(((e,c)=>{e.name==o.name&&t===o?(l.splice(c,1),r=JSON.stringify(l),localStorage.setItem("myProject",r)):e.name==o.name&&(l.splice(c,1,t),r=JSON.stringify(l),localStorage.setItem("myProject",r))}))},o=e=>{localStorage.setItem("currentProject",JSON.stringify(e))},r=()=>{let e=localStorage.getItem("currentProject");return e?JSON.parse(e):null},l=e=>{let t=(e=>{let t=[];return e.todo.forEach(((e,o)=>{let r=`\n    <tr class='${e.checked?"complete":e.priority}'>\n      <td>${e.title}</td>\n      <td>${e.due}</td>\n      <td>${e.priority}</td>\n      <td>\n        <button class='check-todo' data-index='${o}'>\n          ${e.checked?"<span class='material-icons'>task_alt</span>":"<span class='material-icons'>remove_circle_outline</span>"}\n        </button>\n      </td>\n      <td><button class='edit-todo' data-index='${o}'><span class="material-icons">description</span></button></td>\n      <td><button class='delete-todo' data-index='${o}'><span class="material-icons">delete_forever</span></button></td>\n    </tr>`;t.push(r)})),t})(e);return t?t.map((e=>e)).join(""):[]},c=e=>{let l=r(),c=r(),n=e.target.closest("button").dataset.index,a=c.todo[n];a.checked=!a.checked,o(c),t(c,l),location.reload()},n=document.getElementsByClassName("modal"),a=document.querySelector(".project"),d=document.querySelector(".toggle-project"),s=document.querySelectorAll(".toggle-icons"),i=document.getElementById("add-project"),m=document.querySelector(".new-project-form-modal"),u=document.querySelector(".new-project-form"),y=document.getElementsByClassName("cancel"),g=document.querySelector(".project-list"),p=document.querySelector(".project-body"),S=document.querySelector(".project-name"),h=document.querySelector(".todo-list"),f=document.getElementsByClassName("list-item");d.onclick=()=>{a.classList.toggle("active"),s.forEach((e=>e.classList.toggle("hidden")))},i.onclick=()=>{m.classList.toggle("hidden")},u.addEventListener("submit",(t=>{let r={name:t.target.elements.name.value,todo:[]};(t=>{let o=e();o.push(t),localStorage.setItem("myProject",JSON.stringify(o))})(r),o(r)})),Array.from(y).forEach((e=>{let t=e.closest("section");e.onclick=()=>{t.classList.toggle("hidden")}})),window.addEventListener("click",(e=>{e.target.className.split(" ").some((e=>"modal"==e))&&Array.from(n).forEach((e=>{e.classList.add("hidden")}))})),e().map((e=>{let t=document.createElement("li");t.innerHTML=e.name,t.classList.add("list-item"),g.appendChild(t)})),(()=>{let t=Array.from(f);t.forEach((t=>{t.addEventListener("click",(c=>{r(c);let n=(t=>e().find((e=>e.name==t)))(t.textContent);o(n),S.innerHTML=n.name,h.innerHTML=l(n),p.classList.remove("hidden"),location.reload()}))}));const r=e=>{t=Array.from(f),t.forEach((e=>{e.classList.remove("selected")})),e.target.classList.add("selected")}})();const L=document.querySelector(".project-body"),v=document.querySelector(".project-name"),E=document.querySelector(".edit-project-form-modal"),j=document.querySelector(".edit-project-form"),q=document.querySelector(".edit-project"),k=document.querySelector(".delete-project"),b=document.querySelector(".new-todo-form-modal"),N=document.querySelector(".new-todo-form"),C=document.querySelector(".new-todo"),I=document.querySelector(".todo-list"),$=(0==e().length&&L.classList.add("hidden"),(()=>{let e=r();e&&(v.innerHTML=e.name,L.classList.remove("hidden"),I.innerHTML=l(e))})(),q.onclick=()=>{E.classList.toggle("hidden")},j.addEventListener("submit",(e=>{let l=r(),c=r();c.name=e.target.elements.name.value,o(c),t(c,l)})),k.addEventListener("click",(()=>{if(!confirm("Delete this project?"))return;let e=r(),o=r();localStorage.removeItem("currentProject"),t(o,e),location.reload()})),C.onclick=()=>{b.classList.toggle("hidden")},N.addEventListener("submit",(e=>{let l=(e=>{let t=e.target.elements;return{title:t.title.value,due:t.due.value,priority:t.priority.value,checked:!1}})(e),c=r(),n=r();n.todo.push(l),o(n),t(n,c)})),document.getElementsByClassName("check-todo")),w=document.getElementsByClassName("edit-todo"),A=document.querySelector(".edit-todo-form-modal"),B=document.querySelector(".edit-todo-form");document.getElementsByClassName("delete-todo"),Array.from($).forEach((e=>{e.addEventListener("click",c)})),Array.from(w).forEach((e=>{e.addEventListener("click",(e=>{A.classList.toggle("hidden");let l=e.target.closest("button").dataset.index;((e,t)=>{let o=r().todo[t],l=o.title,c=o.due,n=o.priority;e.title.value=l,e.due.value=c,e.priority.value=n})(B,l),B.addEventListener("submit",(e=>{((e,l)=>{let c=r(),n=r(),a=n.todo[l],d=e.target.elements;a.title=d.title.value,a.due=d.due.value,a.priority=d.priority.value,o(n),t(n,c)})(e,l)}))}))}))})();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly90b2RvX2xpc3QvLi9zcmMvcHJvamVjdC5qcyIsIndlYnBhY2s6Ly90b2RvX2xpc3QvLi9zcmMvdG9kby5qcyIsIndlYnBhY2s6Ly90b2RvX2xpc3QvLi9zcmMvc2lkZWJhci5qcyIsIndlYnBhY2s6Ly90b2RvX2xpc3QvLi9zcmMvYm9keS5qcyIsIndlYnBhY2s6Ly90b2RvX2xpc3QvLi9zcmMvdGFibGUuanMiXSwibmFtZXMiOlsiZ2V0QWxsUHJvamVjdHMiLCJwcm9qZWN0TFMiLCJsb2NhbFN0b3JhZ2UiLCJnZXRJdGVtIiwiSlNPTiIsInBhcnNlIiwidXBkYXRlUHJvamVjdFN0b3JhZ2UiLCJuZXdQcm9qZWN0Iiwib2xkUHJvamVjdCIsInRlbXBTdG9yYWdlIiwicHJvamVjdFN0b3JhZ2UiLCJtYXAiLCJwcm9qZWN0IiwiaW5kZXgiLCJuYW1lIiwic3BsaWNlIiwic3RyaW5naWZ5Iiwic2V0SXRlbSIsInN5bmNQcm9qZWN0IiwiZ2V0Q3VycmVudFByb2plY3QiLCJjdXJyZW50UHJvamVjdExTIiwic2hvd1RvZG9zIiwidG9kb0l0ZW1zIiwidGFibGVSb3dzIiwidG9kbyIsImZvckVhY2giLCJyb3dIdG1sIiwiY2hlY2tlZCIsInByaW9yaXR5IiwidGl0bGUiLCJkdWUiLCJwdXNoIiwiZ2V0VG9kb0NvbnRlbnQiLCJ0YWJsZVJvdyIsImpvaW4iLCJjaGVja1RvZG8iLCJlIiwidG9kb0luZGV4IiwidGFyZ2V0IiwiY2xvc2VzdCIsImRhdGFzZXQiLCJhbHRlcmVkVG9kbyIsImxvY2F0aW9uIiwicmVsb2FkIiwibW9kYWxTZWN0aW9ucyIsImRvY3VtZW50IiwiZ2V0RWxlbWVudHNCeUNsYXNzTmFtZSIsInNpZGViYXIiLCJxdWVyeVNlbGVjdG9yIiwidG9nZ2xlQnRuIiwidG9nZ2xlSWNvbnMiLCJxdWVyeVNlbGVjdG9yQWxsIiwiYWRkUHJvamVjdEJ0biIsImdldEVsZW1lbnRCeUlkIiwibmV3UHJvamVjdE1vZGFsIiwibmV3UHJvamVjdEZvcm0iLCJjYW5jZWxCdG5zIiwicHJvamVjdExpc3QiLCJwcm9qZWN0Qm9keSIsInByb2plY3ROYW1lIiwidG9kb0xpc3QiLCJwcm9qZWN0c0xpc3QiLCJvbmNsaWNrIiwiY2xhc3NMaXN0IiwidG9nZ2xlIiwiaWNvbiIsImFkZEV2ZW50TGlzdGVuZXIiLCJlbGVtZW50cyIsInZhbHVlIiwiYWxsUHJvamVjdHMiLCJzdG9yZVByb2plY3QiLCJBcnJheSIsImZyb20iLCJidXR0b24iLCJtb2RhbCIsIndpbmRvdyIsImNsYXNzTmFtZSIsInNwbGl0Iiwic29tZSIsIm9uZWNsYXNzIiwic2VjdGlvbiIsImFkZCIsIm5ld0xpbmUiLCJjcmVhdGVFbGVtZW50IiwiaW5uZXJIVE1MIiwiYXBwZW5kQ2hpbGQiLCJwcm9qZWN0c0FycmF5IiwibGlzdEl0ZW0iLCJzZWxlY3RPbmVQcm9qZWN0IiwiZmluZCIsInN0b3JlZFByb2plY3QiLCJmaW5kUHJvamVjdCIsInRleHRDb250ZW50IiwicmVtb3ZlIiwiZWRpdFByb2plY3RNb2RhbCIsImVkaXRQcm9qZWN0Rm9ybSIsImVkaXRQcm9qZWN0QnRuIiwiZGVsUHJvamVjdEJ0biIsIm5ld1RvZG9Nb2RhbCIsIm5ld1RvZG9CdG4iLCJjaGVja1RvZG9CdG5zIiwibGVuZ3RoIiwiY3VycmVudFByb2plY3QiLCJjb25maXJtIiwicmVtb3ZlSXRlbSIsIm5ld1RvZG8iLCJmb3JtRGF0YSIsImNyZWF0ZVRvZG8iLCJlZGl0VG9kb0J0bnMiLCJlZGl0VG9kb01vZGFsIiwiZWRpdFRvZG9Gb3JtIiwiZm9ybSIsIm9sZFRvZG8iLCJvbGRUaXRsZSIsIm9sZER1ZSIsIm9sZFByaW9yaXR5IiwiZmlsbFRvZG9jb250ZW50IiwiZm9ybVZhbHVlIiwiZWRpdFRvZG8iXSwibWFwcGluZ3MiOiJtQkFDQSxNQWdCTUEsRUFBaUIsS0FDckIsSUFBSUMsRUFBWUMsYUFBYUMsUUFBUSxhQUNyQyxPQUFHRixFQUNpQkcsS0FBS0MsTUFBTUosR0FHdEIsSUFZTEssRUFBdUIsQ0FBQ0MsRUFB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RCxFQUFlakUsU0FBU0csY0FBYyxtQkFDeEJILFNBQVNDLHVCQUF1QixlQUlwQ3lCLE1BQU1DLEtBQUs0QixHQUNqQjNFLFNBQVNnRCxJQUNmQSxFQUFPUCxpQkFBaUIsUUFBUy9CLE1BTXJCb0MsTUFBTUMsS0FBS29DLEdBQ2pCbkYsU0FBU2dELElBQ2ZBLEVBQU9QLGlCQUFpQixTQUFVOUIsSUFDaEN5RSxFQUFjOUMsVUFBVUMsT0FBTyxVQUMvQixJQUFJM0IsRUFBWUQsRUFBRUUsT0FBT0MsUUFBUSxVQUFVQyxRQUFRM0IsTUgyRGpDLEVBQUNrRyxFQUFNMUUsS0FDN0IsSUFDSTJFLEVBRGE3RixJQUNRSyxLQUFLYSxHQUMxQjRFLEVBQVdELEVBQVFuRixNQUNuQnFGLEVBQVNGLEVBQVFsRixJQUNqQnFGLEVBQWNILEVBQVFwRixTQUUxQm1GLEVBQUtsRixNQUFNdUMsTUFBUTZDLEVBQ25CRixFQUFLakYsSUFBSXNDLE1BQVE4QyxFQUNqQkgsRUFBS25GLFNBQVN3QyxNQUFRK0MsR0duRWxCQyxDQUFnQk4sRUFBY3pFLEdBQzlCeUUsRUFBYTVDLGlCQUFpQixVQUFXOUIsSUhzRTlCLEVBQUNBLEVBQUdDLEtBQ25CLElBQUk3QixFQUFhVyxJQUNiWixFQUFhWSxJQUNic0IsRUFBY2xDLEVBQVdpQixLQUFLYSxHQUM5QmdGLEVBQVlqRixFQUFFRSxPQUFPNkIsU0FFekIxQixFQUFZWixNQUFRd0YsRUFBVXhGLE1BQU11QyxNQUNwQzNCLEVBQVlYLElBQU11RixFQUFVdkYsSUFBSXNDLE1BQ2hDM0IsRUFBWWIsU0FBV3lGLEVBQVV6RixTQUFTd0MsTUFFMUNsRCxFQUFZWCxHQUNaRCxFQUFxQkMsRUFBWUMsSUdoRjNCOEcsQ0FBU2xGLEVBQUdDLGEiLCJmaWxlIjoibWFpbi5qcyIsInNvdXJjZXNDb250ZW50IjpbIi8vIFByb2plY3QgZmFjdG9yeVxuY29uc3QgUHJvamVjdCA9IChuYW1lKSA9PiB7XG4gIGxldCB0b2RvID0gW11cbiAgcmV0dXJuIHtcbiAgICBuYW1lLFxuICAgIHRvZG9cbiAgfVxufVxuXG4vLyBTdG9yZSBuZXcgcHJvamVjdFxuY29uc3Qgc3RvcmVQcm9qZWN0ID0gKG5ld1Byb2plY3QpID0+IHtcbiAgbGV0IGFsbFByb2plY3RzID0gZ2V0QWxsUHJvamVjdHMoKVxuICBhbGxQcm9qZWN0cy5wdXNoKG5ld1Byb2plY3QpXG4gIGxvY2FsU3RvcmFnZS5zZXRJdGVtKFwibXlQcm9qZWN0XCIsIEpTT04uc3RyaW5naWZ5KGFsbFByb2plY3RzKSlcbn1cblxuLy8gR2V0IHN0b3JlZCBwcm9qZWN0c1xuY29uc3QgZ2V0QWxsUHJvamVjdHMgPSAoKSA9PiB7XG4gIGxldCBwcm9qZWN0TFMgPSBsb2NhbFN0b3JhZ2UuZ2V0SXRlbShcIm15UHJvamVjdFwiKVxuICBpZihwcm9qZWN0TFMpIHtcbiAgICBsZXQgYWxsUHJvamVjdHMgPSBKU09OLnBhcnNlKHByb2plY3RMUylcbiAgICByZXR1cm4gYWxsUHJvamVjdHNcbiAgfSBlbHNlIHtcbiAgICByZXR1cm4gW11cbiAgfVxufVxuXG4vLyBGaW5kIGEgcHJvamVjdFxuY29uc3QgZmluZFByb2plY3QgPSAocHJvamVjdE5hbWUpID0+IHtcbiAgbGV0IGFsbFByb2plY3RzID0gZ2V0QWxsUHJvamVjdHMoKVxuICBsZXQgdGhhdFByb2plY3QgPSBhbGxQcm9qZWN0cy5maW5kKHN0b3JlZFByb2plY3QgPT4gc3RvcmVkUHJvamVjdC5uYW1lID09IHByb2plY3ROYW1lKVxuICByZXR1cm4gdGhhdFByb2plY3Rcbn1cblxuLy8gVXBkYXRlIHByb2plY3Qgc3RvcmFnZVxuY29uc3QgdXBkYXRlUHJvamVjdFN0b3JhZ2UgPSAobmV3UHJvamVjdCwgb2xkUHJvamVjdCkgPT4ge1xuICBsZXQgcHJvamVjdFN0b3JhZ2UgPSBnZXRBbGxQcm9qZWN0cygpXG4gIGxldCB0ZW1wU3RvcmFnZVxuXG4gIHByb2plY3RTdG9yYWdlLm1hcCgocHJvamVjdCwgaW5kZXgpID0+IHtcbiAgICBpZiAocHJvamVjdC5uYW1lID09IG9sZFByb2plY3QubmFtZSAmJiBuZXdQcm9qZWN0ID09PSBvbGRQcm9qZWN0KSB7XG4gICAgICAvLyBEZWxldGVcbiAgICAgIHByb2plY3RTdG9yYWdlLnNwbGljZShpbmRleCwgMSlcbiAgICAgIHRlbXBTdG9yYWdlID0gSlNPTi5zdHJpbmdpZnkocHJvamVjdFN0b3JhZ2UpXG4gICAgICBsb2NhbFN0b3JhZ2Uuc2V0SXRlbShcIm15UHJvamVjdFwiLCB0ZW1wU3RvcmFnZSlcbiAgICB9IGVsc2UgaWYgKHByb2plY3QubmFtZSA9PSBvbGRQcm9qZWN0Lm5hbWUpIHtcbiAgICAgIC8vIEFkZFxuICAgICAgcHJvamVjdFN0b3JhZ2Uuc3BsaWNlKGluZGV4LCAxLCBuZXdQcm9qZWN0KVxuICAgICAgdGVtcFN0b3JhZ2UgPSBKU09OLnN0cmluZ2lmeShwcm9qZWN0U3RvcmFnZSlcbiAgICAgIGxvY2FsU3RvcmFnZS5zZXRJdGVtKFwibXlQcm9qZWN0XCIsIHRlbXBTdG9yYWdlKVxuICAgIH0gXG4gIH0pXG59XG5cbi8vIFN5bmNocm9uaXplIGN1cnJlbnQgcHJvamVjdFxuY29uc3Qgc3luY1Byb2plY3QgPSAocHJvamVjdCkgPT4ge1xuICBsb2NhbFN0b3JhZ2Uuc2V0SXRlbShcImN1cnJlbnRQcm9qZWN0XCIsSlNPTi5zdHJpbmdpZnkocHJvamVjdCkpXG59XG5cbi8vIEdldCBjdXJyZW50IHByb2plY3RcbmNvbnN0IGdldEN1cnJlbnRQcm9qZWN0ID0gKCkgPT4ge1xuICBsZXQgY3VycmVudFByb2plY3RMUyA9IGxvY2FsU3RvcmFnZS5nZXRJdGVtKFwiY3VycmVudFByb2plY3RcIilcbiAgaWYgKGN1cnJlbnRQcm9qZWN0TFMpIHtcbiAgICBsZXQgY3VycmVudFByb2plY3QgPSBKU09OLnBhcnNlKGN1cnJlbnRQcm9qZWN0TFMpXG4gICAgcmV0dXJuIGN1cnJlbnRQcm9qZWN0XG4gIH0gZWxzZSB7XG4gICAgcmV0dXJuIG51bGxcbiAgfVxufVxuXG4vLyBDcmVhdGUgbmV3IHByb2plY3RcbmNvbnN0IGNyZWF0ZU5ld1Byb2plY3QgPSAoZSkgPT4ge1xuICBsZXQgcHJvamVjdE5hbWUgPSBlLnRhcmdldC5lbGVtZW50cy5uYW1lLnZhbHVlXG4gIGxldCBuZXdQcm9qZWN0ID0gUHJvamVjdChwcm9qZWN0TmFtZSlcbiAgc3RvcmVQcm9qZWN0KG5ld1Byb2plY3QpICBcbiAgc3luY1Byb2plY3QobmV3UHJvamVjdClcbn1cblxuLy8gRWRpdCBwcm9qZWN0IG5hbWVcbmNvbnN0IGVkaXRUaGlzUHJvamVjdCA9IChlKSA9PiB7XG4gIGxldCBvbGRQcm9qZWN0ID0gZ2V0Q3VycmVudFByb2plY3QoKVxuICBsZXQgbmV3UHJvamVjdCA9IGdldEN1cnJlbnRQcm9qZWN0KClcbiAgbmV3UHJvamVjdC5uYW1lID0gZS50YXJnZXQuZWxlbWVudHMubmFtZS52YWx1ZVxuICBzeW5jUHJvamVjdChuZXdQcm9qZWN0KVxuICB1cGRhdGVQcm9qZWN0U3RvcmFnZShuZXdQcm9qZWN0LCBvbGRQcm9qZWN0KVxufVxuXG4vLyBEZWxldGUgcHJvamVjdFxuY29uc3QgZGVsZXRlVGhpc1Byb2plY3QgPSAoKSA9PiB7XG4gIGxldCBjb25maXJtYXRpb24gPSBjb25maXJtKFwiRGVsZXRlIHRoaXMgcHJvamVjdD9cIilcbiAgaWYgKCFjb25maXJtYXRpb24pIHJldHVyblxuXG4gIGxldCBvbGRQcm9qZWN0ID0gZ2V0Q3VycmVudFByb2plY3QoKVxuICBsZXQgbmV3UHJvamVjdCA9IGdldEN1cnJlbnRQcm9qZWN0KClcbiAgbG9jYWxTdG9yYWdlLnJlbW92ZUl0ZW0oXCJjdXJyZW50UHJvamVjdFwiKVxuICB1cGRhdGVQcm9qZWN0U3RvcmFnZShuZXdQcm9qZWN0LCBvbGRQcm9qZWN0KVxuICBsb2NhdGlvbi5yZWxvYWQoKVxufVxuXG4vLyBVcGRhdGUgcHJvamVjdCBjdXJyZW50UHJvamVjdC51cGRhdGUgdGhpcy5uYW1lXG5cblxuZXhwb3J0IHtcbiAgUHJvamVjdCxcbiAgc3RvcmVQcm9qZWN0LFxuICBnZXRBbGxQcm9qZWN0cyxcbiAgZmluZFByb2plY3QsXG4gIHN5bmNQcm9qZWN0LFxuICBnZXRDdXJyZW50UHJvamVjdCxcbiAgY3JlYXRlTmV3UHJvamVjdCxcbiAgZWRpdFRoaXNQcm9qZWN0LFxuICBkZWxldGVUaGlzUHJvamVjdCxcbiAgdXBkYXRlUHJvamVjdFN0b3JhZ2Vcbn1cblxuIiwiaW1wb3J0IHtnZXRBbGxQcm9qZWN0cywgdXBkYXRlUHJvamVjdFN0b3JhZ2UsIHN5bmNQcm9qZWN0LFxuICAgICAgICBnZXRDdXJyZW50UHJvamVjdH0gZnJvbSBcIi4vcHJvamVjdFwiXG5cbi8vIFRvZG8gZmFjdG9yeVxuY29uc3QgVG9kbyA9ICh0aXRsZSwgZHVlLCBwcmlvcml0eSwgY2hlY2tlZCkgPT4ge1xuXG4gIHJldHVybiB7XG4gICAgdGl0bGUsXG4gICAgZHVlLFxuICAgIHByaW9yaXR5LFxuICAgIGNoZWNrZWRcbiAgfVxufVxuXG4vLyBDcmVhdGUgbmV3IHRvZG9cbmNvbnN0IGNyZWF0ZVRvZG8gPSAoZSkgPT4ge1xuICBsZXQgZm9ybURhdGEgPSBlLnRhcmdldC5lbGVtZW50c1xuICBsZXQgdGl0bGUgPSBmb3JtRGF0YS50aXRsZS52YWx1ZVxuICBsZXQgZHVlID0gZm9ybURhdGEuZHVlLnZhbHVlXG4gIGxldCBwcmlvcml0eSA9IGZvcm1EYXRhLnByaW9yaXR5LnZhbHVlXG4gIGxldCBjaGVja2VkID0gZmFsc2VcbiAgbGV0IG5ld1RvZG8gPSBUb2RvKHRpdGxlLCBkdWUsIHByaW9yaXR5LCBjaGVja2VkKVxuXG4gIHJldHVybiBuZXdUb2RvXG59XG5cbi8vIEdldCB0b2RvIGNvbnRlbnRcbmNvbnN0IGdldFRvZG9Db250ZW50ID0gKHByb2plY3QpID0+IHtcbiAgbGV0IHRhYmxlUm93cyA9IFtdXG4gIGxldCBhcnJheSA9IHByb2plY3QudG9kb1xuXG4gIGFycmF5LmZvckVhY2goKHRvZG8sIGluZGV4KSA9PiB7XG4gICAgbGV0IHJvd0h0bWwgPSBgXG4gICAgPHRyIGNsYXNzPScke3RvZG8uY2hlY2tlZCA/ICdjb21wbGV0ZScgOiB0b2RvLnByaW9yaXR5fSc+XG4gICAgICA8dGQ+JHt0b2RvLnRpdGxlfTwvdGQ+XG4gICAgICA8dGQ+JHt0b2RvLmR1ZX08L3RkPlxuICAgICAgPHRkPiR7dG9kby5wcmlvcml0eX08L3RkPlxuICAgICAgPHRkPlxuICAgICAgICA8YnV0dG9uIGNsYXNzPSdjaGVjay10b2RvJyBkYXRhLWluZGV4PScke2luZGV4fSc+XG4gICAgICAgICAgJHtcbiAgICAgICAgICAgIHRvZG8uY2hlY2tlZFxuICAgICAgICAgICAgICA/IFwiPHNwYW4gY2xhc3M9J21hdGVyaWFsLWljb25zJz50YXNrX2FsdDwvc3Bhbj5cIlxuICAgICAgICAgICAgICA6IFwiPHNwYW4gY2xhc3M9J21hdGVyaWFsLWljb25zJz5yZW1vdmVfY2lyY2xlX291dGxpbmU8L3NwYW4+XCJcbiAgICAgICAgICB9XG4gICAgICAgIDwvYnV0dG9uPlxuICAgICAgPC90ZD5cbiAgICAgIDx0ZD48YnV0dG9uIGNsYXNzPSdlZGl0LXRvZG8nIGRhdGEtaW5kZXg9JyR7aW5kZXh9Jz48c3BhbiBjbGFzcz1cIm1hdGVyaWFsLWljb25zXCI+ZGVzY3JpcHRpb248L3NwYW4+PC9idXR0b24+PC90ZD5cbiAgICAgIDx0ZD48YnV0dG9uIGNsYXNzPSdkZWxldGUtdG9kbycgZGF0YS1pbmRleD0nJHtpbmRleH0nPjxzcGFuIGNsYXNzPVwibWF0ZXJpYWwtaWNvbnNcIj5kZWxldGVfZm9yZXZlcjwvc3Bhbj48L2J1dHRvbj48L3RkPlxuICAgIDwvdHI+YFxuXG4gIHRhYmxlUm93cy5wdXNoKHJvd0h0bWwpXG4gIH0pXG5cbiAgcmV0dXJuIHRhYmxlUm93c1xufVxuXG4vLyBTaG93IHRvZG9zXG5jb25zdCBzaG93VG9kb3MgPSAocHJvamVjdCkgPT4ge1xuICBsZXQgdG9kb0l0ZW1zID0gZ2V0VG9kb0NvbnRlbnQocHJvamVjdClcbiAgaWYgKHRvZG9JdGVtcykge1xuICAgIGxldCBsaXN0SHRtbCA9IHRvZG9JdGVtcy5tYXAoKHRhYmxlUm93KSA9PiB0YWJsZVJvdykuam9pbihcIlwiKVxuICAgIHJldHVybiBsaXN0SHRtbFxuICB9IGVsc2Uge1xuICAgIHJldHVybiBbXVxuICB9XG59XG5cbi8vIENoZWNrIG9yIHVuY2hlY2sgdG9kb1xuY29uc3QgY2hlY2tUb2RvID0gKGUpID0+IHtcbiAgbGV0IG9sZFByb2plY3QgPSBnZXRDdXJyZW50UHJvamVjdCgpXG4gIGxldCBuZXdQcm9qZWN0ID0gZ2V0Q3VycmVudFByb2plY3QoKVxuICBsZXQgdG9kb0luZGV4ID0gZS50YXJnZXQuY2xvc2VzdChcImJ1dHRvblwiKS5kYXRhc2V0LmluZGV4XG4gIGxldCBhbHRlcmVkVG9kbyA9IG5ld1Byb2plY3QudG9kb1t0b2RvSW5kZXhdXG4gIFxuICBhbHRlcmVkVG9kby5jaGVja2VkID0gIShhbHRlcmVkVG9kby5jaGVja2VkKVxuICBzeW5jUHJvamVjdChuZXdQcm9qZWN0KVxuICB1cGRhdGVQcm9qZWN0U3RvcmFnZShuZXdQcm9qZWN0LCBvbGRQcm9qZWN0KVxuICAvLyBVcGRhdGUgaW50ZXJmYWNlXG4gIGxvY2F0aW9uLnJlbG9hZCgpXG59XG5cbi8vIEF1dG9maWxsIG9sZCB0b2RvIGNvbnRlbnRcbmNvbnN0IGZpbGxUb2RvY29udGVudCA9IChmb3JtLCB0b2RvSW5kZXgpID0+IHtcbiAgbGV0IG9sZFByb2plY3QgPSBnZXRDdXJyZW50UHJvamVjdCgpXG4gIGxldCBvbGRUb2RvID0gb2xkUHJvamVjdC50b2RvW3RvZG9JbmRleF1cbiAgbGV0IG9sZFRpdGxlID0gb2xkVG9kby50aXRsZVxuICBsZXQgb2xkRHVlID0gb2xkVG9kby5kdWVcbiAgbGV0IG9sZFByaW9yaXR5ID0gb2xkVG9kby5wcmlvcml0eVxuXG4gIGZvcm0udGl0bGUudmFsdWUgPSBvbGRUaXRsZVxuICBmb3JtLmR1ZS52YWx1ZSA9IG9sZER1ZVxuICBmb3JtLnByaW9yaXR5LnZhbHVlID0gb2xkUHJpb3JpdHlcbn1cblxuLy8gRWRpdCB0b2RvIGNvbnRlbnRcbmNvbnN0IGVkaXRUb2RvID0gKGUsIHRvZG9JbmRleCkgPT4ge1xuICBsZXQgb2xkUHJvamVjdCA9IGdldEN1cnJlbnRQcm9qZWN0KClcbiAgbGV0IG5ld1Byb2plY3QgPSBnZXRDdXJyZW50UHJvamVjdCgpXG4gIGxldCBhbHRlcmVkVG9kbyA9IG5ld1Byb2plY3QudG9kb1t0b2RvSW5kZXhdXG4gIGxldCBmb3JtVmFsdWUgPSBlLnRhcmdldC5lbGVtZW50c1xuXG4gIGFsdGVyZWRUb2RvLnRpdGxlID0gZm9ybVZhbHVlLnRpdGxlLnZhbHVlXG4gIGFsdGVyZWRUb2RvLmR1ZSA9IGZvcm1WYWx1ZS5kdWUudmFsdWVcbiAgYWx0ZXJlZFRvZG8ucHJpb3JpdHkgPSBmb3JtVmFsdWUucHJpb3JpdHkudmFsdWVcblxuICBzeW5jUHJvamVjdChuZXdQcm9qZWN0KVxuICB1cGRhdGVQcm9qZWN0U3RvcmFnZShuZXdQcm9qZWN0LCBvbGRQcm9qZWN0KVxufVxuXG5leHBvcnQge1xuICBUb2RvLFxuICBjcmVhdGVUb2RvLFxuICBzaG93VG9kb3MsXG4gIGNoZWNrVG9kbyxcbiAgZmlsbFRvZG9jb250ZW50LFxuICBlZGl0VG9kb1xufSIsImltcG9ydCB7UHJvamVjdCwgc3RvcmVQcm9qZWN0LCBnZXRBbGxQcm9qZWN0cywgXG4gICAgICAgIGZpbmRQcm9qZWN0LCBzeW5jUHJvamVjdCwgY3JlYXRlTmV3UHJvamVjdH0gZnJvbSBcIi4vcHJvamVjdFwiXG5pbXBvcnQge3Nob3dUb2Rvc30gZnJvbSBcIi4vdG9kb1wiXG5cbmNvbnN0IG1vZGFsU2VjdGlvbnMgPSBkb2N1bWVudC5nZXRFbGVtZW50c0J5Q2xhc3NOYW1lKFwibW9kYWxcIilcbmNvbnN0IHNpZGViYXIgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLnByb2plY3RcIilcbmNvbnN0IHRvZ2dsZUJ0biA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIudG9nZ2xlLXByb2plY3RcIilcbmNvbnN0IHRvZ2dsZUljb25zID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbChcIi50b2dnbGUtaWNvbnNcIilcbmNvbnN0IGFkZFByb2plY3RCdG4gPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcImFkZC1wcm9qZWN0XCIpXG5jb25zdCBuZXdQcm9qZWN0TW9kYWwgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLm5ldy1wcm9qZWN0LWZvcm0tbW9kYWxcIikgIFxuY29uc3QgbmV3UHJvamVjdEZvcm0gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLm5ldy1wcm9qZWN0LWZvcm1cIilcbmNvbnN0IGNhbmNlbEJ0bnMgPSBkb2N1bWVudC5nZXRFbGVtZW50c0J5Q2xhc3NOYW1lKFwiY2FuY2VsXCIpXG5jb25zdCBwcm9qZWN0TGlzdCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIucHJvamVjdC1saXN0XCIpXG5jb25zdCBwcm9qZWN0Qm9keSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIucHJvamVjdC1ib2R5XCIpXG5jb25zdCBwcm9qZWN0TmFtZSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIucHJvamVjdC1uYW1lXCIpXG5jb25zdCB0b2RvTGlzdCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIudG9kby1saXN0XCIpXG5jb25zdCBwcm9qZWN0c0xpc3QgPSBkb2N1bWVudC5nZXRFbGVtZW50c0J5Q2xhc3NOYW1lKFwibGlzdC1pdGVtXCIpXG5cbi8vIFNob3cgb3IgaGlkZSBzaWRlYmFyXG5sZXQgY2FuVG9nZ2xlU2lkZUJhciA9ICgoKSA9PiB7XG4gIHRvZ2dsZUJ0bi5vbmNsaWNrID0gKCkgPT4ge1xuICAgIHNpZGViYXIuY2xhc3NMaXN0LnRvZ2dsZShcImFjdGl2ZVwiKVxuICAgIHRvZ2dsZUljb25zLmZvckVhY2goKGljb24pID0+IGljb24uY2xhc3NMaXN0LnRvZ2dsZShcImhpZGRlblwiKSlcbiAgfVxufSkoKVxuXG4vLyBPcGVuIG5ldyBwcm9qZWN0IGZvcm1cbmxldCBjYW5UcmlnZ2VyTmV3UHJvamVjdEZvcm0gPSAoKCkgPT4ge1xuICBhZGRQcm9qZWN0QnRuLm9uY2xpY2sgPSAoKSA9PiB7XG4gICAgbmV3UHJvamVjdE1vZGFsLmNsYXNzTGlzdC50b2dnbGUoXCJoaWRkZW5cIilcbiAgfVxufSkoKVxuXG4vLyBDcmVhdGUgcHJvamVjdFxubGV0IGNhbkNyZWF0ZVByb2plY3QgPSAoKCkgPT4ge1xuICBuZXdQcm9qZWN0Rm9ybS5hZGRFdmVudExpc3RlbmVyKFwic3VibWl0XCIsIGNyZWF0ZU5ld1Byb2plY3QpXG59KSgpXG5cbi8vIENhbmNlbCBmb3JtXG5sZXQgY2FuQ2FuY2VsRm9ybSA9ICgoKSA9PiB7XG4gIGxldCBidXR0b25zQXJyYXkgPSBBcnJheS5mcm9tKGNhbmNlbEJ0bnMpXG4gIGJ1dHRvbnNBcnJheS5mb3JFYWNoKChidXR0b24pID0+IHtcbiAgICBsZXQgbW9kYWwgPSBidXR0b24uY2xvc2VzdChcInNlY3Rpb25cIilcbiAgICBidXR0b24ub25jbGljayA9ICgpID0+IHtcbiAgICAgIG1vZGFsLmNsYXNzTGlzdC50b2dnbGUoXCJoaWRkZW5cIilcbiAgICB9XG4gIH0pXG59KSgpXG5cbi8vIENhbmNlbCBmb3JtIGJ5IGNsaWNraW5nIG91dHNpZGVcbmxldCBjYW5DbGlja091dHNpZGUgPSAoKCkgPT4ge1xuICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIChlKSA9PiB7XG4gICAgbGV0IGNsYXNzZXMgPSBlLnRhcmdldC5jbGFzc05hbWUuc3BsaXQoXCIgXCIpXG4gICAgbGV0IGhhc01vZGFsID0gY2xhc3Nlcy5zb21lKChvbmVjbGFzcykgPT4gb25lY2xhc3MgPT0gXCJtb2RhbFwiKVxuICAgIGlmIChoYXNNb2RhbCkge1xuICAgICAgbGV0IG1vZGFscyA9IEFycmF5LmZyb20obW9kYWxTZWN0aW9ucylcbiAgICAgIG1vZGFscy5mb3JFYWNoKChzZWN0aW9uKSA9PiB7XG4gICAgICAgIHNlY3Rpb24uY2xhc3NMaXN0LmFkZChcImhpZGRlblwiKVxuICAgICAgfSApXG4gICAgfVxuICB9KSAgXG59KSgpXG5cbi8vIFNob3cgcHJvamVjdHNcbmxldCBjYW5TaG93UHJvamVjdCA9ICgoKSA9PiB7XG4gIGxldCBhbGxQcm9qZWN0cyA9IGdldEFsbFByb2plY3RzKClcbiAgYWxsUHJvamVjdHMubWFwKChwcm9qZWN0KSA9PiB7XG4gICAgbGV0IG5ld0xpbmUgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwibGlcIilcbiAgICBuZXdMaW5lLmlubmVySFRNTCA9IHByb2plY3QubmFtZVxuICAgIG5ld0xpbmUuY2xhc3NMaXN0LmFkZChcImxpc3QtaXRlbVwiKVxuICAgIHByb2plY3RMaXN0LmFwcGVuZENoaWxkKG5ld0xpbmUpXG4gIH0pXG59KSgpXG5cbi8vIFNob3cgdG9kb1xubGV0IGNhblNob3dDb250ZW50ID0gKCgpID0+IHtcbiAgbGV0IHByb2plY3RzQXJyYXkgPSBBcnJheS5mcm9tKHByb2plY3RzTGlzdClcbiAgcHJvamVjdHNBcnJheS5mb3JFYWNoKChsaXN0SXRlbSkgPT4geyAgICBcbiAgICBsaXN0SXRlbS5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwoZSkgPT4ge1xuICAgICAgc2VsZWN0T25lUHJvamVjdChlKVxuICAgICAgbGV0IHByb2plY3QgPSBmaW5kUHJvamVjdChsaXN0SXRlbS50ZXh0Q29udGVudClcbiAgICAgIC8vIFN5bmNocm9uaXplIGN1cnJlbnQgcHJvamVjdFxuICAgICAgc3luY1Byb2plY3QocHJvamVjdClcbiAgICAgIC8vIEF1dG8gdXBkYXRlIHByb2plY3QgY29udGVudFxuICAgICAgcHJvamVjdE5hbWUuaW5uZXJIVE1MID0gcHJvamVjdC5uYW1lXG4gICAgICB0b2RvTGlzdC5pbm5lckhUTUwgPSBzaG93VG9kb3MocHJvamVjdClcbiAgICAgIHByb2plY3RCb2R5LmNsYXNzTGlzdC5yZW1vdmUoXCJoaWRkZW5cIikgIFxuICAgICAgbG9jYXRpb24ucmVsb2FkKClcbiAgICB9KVxuICB9KVxuXG4gIC8vIFNlbGVjdGVkIHByb2plY3QgZGlzcGxheVxuICBjb25zdCBzZWxlY3RPbmVQcm9qZWN0ID0gKGUpID0+IHtcbiAgICBwcm9qZWN0c0FycmF5ID0gQXJyYXkuZnJvbShwcm9qZWN0c0xpc3QpXG4gICAgcHJvamVjdHNBcnJheS5mb3JFYWNoKChsaXN0SXRlbSkgPT4ge1xuICAgICAgbGlzdEl0ZW0uY2xhc3NMaXN0LnJlbW92ZShcInNlbGVjdGVkXCIpXG4gICAgfSlcbiAgICBsZXQgc2VsZWN0ZWQgPSBlLnRhcmdldFxuICAgIHNlbGVjdGVkLmNsYXNzTGlzdC5hZGQoXCJzZWxlY3RlZFwiKVxuICB9XG59KSgpXG5cbiIsImltcG9ydCB7Z2V0QWxsUHJvamVjdHMsIGdldEN1cnJlbnRQcm9qZWN0LCBlZGl0VGhpc1Byb2plY3QsIFxuICAgICAgICBkZWxldGVUaGlzUHJvamVjdCwgc3luY1Byb2plY3QsIHVwZGF0ZVByb2plY3RTdG9yYWdlfSBmcm9tIFwiLi9wcm9qZWN0XCJcbmltcG9ydCB7Y3JlYXRlVG9kbywgc2hvd1RvZG9zfSBmcm9tIFwiLi90b2RvXCJcblxuY29uc3QgcHJvamVjdEJvZHkgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLnByb2plY3QtYm9keVwiKVxuY29uc3QgcHJvamVjdE5hbWUgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLnByb2plY3QtbmFtZVwiKVxuY29uc3QgZWRpdFByb2plY3RNb2RhbCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuZWRpdC1wcm9qZWN0LWZvcm0tbW9kYWxcIilcbmNvbnN0IGVkaXRQcm9qZWN0Rm9ybSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuZWRpdC1wcm9qZWN0LWZvcm1cIilcbmNvbnN0IGVkaXRQcm9qZWN0QnRuID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5lZGl0LXByb2plY3RcIilcbmNvbnN0IGRlbFByb2plY3RCdG4gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLmRlbGV0ZS1wcm9qZWN0XCIpXG5jb25zdCBuZXdUb2RvTW9kYWwgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLm5ldy10b2RvLWZvcm0tbW9kYWxcIilcbmNvbnN0IG5ld1Byb2plY3RGb3JtID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5uZXctdG9kby1mb3JtXCIpXG5jb25zdCBuZXdUb2RvQnRuID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5uZXctdG9kb1wiKVxuY29uc3QgdG9kb0xpc3QgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLnRvZG8tbGlzdFwiKVxuXG4vLyBBdXRvIGhpZGUgYm9keSB3aGVuIG5vIHByb2plY3RzXG5jb25zdCBhdXRvSGlkZUJvZHkgPSAoKCkgPT4ge1xuICBsZXQgYWxsUHJvamVjdHMgPSBnZXRBbGxQcm9qZWN0cygpXG4gIGlmIChhbGxQcm9qZWN0cy5sZW5ndGggPT0gMCkge1xuICAgIHByb2plY3RCb2R5LmNsYXNzTGlzdC5hZGQoXCJoaWRkZW5cIilcbiAgfVxufSkoKVxuXG4vLyBBdXRvIHNob3cgbGFzdCBjaGVja2VkIHByb2plY3RcbmNvbnN0IGF1dG9TaG93Qm9keSA9ICgoKSA9PiB7XG4gIGxldCBjdXJyZW50UHJvamVjdCA9IGdldEN1cnJlbnRQcm9qZWN0KClcbiAgaWYgKGN1cnJlbnRQcm9qZWN0KSB7XG4gICAgcHJvamVjdE5hbWUuaW5uZXJIVE1MID0gY3VycmVudFByb2plY3QubmFtZVxuICAgIHByb2plY3RCb2R5LmNsYXNzTGlzdC5yZW1vdmUoXCJoaWRkZW5cIilcbiAgICB0b2RvTGlzdC5pbm5lckhUTUwgPSBzaG93VG9kb3MoY3VycmVudFByb2plY3QpXG4gIH0gXG59KSgpXG5cbi8vIE9wZW4gZWRpdCBwcm9qZWN0IGZvcm1cbmNvbnN0IGNhblRyaWdnZXJFZGl0UHJvamVjdEZvcm0gPSAoKCkgPT57XG4gIGVkaXRQcm9qZWN0QnRuLm9uY2xpY2sgPSAoKSA9PiB7XG4gICAgZWRpdFByb2plY3RNb2RhbC5jbGFzc0xpc3QudG9nZ2xlKFwiaGlkZGVuXCIpXG4gIH1cbn0pKClcblxuLy8gRWRpdCBwcm9qZWN0XG5jb25zdCBjYW5FZGl0UHJvamVjdCA9ICgoKSA9PiB7XG4gIGVkaXRQcm9qZWN0Rm9ybS5hZGRFdmVudExpc3RlbmVyKFwic3VibWl0XCIsIGVkaXRUaGlzUHJvamVjdClcbn0pKClcblxuLy8gRGVsZXRlIHByb2plY3RcbmNvbnN0IGNhbkRlbGV0ZVByb2plY3QgPSAoKCkgPT4ge1xuICBkZWxQcm9qZWN0QnRuLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCBkZWxldGVUaGlzUHJvamVjdClcbn0pKClcblxuLy8gT3BlbiBuZXcgdG9kbyBmb3JtXG5jb25zdCBjYW5UcmlnZ2VyTmV3VG9kb0Zvcm0gPSAoKCkgPT4ge1xuICBuZXdUb2RvQnRuLm9uY2xpY2sgPSAoKSA9PiB7XG4gICAgbmV3VG9kb01vZGFsLmNsYXNzTGlzdC50b2dnbGUoXCJoaWRkZW5cIilcbiAgfVxufSkoKVxuXG4vLyBDcmVhdGUgbmV3IHRvZG9cbmNvbnN0IGNhbkNyZWF0ZVRvZG8gPSAoKCkgPT4ge1xuICBuZXdQcm9qZWN0Rm9ybS5hZGRFdmVudExpc3RlbmVyKFwic3VibWl0XCIsKGUpID0+IHtcbiAgICBsZXQgbmV3VG9kbyA9IGNyZWF0ZVRvZG8oZSlcbiAgICBsZXQgb2xkUHJvamVjdCA9IGdldEN1cnJlbnRQcm9qZWN0KClcbiAgICBsZXQgbmV3UHJvamVjdCA9IGdldEN1cnJlbnRQcm9qZWN0KClcbiAgICBuZXdQcm9qZWN0LnRvZG8ucHVzaChuZXdUb2RvKVxuICAgIHN5bmNQcm9qZWN0KG5ld1Byb2plY3QpXG4gICAgdXBkYXRlUHJvamVjdFN0b3JhZ2UobmV3UHJvamVjdCwgb2xkUHJvamVjdClcbiAgfSlcbn0pKClcblxuIiwiLy8gVGFibGUgd2l0aGluIGJvZHlcbmltcG9ydCB7Y2hlY2tUb2RvLCBmaWxsVG9kb2NvbnRlbnQsIGVkaXRUb2RvfSBmcm9tIFwiLi90b2RvXCJcblxuY29uc3QgY2hlY2tUb2RvQnRucyA9IGRvY3VtZW50LmdldEVsZW1lbnRzQnlDbGFzc05hbWUoXCJjaGVjay10b2RvXCIpXG5jb25zdCBlZGl0VG9kb0J0bnMgPSBkb2N1bWVudC5nZXRFbGVtZW50c0J5Q2xhc3NOYW1lKFwiZWRpdC10b2RvXCIpXG5jb25zdCBlZGl0VG9kb01vZGFsID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5lZGl0LXRvZG8tZm9ybS1tb2RhbFwiKVxuY29uc3QgZWRpdFRvZG9Gb3JtID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5lZGl0LXRvZG8tZm9ybVwiKVxuY29uc3QgZGVsVG9kb0J0bnMgPSBkb2N1bWVudC5nZXRFbGVtZW50c0J5Q2xhc3NOYW1lKFwiZGVsZXRlLXRvZG9cIilcblxuLy8gQ2hlY2sgb3IgdW5jaGVjayBvbmUgdG9kb1xuY29uc3QgY2FuQ2hlY2tUb2RvID0gKCgpID0+IHtcbiAgbGV0IGJ1dHRvbnMgPSBBcnJheS5mcm9tKGNoZWNrVG9kb0J0bnMpXG4gIGJ1dHRvbnMuZm9yRWFjaCgoYnV0dG9uKSA9PiB7XG4gICAgYnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCBjaGVja1RvZG8pXG4gIH0pXG59KSgpXG5cbi8vIE9wZW4gZWRpdCB0b2RvIGZvcm0gYW5kIGVkaXRcbmNvbnN0IGNhblRyaWdnZXJFZGl0VG9kb0Zvcm0gPSAoKCkgPT57XG4gIGxldCBidXR0b25zID0gQXJyYXkuZnJvbShlZGl0VG9kb0J0bnMpXG4gIGJ1dHRvbnMuZm9yRWFjaCgoYnV0dG9uKSA9PiB7XG4gICAgYnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoZSkgPT4ge1xuICAgICAgZWRpdFRvZG9Nb2RhbC5jbGFzc0xpc3QudG9nZ2xlKFwiaGlkZGVuXCIpXG4gICAgICBsZXQgdG9kb0luZGV4ID0gZS50YXJnZXQuY2xvc2VzdChcImJ1dHRvblwiKS5kYXRhc2V0LmluZGV4XG4gICAgICBmaWxsVG9kb2NvbnRlbnQoZWRpdFRvZG9Gb3JtLCB0b2RvSW5kZXgpXG4gICAgICBlZGl0VG9kb0Zvcm0uYWRkRXZlbnRMaXN0ZW5lcihcInN1Ym1pdFwiLCAoZSkgPT4ge1xuICAgICAgICBlZGl0VG9kbyhlLCB0b2RvSW5kZXgpXG4gICAgICB9KVxuICAgIH0pXG4gIH0pXG59KSgpXG4iXSwic291cmNlUm9vdCI6IiJ9