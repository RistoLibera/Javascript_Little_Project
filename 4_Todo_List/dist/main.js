(()=>{"use strict";const e=()=>{let e=localStorage.getItem("myProject");return e?JSON.parse(e):[]},t=t=>e().find((e=>e.name==t)),o=(t,o)=>{let r,l=e();l.map(((e,n)=>{e.name==o.name&&t===o?(l.splice(n,1),r=JSON.stringify(l),localStorage.setItem("myProject",r)):e.name==o.name&&(l.splice(n,1,t),r=JSON.stringify(l),localStorage.setItem("myProject",r))}))},r=e=>{localStorage.setItem("currentProject",JSON.stringify(e))},l=()=>{let e=localStorage.getItem("currentProject");return e?JSON.parse(e):null},n=e=>{let t=(e=>{let t=[];return e.todo.forEach(((e,o)=>{let r=`\n    <tr class='${e.checked?"complete":e.priority}'>\n      <td>${e.title}</td>\n      <td>${e.due}</td>\n      <td>${e.priority}</td>\n      <td>\n        <button class='check-todo' data-index='${o}'>\n          ${e.checked?"<span class='material-icons'>task_alt</span>":"<span class='material-icons'>remove_circle_outline</span>"}\n        </button>\n      </td>\n      <td><button class='edit-todo' data-index='${o}'><span class="material-icons">description</span></button></td>\n      <td><button class='delete-todo' data-index='${o}'><span class="material-icons">delete_forever</span></button></td>\n    </tr>`;t.push(r)})),t})(e);return t?t.map((e=>e)).join(""):[]},c=e=>{let t=l(),n=l(),c=e.target.closest("button").dataset.index,a=n.todo[c];a.checked=!a.checked,r(n),o(n,t),location.reload()},a=e=>{if(!confirm("Delete this todo?"))return;let t=l(),n=l(),c=e.target.closest("button").dataset.index;n.todo.splice(c,1),r(n),o(n,t),location.reload()},d=document.getElementsByClassName("modal"),s=document.querySelector(".project"),i=document.querySelector(".toggle-project"),m=document.querySelectorAll(".toggle-icons"),u=document.getElementById("add-project"),y=document.querySelector(".new-project-form-modal"),g=document.querySelector(".new-project-form"),p=document.getElementsByClassName("cancel"),S=document.querySelector(".project-list"),f=document.querySelector(".project-body"),h=document.querySelector(".project-name"),v=document.querySelector(".todo-list"),L=document.getElementsByClassName("list-item");i.onclick=()=>{s.classList.toggle("active"),m.forEach((e=>e.classList.toggle("hidden")))},u.onclick=()=>{y.classList.toggle("hidden")},g.addEventListener("submit",(t=>{let o={name:t.target.elements.name.value,todo:[]};(t=>{let o=e();o.push(t),localStorage.setItem("myProject",JSON.stringify(o))})(o),r(o)})),Array.from(p).forEach((e=>{let t=e.closest("section");e.onclick=()=>{t.classList.toggle("hidden")}})),window.addEventListener("click",(e=>{e.target.className.split(" ").some((e=>"modal"==e))&&Array.from(d,(e=>{e.classList.add("hidden")}))})),e().map((e=>{let t=document.createElement("li");t.innerHTML=e.name,t.classList.add("list-item"),S.appendChild(t)})),Array.from(L).forEach((e=>{e.addEventListener("click",(o=>{let l=t(e.textContent);r(l),h.innerHTML=l.name,v.innerHTML=n(l),f.classList.remove("hidden"),location.reload()}))})),(()=>{let e=Array.from(L),o=l();e.forEach((e=>{e.classList.remove("selected"),t(e.textContent).name==o.name&&e.classList.add("selected")}))})();const E=document.querySelector(".project-body"),j=document.querySelector(".project-name"),q=document.querySelector(".edit-project-form-modal"),k=document.querySelector(".edit-project-form"),b=document.querySelector(".edit-project"),N=document.querySelector(".delete-project"),C=document.querySelector(".new-todo-form-modal"),x=document.querySelector(".new-todo-form"),A=document.querySelector(".new-todo"),I=document.querySelector(".todo-list"),$=(0==e().length&&E.classList.add("hidden"),(()=>{let e=l();e&&(j.innerHTML=e.name,E.classList.remove("hidden"),I.innerHTML=n(e))})(),b.onclick=()=>{q.classList.toggle("hidden")},k.addEventListener("submit",(e=>{let t=l(),n=l(),c=e.target.elements;n.name=c.name.value,r(n),o(n,t)})),(e=>{let t=l().name;e.name.value=t})(k),N.addEventListener("click",(()=>{if(!confirm("Delete this project?"))return;let e=l(),t=l();localStorage.removeItem("currentProject"),o(t,e),location.reload()})),A.onclick=()=>{C.classList.toggle("hidden")},x.addEventListener("submit",(e=>{let t=(e=>{let t=e.target.elements;return{title:t.title.value,due:t.due.value,priority:t.priority.value,checked:!1}})(e),n=l(),c=l();c.todo.push(t),r(c),o(c,n)})),document.getElementsByClassName("check-todo")),w=document.getElementsByClassName("edit-todo"),B=document.querySelector(".edit-todo-form-modal"),P=document.querySelector(".edit-todo-form"),J=document.getElementsByClassName("delete-todo");Array.from($).forEach((e=>{e.addEventListener("click",c)})),Array.from(w).forEach((e=>{e.addEventListener("click",(e=>{B.classList.toggle("hidden");let t=e.target.closest("button").dataset.index;((e,t)=>{let o=l().todo[t];const{title:r,due:n,priority:c}=o;let a=r,d=n,s=c;e.title.value=a,e.due.value=d,e.priority.value=s})(P,t),P.addEventListener("submit",(e=>{((e,t)=>{let n=l(),c=l(),a=c.todo[t],d=e.target.elements;a.title=d.title.value,a.due=d.due.value,a.priority=d.priority.value,r(c),o(c,n)})(e,t)}))}))})),Array.from(J).forEach((e=>{e.addEventListener("click",a)}))})();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly90b2RvX2xpc3QvLi9zcmMvcHJvamVjdC5qcyIsIndlYnBhY2s6Ly90b2RvX2xpc3QvLi9zcmMvdG9kby5qcyIsIndlYnBhY2s6Ly90b2RvX2xpc3QvLi9zcmMvc2lkZWJhci5qcyIsIndlYnBhY2s6Ly90b2RvX2xpc3QvLi9zcmMvYm9keS5qcyIsIndlYnBhY2s6Ly90b2RvX2xpc3QvLi9zcmMvdGFibGUuanMiXSwibmFtZXMiOlsiZ2V0QWxsUHJvamVjdHMiLCJwcm9qZWN0TFMiLCJsb2NhbFN0b3JhZ2UiLCJnZXRJdGVtIiwiSlNPTiIsInBhcnNlIiwiZmluZFByb2plY3QiLCJwcm9qZWN0TmFtZSIsImZpbmQiLCJzdG9yZWRQcm9qZWN0IiwibmFtZSIsInVwZGF0ZVByb2plY3RTdG9yYWdlIiwibmV3UHJvamVjdCIsIm9sZFByb2plY3QiLCJ0ZW1wU3RvcmFnZSIsInByb2plY3RTdG9yYWdlIiwibWFwIiwicHJvamVjdCIsImluZGV4Iiwic3BsaWNlIiwic3RyaW5naWZ5Iiwic2V0SXRlbSIsInN5bmNQcm9qZWN0IiwiZ2V0Q3VycmVudFByb2plY3QiLCJjdXJyZW50UHJvamVjdExTIiwic2hvd1RvZG9zIiwidG9kb0l0ZW1zIiwidGFibGVSb3dzIiwidG9kbyIsImZvckVhY2giLCJyb3dIdG1sIiwiY2hlY2tlZCIsInByaW9yaXR5IiwidGl0bGUiLCJkdWUiLCJwdXNoIiwiZ2V0VG9kb0NvbnRlbnQiLCJ0YWJsZVJvdyIsImpvaW4iLCJjaGVja1RvZG8iLCJlIiwidG9kb0luZGV4IiwidGFyZ2V0IiwiY2xvc2VzdCIsImRhdGFzZXQiLCJhbHRlcmVkVG9kbyIsImxvY2F0aW9uIiwicmVsb2FkIiwiZGVsZXRlVG9kbyIsImNvbmZpcm0iLCJtb2RhbFNlY3Rpb25zIiwiZG9jdW1lbnQiLCJnZXRFbGVtZW50c0J5Q2xhc3NOYW1lIiwic2lkZWJhciIsInF1ZXJ5U2VsZWN0b3IiLCJ0b2dnbGVCdG4iLCJ0b2dnbGVJY29ucyIsInF1ZXJ5U2VsZWN0b3JBbGwiLCJhZGRQcm9qZWN0QnRuIiwiZ2V0RWxlbWVudEJ5SWQiLCJuZXdQcm9qZWN0TW9kYWwiLCJuZXdQcm9qZWN0Rm9ybSIsImNhbmNlbEJ0bnMiLCJwcm9qZWN0TGlzdCIsInByb2plY3RCb2R5IiwidG9kb0xpc3QiLCJwcm9qZWN0c0xpc3QiLCJvbmNsaWNrIiwiY2xhc3NMaXN0IiwidG9nZ2xlIiwiaWNvbiIsImFkZEV2ZW50TGlzdGVuZXIiLCJlbGVtZW50cyIsInZhbHVlIiwiYWxsUHJvamVjdHMiLCJzdG9yZVByb2plY3QiLCJBcnJheSIsImZyb20iLCJidXR0b24iLCJtb2RhbCIsIndpbmRvdyIsImNsYXNzTmFtZSIsInNwbGl0Iiwic29tZSIsIm9uZWNsYXNzIiwiZWxlbWVudCIsImFkZCIsIm5ld0xpbmUiLCJjcmVhdGVFbGVtZW50IiwiaW5uZXJIVE1MIiwiYXBwZW5kQ2hpbGQiLCJsaXN0SXRlbSIsInRleHRDb250ZW50IiwicmVtb3ZlIiwicHJvamVjdHNBcnJheSIsImVkaXRQcm9qZWN0TW9kYWwiLCJlZGl0UHJvamVjdEZvcm0iLCJlZGl0UHJvamVjdEJ0biIsImRlbFByb2plY3RCdG4iLCJuZXdUb2RvTW9kYWwiLCJuZXdUb2RvQnRuIiwiY2hlY2tUb2RvQnRucyIsImxlbmd0aCIsImN1cnJlbnRQcm9qZWN0IiwiZm9ybVZhbHVlIiwiZm9ybSIsIm9sZG5hbWUiLCJmaWxsUHJvamVjdE5hbWUiLCJyZW1vdmVJdGVtIiwibmV3VG9kbyIsImZvcm1EYXRhIiwiY3JlYXRlVG9kbyIsImVkaXRUb2RvQnRucyIsImVkaXRUb2RvTW9kYWwiLCJlZGl0VG9kb0Zvcm0iLCJkZWxUb2RvQnRucyIsIm9sZFRvZG8iLCJvbGRUaXRsZSIsIm9sZER1ZSIsIm9sZFByaW9yaXR5IiwiZmlsbFRvZG9jb250ZW50IiwiZWRpdFRvZG8iXSwibWFwcGluZ3MiOiJtQkFDQSxNQWdCTUEsRUFBaUIsS0FDckIsSUFBSUMsRUFBWUMsYUFBYUMsUUFBUSxhQUNyQyxPQUFHRixFQUNpQkcsS0FB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Q2JzQixFQUFjakMsRUFBV2dCLEtBQUthLEdBQzlCK0QsRUFBWWhFLEVBQUVFLE9BQU84QixTQUV6QjNCLEVBQVlaLE1BQVF1RSxFQUFVdkUsTUFBTXdDLE1BQ3BDNUIsRUFBWVgsSUFBTXNFLEVBQVV0RSxJQUFJdUMsTUFDaEM1QixFQUFZYixTQUFXd0UsRUFBVXhFLFNBQVN5QyxNQUUxQ25ELEVBQVlWLEdBQ1pELEVBQXFCQyxFQUFZQyxJR2xGM0I0RyxDQUFTakYsRUFBR0MsWUFRSm1DLE1BQU1DLEtBQUtzQyxHQUNqQnRGLFNBQVNpRCxJQUNmQSxFQUFPUCxpQkFBaUIsUUFBU3ZCLE8iLCJmaWxlIjoibWFpbi5qcyIsInNvdXJjZXNDb250ZW50IjpbIi8vIFByb2plY3QgZmFjdG9yeVxuY29uc3QgUHJvamVjdCA9IChuYW1lKSA9PiB7XG4gIGxldCB0b2RvID0gW107XG4gIHJldHVybiB7XG4gICAgbmFtZSxcbiAgICB0b2RvXG4gIH07XG59O1xuXG4vLyBTdG9yZSBuZXcgcHJvamVjdFxuY29uc3Qgc3RvcmVQcm9qZWN0ID0gKG5ld1Byb2plY3QpID0+IHtcbiAgbGV0IGFsbFByb2plY3RzID0gZ2V0QWxsUHJvamVjdHMoKTtcbiAgYWxsUHJvamVjdHMucHVzaChuZXdQcm9qZWN0KTtcbiAgbG9jYWxTdG9yYWdlLnNldEl0ZW0oXCJteVByb2plY3RcIiwgSlNPTi5zdHJpbmdpZnkoYWxsUHJvamVjdHMpKTtcbn07XG5cbi8vIEdldCBzdG9yZWQgcHJvamVjdHNcbmNvbnN0IGdldEFsbFByb2plY3RzID0gKCkgPT4ge1xuICBsZXQgcHJvamVjdExTID0gbG9jYWxTdG9yYWdlLmdldEl0ZW0oXCJteVByb2plY3RcIik7XG4gIGlmKHByb2plY3RMUykge1xuICAgIGxldCBhbGxQcm9qZWN0cyA9IEpTT04ucGFyc2UocHJvamVjdExTKTtcbiAgICByZXR1cm4gYWxsUHJvamVjdHM7XG4gIH0gZWxzZSB7XG4gICAgcmV0dXJuIFtdO1xuICB9XG59O1xuXG4vLyBGaW5kIGEgcHJvamVjdFxuY29uc3QgZmluZFByb2plY3QgPSAocHJvamVjdE5hbWUpID0+IHtcbiAgbGV0IGFsbFByb2plY3RzID0gZ2V0QWxsUHJvamVjdHMoKTtcbiAgbGV0IHRoYXRQcm9qZWN0ID0gYWxsUHJvamVjdHMuZmluZChzdG9yZWRQcm9qZWN0ID0+IHN0b3JlZFByb2plY3QubmFtZSA9PSBwcm9qZWN0TmFtZSk7XG4gIHJldHVybiB0aGF0UHJvamVjdDtcbn07XG5cbi8vIFVwZGF0ZSBwcm9qZWN0IHN0b3JhZ2VcbmNvbnN0IHVwZGF0ZVByb2plY3RTdG9yYWdlID0gKG5ld1Byb2plY3QsIG9sZFByb2plY3QpID0+IHtcbiAgbGV0IHByb2plY3RTdG9yYWdlID0gZ2V0QWxsUHJvamVjdHMoKTtcbiAgbGV0IHRlbXBTdG9yYWdlO1xuXG4gIHByb2plY3RTdG9yYWdlLm1hcCgocHJvamVjdCwgaW5kZXgpID0+IHtcbiAgICBpZiAocHJvamVjdC5uYW1lID09IG9sZFByb2plY3QubmFtZSAmJiBuZXdQcm9qZWN0ID09PSBvbGRQcm9qZWN0KSB7XG4gICAgICAvLyBEZWxldGVcbiAgICAgIHByb2plY3RTdG9yYWdlLnNwbGljZShpbmRleCwgMSk7XG4gICAgICB0ZW1wU3RvcmFnZSA9IEpTT04uc3RyaW5naWZ5KHByb2plY3RTdG9yYWdlKTtcbiAgICAgIGxvY2FsU3RvcmFnZS5zZXRJdGVtKFwibXlQcm9qZWN0XCIsIHRlbXBTdG9yYWdlKTtcbiAgICB9IGVsc2UgaWYgKHByb2plY3QubmFtZSA9PSBvbGRQcm9qZWN0Lm5hbWUpIHtcbiAgICAgIC8vIEFkZFxuICAgICAgcHJvamVjdFN0b3JhZ2Uuc3BsaWNlKGluZGV4LCAxLCBuZXdQcm9qZWN0KTtcbiAgICAgIHRlbXBTdG9yYWdlID0gSlNPTi5zdHJpbmdpZnkocHJvamVjdFN0b3JhZ2UpO1xuICAgICAgbG9jYWxTdG9yYWdlLnNldEl0ZW0oXCJteVByb2plY3RcIiwgdGVtcFN0b3JhZ2UpO1xuICAgIH0gXG4gIH0pO1xufTtcblxuLy8gU3luY2hyb25pemUgY3VycmVudCBwcm9qZWN0XG5jb25zdCBzeW5jUHJvamVjdCA9IChwcm9qZWN0KSA9PiB7XG4gIGxvY2FsU3RvcmFnZS5zZXRJdGVtKFwiY3VycmVudFByb2plY3RcIixKU09OLnN0cmluZ2lmeShwcm9qZWN0KSk7XG59O1xuXG4vLyBHZXQgY3VycmVudCBwcm9qZWN0XG5jb25zdCBnZXRDdXJyZW50UHJvamVjdCA9ICgpID0+IHtcbiAgbGV0IGN1cnJlbnRQcm9qZWN0TFMgPSBsb2NhbFN0b3JhZ2UuZ2V0SXRlbShcImN1cnJlbnRQcm9qZWN0XCIpO1xuICBpZiAoY3VycmVudFByb2plY3RMUykge1xuICAgIGxldCBjdXJyZW50UHJvamVjdCA9IEpTT04ucGFyc2UoY3VycmVudFByb2plY3RMUyk7XG4gICAgcmV0dXJuIGN1cnJlbnRQcm9qZWN0O1xuICB9IGVsc2Uge1xuICAgIHJldHVybiBudWxsO1xuICB9XG59O1xuXG4vLyBDcmVhdGUgbmV3IHByb2plY3RcbmNvbnN0IGNyZWF0ZU5ld1Byb2plY3QgPSAoZSkgPT4ge1xuICBsZXQgcHJvamVjdE5hbWUgPSBlLnRhcmdldC5lbGVtZW50cy5uYW1lLnZhbHVlO1xuICBsZXQgbmV3UHJvamVjdCA9IFByb2plY3QocHJvamVjdE5hbWUpO1xuICBzdG9yZVByb2plY3QobmV3UHJvamVjdCk7ICBcbiAgc3luY1Byb2plY3QobmV3UHJvamVjdCk7XG59O1xuXG4vLyBFZGl0IHByb2plY3QgbmFtZVxuY29uc3QgZWRpdFRoaXNQcm9qZWN0ID0gKGUpID0+IHtcbiAgbGV0IG9sZFByb2plY3QgPSBnZXRDdXJyZW50UHJvamVjdCgpO1xuICBsZXQgbmV3UHJvamVjdCA9IGdldEN1cnJlbnRQcm9qZWN0KCk7XG4gIGxldCBmb3JtVmFsdWUgPSBlLnRhcmdldC5lbGVtZW50cztcbiAgbmV3UHJvamVjdC5uYW1lID0gZm9ybVZhbHVlLm5hbWUudmFsdWU7XG4gIHN5bmNQcm9qZWN0KG5ld1Byb2plY3QpO1xuICB1cGRhdGVQcm9qZWN0U3RvcmFnZShuZXdQcm9qZWN0LCBvbGRQcm9qZWN0KTtcbn07XG5cbi8vIEF1dG9maWxsIG9sZCBwcm9qZWN0IG5hbWVcbmNvbnN0IGZpbGxQcm9qZWN0TmFtZSA9IChmb3JtKSA9PiB7XG4gIGxldCBvbGRQcm9qZWN0ID0gZ2V0Q3VycmVudFByb2plY3QoKTtcbiAgbGV0IG9sZG5hbWUgPSBvbGRQcm9qZWN0Lm5hbWU7XG4gIGZvcm0ubmFtZS52YWx1ZSA9IG9sZG5hbWU7XG59O1xuXG4vLyBEZWxldGUgcHJvamVjdFxuY29uc3QgZGVsZXRlVGhpc1Byb2plY3QgPSAoKSA9PiB7XG4gIGxldCBjb25maXJtYXRpb24gPSBjb25maXJtKFwiRGVsZXRlIHRoaXMgcHJvamVjdD9cIik7XG4gIGlmICghY29uZmlybWF0aW9uKSByZXR1cm47XG5cbiAgbGV0IG9sZFByb2plY3QgPSBnZXRDdXJyZW50UHJvamVjdCgpO1xuICBsZXQgbmV3UHJvamVjdCA9IGdldEN1cnJlbnRQcm9qZWN0KCk7XG4gIFxuICAvLyBVcGRhdGUgdHdvIGRhdGFiYXNlXG4gIGxvY2FsU3RvcmFnZS5yZW1vdmVJdGVtKFwiY3VycmVudFByb2plY3RcIik7XG4gIHVwZGF0ZVByb2plY3RTdG9yYWdlKG5ld1Byb2plY3QsIG9sZFByb2plY3QpO1xuICBsb2NhdGlvbi5yZWxvYWQoKTtcbn07XG5cbmV4cG9ydCB7XG4gIFByb2plY3QsXG4gIHN0b3JlUHJvamVjdCxcbiAgZ2V0QWxsUHJvamVjdHMsXG4gIGZpbmRQcm9qZWN0LFxuICBzeW5jUHJvamVjdCxcbiAgZ2V0Q3VycmVudFByb2plY3QsXG4gIGNyZWF0ZU5ld1Byb2plY3QsXG4gIGVkaXRUaGlzUHJvamVjdCxcbiAgZmlsbFByb2plY3ROYW1lLFxuICBkZWxldGVUaGlzUHJvamVjdCxcbiAgdXBkYXRlUHJvamVjdFN0b3JhZ2Vcbn07XG4iLCJpbXBvcnQgeyB1cGRhdGVQcm9qZWN0U3RvcmFnZSwgc3luY1Byb2plY3QsXG4gICAgICAgIGdldEN1cnJlbnRQcm9qZWN0IH0gZnJvbSBcIi4vcHJvamVjdFwiO1xuXG4vLyBUb2RvIGZhY3RvcnlcbmNvbnN0IFRvZG8gPSAodGl0bGUsIGR1ZSwgcHJpb3JpdHksIGNoZWNrZWQpID0+IHtcblxuICByZXR1cm4ge1xuICAgIHRpdGxlLFxuICAgIGR1ZSxcbiAgICBwcmlvcml0eSxcbiAgICBjaGVja2VkXG4gIH07XG59O1xuXG4vLyBDcmVhdGUgbmV3IHRvZG9cbmNvbnN0IGNyZWF0ZVRvZG8gPSAoZSkgPT4ge1xuICBsZXQgZm9ybURhdGEgPSBlLnRhcmdldC5lbGVtZW50cztcbiAgbGV0IHRpdGxlID0gZm9ybURhdGEudGl0bGUudmFsdWU7XG4gIGxldCBkdWUgPSBmb3JtRGF0YS5kdWUudmFsdWU7XG4gIGxldCBwcmlvcml0eSA9IGZvcm1EYXRhLnByaW9yaXR5LnZhbHVlO1xuICBsZXQgY2hlY2tlZCA9IGZhbHNlO1xuICBsZXQgbmV3VG9kbyA9IFRvZG8odGl0bGUsIGR1ZSwgcHJpb3JpdHksIGNoZWNrZWQpO1xuXG4gIHJldHVybiBuZXdUb2RvO1xufTtcblxuLy8gR2V0IHRvZG8gY29udGVudFxuY29uc3QgZ2V0VG9kb0NvbnRlbnQgPSAocHJvamVjdCkgPT4ge1xuICBsZXQgdGFibGVSb3dzID0gW107XG4gIGxldCBhcnJheSA9IHByb2plY3QudG9kbztcblxuICBhcnJheS5mb3JFYWNoKCh0b2RvLCBpbmRleCkgPT4ge1xuICAgIGxldCByb3dIdG1sID0gYFxuICAgIDx0ciBjbGFzcz0nJHt0b2RvLmNoZWNrZWQgPyAnY29tcGxldGUnIDogdG9kby5wcmlvcml0eX0nPlxuICAgICAgPHRkPiR7dG9kby50aXRsZX08L3RkPlxuICAgICAgPHRkPiR7dG9kby5kdWV9PC90ZD5cbiAgICAgIDx0ZD4ke3RvZG8ucHJpb3JpdHl9PC90ZD5cbiAgICAgIDx0ZD5cbiAgICAgICAgPGJ1dHRvbiBjbGFzcz0nY2hlY2stdG9kbycgZGF0YS1pbmRleD0nJHtpbmRleH0nPlxuICAgICAgICAgICR7XG4gICAgICAgICAgICB0b2RvLmNoZWNrZWRcbiAgICAgICAgICAgICAgPyBcIjxzcGFuIGNsYXNzPSdtYXRlcmlhbC1pY29ucyc+dGFza19hbHQ8L3NwYW4+XCJcbiAgICAgICAgICAgICAgOiBcIjxzcGFuIGNsYXNzPSdtYXRlcmlhbC1pY29ucyc+cmVtb3ZlX2NpcmNsZV9vdXRsaW5lPC9zcGFuPlwiXG4gICAgICAgICAgfVxuICAgICAgICA8L2J1dHRvbj5cbiAgICAgIDwvdGQ+XG4gICAgICA8dGQ+PGJ1dHRvbiBjbGFzcz0nZWRpdC10b2RvJyBkYXRhLWluZGV4PScke2luZGV4fSc+PHNwYW4gY2xhc3M9XCJtYXRlcmlhbC1pY29uc1wiPmRlc2NyaXB0aW9uPC9zcGFuPjwvYnV0dG9uPjwvdGQ+XG4gICAgICA8dGQ+PGJ1dHRvbiBjbGFzcz0nZGVsZXRlLXRvZG8nIGRhdGEtaW5kZXg9JyR7aW5kZXh9Jz48c3BhbiBjbGFzcz1cIm1hdGVyaWFsLWljb25zXCI+ZGVsZXRlX2ZvcmV2ZXI8L3NwYW4+PC9idXR0b24+PC90ZD5cbiAgICA8L3RyPmA7XG5cbiAgdGFibGVSb3dzLnB1c2gocm93SHRtbCk7XG4gIH0pO1xuXG4gIHJldHVybiB0YWJsZVJvd3M7XG59O1xuXG4vLyBTaG93IHRvZG9zXG5jb25zdCBzaG93VG9kb3MgPSAocHJvamVjdCkgPT4ge1xuICBsZXQgdG9kb0l0ZW1zID0gZ2V0VG9kb0NvbnRlbnQocHJvamVjdCk7XG4gIGlmICh0b2RvSXRlbXMpIHtcbiAgICBsZXQgbGlzdEh0bWwgPSB0b2RvSXRlbXMubWFwKCh0YWJsZVJvdykgPT4gdGFibGVSb3cpLmpvaW4oXCJcIik7XG4gICAgcmV0dXJuIGxpc3RIdG1sO1xuICB9IGVsc2Uge1xuICAgIHJldHVybiBbXTtcbiAgfVxufTtcblxuLy8gQ2hlY2sgb3IgdW5jaGVjayB0b2RvXG5jb25zdCBjaGVja1RvZG8gPSAoZSkgPT4ge1xuICBsZXQgb2xkUHJvamVjdCA9IGdldEN1cnJlbnRQcm9qZWN0KCk7XG4gIGxldCBuZXdQcm9qZWN0ID0gZ2V0Q3VycmVudFByb2plY3QoKTtcbiAgbGV0IHRvZG9JbmRleCA9IGUudGFyZ2V0LmNsb3Nlc3QoXCJidXR0b25cIikuZGF0YXNldC5pbmRleDtcbiAgbGV0IGFsdGVyZWRUb2RvID0gbmV3UHJvamVjdC50b2RvW3RvZG9JbmRleF07XG4gIFxuICBhbHRlcmVkVG9kby5jaGVja2VkID0gIShhbHRlcmVkVG9kby5jaGVja2VkKTtcbiAgc3luY1Byb2plY3QobmV3UHJvamVjdCk7XG4gIHVwZGF0ZVByb2plY3RTdG9yYWdlKG5ld1Byb2plY3QsIG9sZFByb2plY3QpO1xuICAvLyBVcGRhdGUgaW50ZXJmYWNlXG4gIGxvY2F0aW9uLnJlbG9hZCgpO1xufTtcblxuLy8gQXV0b2ZpbGwgb2xkIHRvZG8gY29udGVudFxuY29uc3QgZmlsbFRvZG9jb250ZW50ID0gKGZvcm0sIHRvZG9JbmRleCkgPT4ge1xuICBsZXQgb2xkUHJvamVjdCA9IGdldEN1cnJlbnRQcm9qZWN0KCk7XG4gIGxldCBvbGRUb2RvID0gb2xkUHJvamVjdC50b2RvW3RvZG9JbmRleF07XG5cbiAgLy8gT2JqZWN0IGRlc3RydWN0dXJpbmdcbiAgY29uc3Qge3RpdGxlLCBkdWUsIHByaW9yaXR5fSA9IG9sZFRvZG87XG4gIGxldCBvbGRUaXRsZSA9IHRpdGxlO1xuICBsZXQgb2xkRHVlID0gZHVlO1xuICBsZXQgb2xkUHJpb3JpdHkgPSBwcmlvcml0eTtcblxuICBmb3JtLnRpdGxlLnZhbHVlID0gb2xkVGl0bGU7XG4gIGZvcm0uZHVlLnZhbHVlID0gb2xkRHVlO1xuICBmb3JtLnByaW9yaXR5LnZhbHVlID0gb2xkUHJpb3JpdHk7XG59O1xuXG4vLyBFZGl0IHRvZG8gY29udGVudFxuY29uc3QgZWRpdFRvZG8gPSAoZSwgdG9kb0luZGV4KSA9PiB7XG4gIGxldCBvbGRQcm9qZWN0ID0gZ2V0Q3VycmVudFByb2plY3QoKTtcbiAgbGV0IG5ld1Byb2plY3QgPSBnZXRDdXJyZW50UHJvamVjdCgpO1xuICBsZXQgYWx0ZXJlZFRvZG8gPSBuZXdQcm9qZWN0LnRvZG9bdG9kb0luZGV4XTtcbiAgbGV0IGZvcm1WYWx1ZSA9IGUudGFyZ2V0LmVsZW1lbnRzO1xuICBcbiAgYWx0ZXJlZFRvZG8udGl0bGUgPSBmb3JtVmFsdWUudGl0bGUudmFsdWU7XG4gIGFsdGVyZWRUb2RvLmR1ZSA9IGZvcm1WYWx1ZS5kdWUudmFsdWU7XG4gIGFsdGVyZWRUb2RvLnByaW9yaXR5ID0gZm9ybVZhbHVlLnByaW9yaXR5LnZhbHVlO1xuXG4gIHN5bmNQcm9qZWN0KG5ld1Byb2plY3QpO1xuICB1cGRhdGVQcm9qZWN0U3RvcmFnZShuZXdQcm9qZWN0LCBvbGRQcm9qZWN0KTtcbn07XG5cbi8vIERlbGV0ZSB0b2RvXG5jb25zdCBkZWxldGVUb2RvID0gKGUpID0+IHtcbiAgbGV0IGNvbmZpcm1hdGlvbiA9IGNvbmZpcm0oXCJEZWxldGUgdGhpcyB0b2RvP1wiKTtcbiAgaWYgKCFjb25maXJtYXRpb24pIHJldHVybjtcblxuICBsZXQgb2xkUHJvamVjdCA9IGdldEN1cnJlbnRQcm9qZWN0KCk7XG4gIGxldCBuZXdQcm9qZWN0ID0gZ2V0Q3VycmVudFByb2plY3QoKTtcbiAgbGV0IHRvZG9JbmRleCA9IGUudGFyZ2V0LmNsb3Nlc3QoXCJidXR0b25cIikuZGF0YXNldC5pbmRleDtcbiAgbGV0IGFsdGVyZWRUb2RvID0gbmV3UHJvamVjdC50b2RvO1xuXG4gIGFsdGVyZWRUb2RvLnNwbGljZSh0b2RvSW5kZXgsIDEpO1xuICBcbiAgLy8gVXBkYXRlIHR3byBkYXRhYmFzZVxuICBzeW5jUHJvamVjdChuZXdQcm9qZWN0KTtcbiAgdXBkYXRlUHJvamVjdFN0b3JhZ2UobmV3UHJvamVjdCwgb2xkUHJvamVjdCk7XG4gIGxvY2F0aW9uLnJlbG9hZCgpO1xufTtcblxuZXhwb3J0IHtcbiAgVG9kbyxcbiAgY3JlYXRlVG9kbyxcbiAgc2hvd1RvZG9zLFxuICBjaGVja1RvZG8sXG4gIGZpbGxUb2RvY29udGVudCxcbiAgZWRpdFRvZG8sXG4gIGRlbGV0ZVRvZG9cbn07XG4iLCJpbXBvcnQgeyBnZXRBbGxQcm9qZWN0cywgZmluZFByb2plY3QsIHN5bmNQcm9qZWN0LCBcbiAgICAgICAgZ2V0Q3VycmVudFByb2plY3QsIGNyZWF0ZU5ld1Byb2plY3QgfSBmcm9tIFwiLi9wcm9qZWN0XCI7XG5pbXBvcnQgeyBzaG93VG9kb3MgfSBmcm9tIFwiLi90b2RvXCI7XG5cbmNvbnN0IG1vZGFsU2VjdGlvbnMgPSBkb2N1bWVudC5nZXRFbGVtZW50c0J5Q2xhc3NOYW1lKFwibW9kYWxcIik7XG5jb25zdCBzaWRlYmFyID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5wcm9qZWN0XCIpO1xuY29uc3QgdG9nZ2xlQnRuID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi50b2dnbGUtcHJvamVjdFwiKTtcbmNvbnN0IHRvZ2dsZUljb25zID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbChcIi50b2dnbGUtaWNvbnNcIik7XG5jb25zdCBhZGRQcm9qZWN0QnRuID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJhZGQtcHJvamVjdFwiKTtcbmNvbnN0IG5ld1Byb2plY3RNb2RhbCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIubmV3LXByb2plY3QtZm9ybS1tb2RhbFwiKTsgIFxuY29uc3QgbmV3UHJvamVjdEZvcm0gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLm5ldy1wcm9qZWN0LWZvcm1cIik7XG5jb25zdCBjYW5jZWxCdG5zID0gZG9jdW1lbnQuZ2V0RWxlbWVudHNCeUNsYXNzTmFtZShcImNhbmNlbFwiKTtcbmNvbnN0IHByb2plY3RMaXN0ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5wcm9qZWN0LWxpc3RcIik7XG5jb25zdCBwcm9qZWN0Qm9keSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIucHJvamVjdC1ib2R5XCIpO1xuY29uc3QgcHJvamVjdE5hbWUgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLnByb2plY3QtbmFtZVwiKTtcbmNvbnN0IHRvZG9MaXN0ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi50b2RvLWxpc3RcIik7XG5jb25zdCBwcm9qZWN0c0xpc3QgPSBkb2N1bWVudC5nZXRFbGVtZW50c0J5Q2xhc3NOYW1lKFwibGlzdC1pdGVtXCIpO1xuXG4vLyBTaG93IG9yIGhpZGUgc2lkZWJhclxubGV0IGNhblRvZ2dsZVNpZGVCYXIgPSAoKCkgPT4ge1xuICB0b2dnbGVCdG4ub25jbGljayA9ICgpID0+IHtcbiAgICBzaWRlYmFyLmNsYXNzTGlzdC50b2dnbGUoXCJhY3RpdmVcIik7XG4gICAgdG9nZ2xlSWNvbnMuZm9yRWFjaCgoaWNvbikgPT4gaWNvbi5jbGFzc0xpc3QudG9nZ2xlKFwiaGlkZGVuXCIpKTtcbiAgfTtcbn0pKCk7XG5cbi8vIE9wZW4gbmV3IHByb2plY3QgZm9ybVxubGV0IGNhblRyaWdnZXJOZXdQcm9qZWN0Rm9ybSA9ICgoKSA9PiB7XG4gIGFkZFByb2plY3RCdG4ub25jbGljayA9ICgpID0+IHtcbiAgICBuZXdQcm9qZWN0TW9kYWwuY2xhc3NMaXN0LnRvZ2dsZShcImhpZGRlblwiKTtcbiAgfTtcbn0pKCk7XG5cbi8vIENyZWF0ZSBwcm9qZWN0XG5sZXQgY2FuQ3JlYXRlUHJvamVjdCA9ICgoKSA9PiB7XG4gIG5ld1Byb2plY3RGb3JtLmFkZEV2ZW50TGlzdGVuZXIoXCJzdWJtaXRcIiwgY3JlYXRlTmV3UHJvamVjdCk7XG59KSgpO1xuXG4vLyBDYW5jZWwgZm9ybVxubGV0IGNhbkNhbmNlbEZvcm0gPSAoKCkgPT4ge1xuICBsZXQgYnV0dG9uc0FycmF5ID0gQXJyYXkuZnJvbShjYW5jZWxCdG5zKTtcbiAgYnV0dG9uc0FycmF5LmZvckVhY2goKGJ1dHRvbikgPT4ge1xuICAgIGxldCBtb2RhbCA9IGJ1dHRvbi5jbG9zZXN0KFwic2VjdGlvblwiKTtcbiAgICBidXR0b24ub25jbGljayA9ICgpID0+IHtcbiAgICAgIG1vZGFsLmNsYXNzTGlzdC50b2dnbGUoXCJoaWRkZW5cIik7XG4gICAgfTtcbiAgfSk7XG59KSgpO1xuXG4vLyBDYW5jZWwgZm9ybSBieSBjbGlja2luZyBvdXRzaWRlXG5sZXQgY2FuQ2xpY2tPdXRzaWRlID0gKCgpID0+IHtcbiAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoZSkgPT4ge1xuICAgIGxldCBjbGFzc2VzID0gZS50YXJnZXQuY2xhc3NOYW1lLnNwbGl0KFwiIFwiKTtcbiAgICBsZXQgaGFzTW9kYWwgPSBjbGFzc2VzLnNvbWUoKG9uZWNsYXNzKSA9PiBvbmVjbGFzcyA9PSBcIm1vZGFsXCIpO1xuICAgIGlmIChoYXNNb2RhbCkge1xuICAgICAgLy8gQXJyYXkgZnJvbSBtYXBcbiAgICAgIEFycmF5LmZyb20obW9kYWxTZWN0aW9ucywgKGVsZW1lbnQpID0+IHtcbiAgICAgICAgZWxlbWVudC5jbGFzc0xpc3QuYWRkKFwiaGlkZGVuXCIpO1xuICAgICAgfSk7XG4gICAgfVxuICB9KTsgIFxufSkoKTtcblxuLy8gU2hvdyBwcm9qZWN0c1xubGV0IGNhblNob3dQcm9qZWN0ID0gKCgpID0+IHtcbiAgbGV0IGFsbFByb2plY3RzID0gZ2V0QWxsUHJvamVjdHMoKTtcbiAgYWxsUHJvamVjdHMubWFwKChwcm9qZWN0KSA9PiB7XG4gICAgbGV0IG5ld0xpbmUgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwibGlcIik7XG4gICAgbmV3TGluZS5pbm5lckhUTUwgPSBwcm9qZWN0Lm5hbWU7XG4gICAgbmV3TGluZS5jbGFzc0xpc3QuYWRkKFwibGlzdC1pdGVtXCIpO1xuICAgIHByb2plY3RMaXN0LmFwcGVuZENoaWxkKG5ld0xpbmUpO1xuICB9KTtcbn0pKCk7XG5cbi8vIFNob3cgdG9kb1xubGV0IGNhblNob3dDb250ZW50ID0gKCgpID0+IHtcbiAgbGV0IHByb2plY3RzQXJyYXkgPSBBcnJheS5mcm9tKHByb2plY3RzTGlzdCk7XG4gIHByb2plY3RzQXJyYXkuZm9yRWFjaCgobGlzdEl0ZW0pID0+IHsgICAgXG4gICAgbGlzdEl0ZW0uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsKGUpID0+IHtcbiAgICAgIGxldCBwcm9qZWN0ID0gZmluZFByb2plY3QobGlzdEl0ZW0udGV4dENvbnRlbnQpO1xuXG4gICAgICAvLyBTeW5jaHJvbml6ZSBjdXJyZW50IHByb2plY3RcbiAgICAgIHN5bmNQcm9qZWN0KHByb2plY3QpO1xuICAgICAgXG4gICAgICAvLyBBdXRvIHVwZGF0ZSBwcm9qZWN0IGNvbnRlbnRcbiAgICAgIHByb2plY3ROYW1lLmlubmVySFRNTCA9IHByb2plY3QubmFtZTtcbiAgICAgIHRvZG9MaXN0LmlubmVySFRNTCA9IHNob3dUb2Rvcyhwcm9qZWN0KTtcbiAgICAgIHByb2plY3RCb2R5LmNsYXNzTGlzdC5yZW1vdmUoXCJoaWRkZW5cIik7ICBcbiAgICAgIGxvY2F0aW9uLnJlbG9hZCgpO1xuICAgIH0pO1xuICB9KTtcbn0pKCk7XG5cbi8vIERpc3BsYXkgY3VycmVudCBwcm9qZWN0XG5jb25zdCBjYW5EaXNwbGF5Q3VycmVudFByb2plY3QgPSAoKCkgPT4ge1xuICBsZXQgcHJvamVjdHNBcnJheSA9IEFycmF5LmZyb20ocHJvamVjdHNMaXN0KTtcbiAgbGV0IHN0b3JlZFByb2plY3QgPSBnZXRDdXJyZW50UHJvamVjdCgpO1xuICBwcm9qZWN0c0FycmF5LmZvckVhY2goKGxpc3RJdGVtKSA9PiB7XG4gICAgbGlzdEl0ZW0uY2xhc3NMaXN0LnJlbW92ZShcInNlbGVjdGVkXCIpO1xuICAgIGxldCBjdXJyZW50UHJvamVjdCA9IGZpbmRQcm9qZWN0KGxpc3RJdGVtLnRleHRDb250ZW50KTtcbiAgICBpZiAoY3VycmVudFByb2plY3QubmFtZSA9PSBzdG9yZWRQcm9qZWN0Lm5hbWUpIHtcbiAgICAgIGxpc3RJdGVtLmNsYXNzTGlzdC5hZGQoXCJzZWxlY3RlZFwiKTtcbiAgICB9XG4gIH0pO1xufSkoKTtcbiIsImltcG9ydCB7IGdldEFsbFByb2plY3RzLCBnZXRDdXJyZW50UHJvamVjdCwgZWRpdFRoaXNQcm9qZWN0LCBcbiAgICAgICAgZGVsZXRlVGhpc1Byb2plY3QsIGZpbGxQcm9qZWN0TmFtZSwgc3luY1Byb2plY3QsIFxuICAgICAgICB1cGRhdGVQcm9qZWN0U3RvcmFnZSB9IGZyb20gXCIuL3Byb2plY3RcIjtcbmltcG9ydCB7IGNyZWF0ZVRvZG8sIHNob3dUb2RvcyB9IGZyb20gXCIuL3RvZG9cIjtcblxuY29uc3QgcHJvamVjdEJvZHkgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLnByb2plY3QtYm9keVwiKTtcbmNvbnN0IHByb2plY3ROYW1lID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5wcm9qZWN0LW5hbWVcIik7XG5jb25zdCBlZGl0UHJvamVjdE1vZGFsID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5lZGl0LXByb2plY3QtZm9ybS1tb2RhbFwiKTtcbmNvbnN0IGVkaXRQcm9qZWN0Rm9ybSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuZWRpdC1wcm9qZWN0LWZvcm1cIik7XG5jb25zdCBlZGl0UHJvamVjdEJ0biA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuZWRpdC1wcm9qZWN0XCIpO1xuY29uc3QgZGVsUHJvamVjdEJ0biA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuZGVsZXRlLXByb2plY3RcIik7XG5jb25zdCBuZXdUb2RvTW9kYWwgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLm5ldy10b2RvLWZvcm0tbW9kYWxcIik7XG5jb25zdCBuZXdQcm9qZWN0Rm9ybSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIubmV3LXRvZG8tZm9ybVwiKTtcbmNvbnN0IG5ld1RvZG9CdG4gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLm5ldy10b2RvXCIpO1xuY29uc3QgdG9kb0xpc3QgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLnRvZG8tbGlzdFwiKTtcblxuLy8gQXV0byBoaWRlIGJvZHkgd2hlbiBubyBwcm9qZWN0c1xuY29uc3QgYXV0b0hpZGVCb2R5ID0gKCgpID0+IHtcbiAgbGV0IGFsbFByb2plY3RzID0gZ2V0QWxsUHJvamVjdHMoKTtcbiAgaWYgKGFsbFByb2plY3RzLmxlbmd0aCA9PSAwKSB7XG4gICAgcHJvamVjdEJvZHkuY2xhc3NMaXN0LmFkZChcImhpZGRlblwiKTtcbiAgfVxufSkoKTtcblxuLy8gQXV0byBzaG93IGxhc3QgY2hlY2tlZCBwcm9qZWN0XG5jb25zdCBhdXRvU2hvd0JvZHkgPSAoKCkgPT4ge1xuICBsZXQgY3VycmVudFByb2plY3QgPSBnZXRDdXJyZW50UHJvamVjdCgpO1xuICBpZiAoY3VycmVudFByb2plY3QpIHtcbiAgICBwcm9qZWN0TmFtZS5pbm5lckhUTUwgPSBjdXJyZW50UHJvamVjdC5uYW1lO1xuICAgIHByb2plY3RCb2R5LmNsYXNzTGlzdC5yZW1vdmUoXCJoaWRkZW5cIik7XG4gICAgdG9kb0xpc3QuaW5uZXJIVE1MID0gc2hvd1RvZG9zKGN1cnJlbnRQcm9qZWN0KTtcbiAgfSBcbn0pKCk7XG5cbi8vIE9wZW4gZWRpdCBwcm9qZWN0IGZvcm1cbmNvbnN0IGNhblRyaWdnZXJFZGl0UHJvamVjdEZvcm0gPSAoKCkgPT57XG4gIGVkaXRQcm9qZWN0QnRuLm9uY2xpY2sgPSAoKSA9PiB7XG4gICAgZWRpdFByb2plY3RNb2RhbC5jbGFzc0xpc3QudG9nZ2xlKFwiaGlkZGVuXCIpO1xuICB9O1xufSkoKTtcblxuLy8gRWRpdCBwcm9qZWN0XG5jb25zdCBjYW5FZGl0UHJvamVjdCA9ICgoKSA9PiB7XG4gIGVkaXRQcm9qZWN0Rm9ybS5hZGRFdmVudExpc3RlbmVyKFwic3VibWl0XCIsIGVkaXRUaGlzUHJvamVjdCk7XG59KSgpO1xuXG4vLyBBdXRvZmlsbCBvbGQgcHJvamVjdCBuYW1lXG5jb25zdCBjYW5BdXRvZmlsbE5hbWUgPSAoKCkgPT4ge1xuICBmaWxsUHJvamVjdE5hbWUoZWRpdFByb2plY3RGb3JtKTtcbn0pKCk7XG5cbi8vIERlbGV0ZSBwcm9qZWN0XG5jb25zdCBjYW5EZWxldGVQcm9qZWN0ID0gKCgpID0+IHtcbiAgZGVsUHJvamVjdEJ0bi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgZGVsZXRlVGhpc1Byb2plY3QpO1xufSkoKTtcblxuLy8gT3BlbiBuZXcgdG9kbyBmb3JtXG5jb25zdCBjYW5UcmlnZ2VyTmV3VG9kb0Zvcm0gPSAoKCkgPT4ge1xuICBuZXdUb2RvQnRuLm9uY2xpY2sgPSAoKSA9PiB7XG4gICAgbmV3VG9kb01vZGFsLmNsYXNzTGlzdC50b2dnbGUoXCJoaWRkZW5cIik7XG4gIH07XG59KSgpO1xuXG4vLyBDcmVhdGUgbmV3IHRvZG9cbmNvbnN0IGNhbkNyZWF0ZVRvZG8gPSAoKCkgPT4ge1xuICBuZXdQcm9qZWN0Rm9ybS5hZGRFdmVudExpc3RlbmVyKFwic3VibWl0XCIsKGUpID0+IHtcbiAgICBsZXQgbmV3VG9kbyA9IGNyZWF0ZVRvZG8oZSk7XG4gICAgbGV0IG9sZFByb2plY3QgPSBnZXRDdXJyZW50UHJvamVjdCgpO1xuICAgIGxldCBuZXdQcm9qZWN0ID0gZ2V0Q3VycmVudFByb2plY3QoKTtcbiAgICBuZXdQcm9qZWN0LnRvZG8ucHVzaChuZXdUb2RvKTtcbiAgICBzeW5jUHJvamVjdChuZXdQcm9qZWN0KTtcbiAgICB1cGRhdGVQcm9qZWN0U3RvcmFnZShuZXdQcm9qZWN0LCBvbGRQcm9qZWN0KTtcbiAgfSk7XG59KSgpO1xuIiwiLy8gVGFibGUgd2l0aGluIGJvZHlcbmltcG9ydCB7IGNoZWNrVG9kbywgZmlsbFRvZG9jb250ZW50LCBlZGl0VG9kbyxcbiAgICAgICAgZGVsZXRlVG9kbyB9IGZyb20gXCIuL3RvZG9cIjtcblxuY29uc3QgY2hlY2tUb2RvQnRucyA9IGRvY3VtZW50LmdldEVsZW1lbnRzQnlDbGFzc05hbWUoXCJjaGVjay10b2RvXCIpO1xuY29uc3QgZWRpdFRvZG9CdG5zID0gZG9jdW1lbnQuZ2V0RWxlbWVudHNCeUNsYXNzTmFtZShcImVkaXQtdG9kb1wiKTtcbmNvbnN0IGVkaXRUb2RvTW9kYWwgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLmVkaXQtdG9kby1mb3JtLW1vZGFsXCIpO1xuY29uc3QgZWRpdFRvZG9Gb3JtID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5lZGl0LXRvZG8tZm9ybVwiKTtcbmNvbnN0IGRlbFRvZG9CdG5zID0gZG9jdW1lbnQuZ2V0RWxlbWVudHNCeUNsYXNzTmFtZShcImRlbGV0ZS10b2RvXCIpO1xuXG4vLyBDaGVjayBvciB1bmNoZWNrIG9uZSB0b2RvXG5jb25zdCBjYW5DaGVja1RvZG8gPSAoKCkgPT4ge1xuICBsZXQgYnV0dG9ucyA9IEFycmF5LmZyb20oY2hlY2tUb2RvQnRucyk7XG4gIGJ1dHRvbnMuZm9yRWFjaCgoYnV0dG9uKSA9PiB7XG4gICAgYnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCBjaGVja1RvZG8pO1xuICB9KTtcbn0pKCk7XG5cbi8vIE9wZW4gZWRpdCB0b2RvIGZvcm0gYW5kIGVkaXRcbmNvbnN0IGNhblRyaWdnZXJBbmRFZGl0VG9kb0Zvcm0gPSAoKCkgPT57XG4gIGxldCBidXR0b25zID0gQXJyYXkuZnJvbShlZGl0VG9kb0J0bnMpO1xuICBidXR0b25zLmZvckVhY2goKGJ1dHRvbikgPT4ge1xuICAgIGJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKGUpID0+IHtcbiAgICAgIGVkaXRUb2RvTW9kYWwuY2xhc3NMaXN0LnRvZ2dsZShcImhpZGRlblwiKTtcbiAgICAgIGxldCB0b2RvSW5kZXggPSBlLnRhcmdldC5jbG9zZXN0KFwiYnV0dG9uXCIpLmRhdGFzZXQuaW5kZXg7XG4gICAgICBmaWxsVG9kb2NvbnRlbnQoZWRpdFRvZG9Gb3JtLCB0b2RvSW5kZXgpO1xuICAgICAgZWRpdFRvZG9Gb3JtLmFkZEV2ZW50TGlzdGVuZXIoXCJzdWJtaXRcIiwgKGUpID0+IHtcbiAgICAgICAgZWRpdFRvZG8oZSwgdG9kb0luZGV4KTtcbiAgICAgIH0pO1xuICAgIH0pO1xuICB9KTtcbn0pKCk7XG5cbi8vIERlbGV0ZSBvbmUgdG9kb1xuY29uc3QgY2FuRGVsVG9kbyA9ICgoKSA9PiB7XG4gIGxldCBidXR0b25zID0gQXJyYXkuZnJvbShkZWxUb2RvQnRucyk7XG4gIGJ1dHRvbnMuZm9yRWFjaCgoYnV0dG9uKSA9PiB7XG4gICAgYnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCBkZWxldGVUb2RvKTtcbiAgfSk7XG59KSgpO1xuIl0sInNvdXJjZVJvb3QiOiIifQ==