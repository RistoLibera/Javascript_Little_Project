(()=>{"use strict";const e=()=>{let e=localStorage.getItem("myProject");return e?JSON.parse(e):[]},t=t=>e().find((e=>e.name==t)),o=(t,o)=>{let r,l=e();l.map(((e,n)=>{e.name==o.name&&t===o?(l.splice(n,1),r=JSON.stringify(l),localStorage.setItem("myProject",r)):e.name==o.name&&(l.splice(n,1,t),r=JSON.stringify(l),localStorage.setItem("myProject",r))}))},r=e=>{localStorage.setItem("currentProject",JSON.stringify(e))},l=()=>{let e=localStorage.getItem("currentProject");return e?JSON.parse(e):null},n=e=>{let t=(e=>{let t=[];return e.todo.forEach(((e,o)=>{let r=`\n    <tr class='${e.checked?"complete":e.priority}'>\n      <td>${e.title}</td>\n      <td>${e.due}</td>\n      <td>${e.priority}</td>\n      <td>\n        <button class='check-todo' data-index='${o}'>\n          ${e.checked?"<span class='material-icons'>task_alt</span>":"<span class='material-icons'>remove_circle_outline</span>"}\n        </button>\n      </td>\n      <td><button class='edit-todo' data-index='${o}'><span class="material-icons">description</span></button></td>\n      <td><button class='delete-todo' data-index='${o}'><span class="material-icons">delete_forever</span></button></td>\n    </tr>`;t.push(r)})),t})(e);return t?t.map((e=>e)).join(""):[]},c=e=>{let t=l(),n=l(),c=e.target.closest("button").dataset.index,a=n.todo[c];a.checked=!a.checked,r(n),o(n,t),location.reload()},a=e=>{if(!confirm("Delete this todo?"))return;let t=l(),n=l(),c=e.target.closest("button").dataset.index;n.todo.splice(c,1),r(n),o(n,t),location.reload()},d=document.getElementsByClassName("modal"),s=document.querySelector(".project"),i=document.querySelector(".toggle-project"),m=document.querySelectorAll(".toggle-icons"),u=document.getElementById("add-project"),y=document.querySelector(".new-project-form-modal"),g=document.querySelector(".new-project-form"),p=document.getElementsByClassName("cancel"),S=document.querySelector(".project-list"),f=document.querySelector(".project-body"),h=document.querySelector(".project-name"),L=document.querySelector(".todo-list"),v=document.getElementsByClassName("list-item");i.onclick=()=>{s.classList.toggle("active"),m.forEach((e=>e.classList.toggle("hidden")))},u.onclick=()=>{y.classList.toggle("hidden")},g.addEventListener("submit",(t=>{let o={name:t.target.elements.name.value,todo:[]};(t=>{let o=e();o.push(t),localStorage.setItem("myProject",JSON.stringify(o))})(o),r(o)})),Array.from(p).forEach((e=>{let t=e.closest("section");e.onclick=()=>{t.classList.toggle("hidden")}})),window.addEventListener("click",(e=>{e.target.className.split(" ").some((e=>"modal"==e))&&Array.from(d,(e=>{e.classList.add("hidden")}))})),e().map((e=>{let t=document.createElement("li");t.innerHTML=e.name,t.classList.add("list-item"),S.appendChild(t)})),Array.from(v).forEach((e=>{e.addEventListener("click",(o=>{let l=t(e.textContent);r(l),h.innerHTML=l.name,L.innerHTML=n(l),f.classList.remove("hidden"),location.reload()}))})),(()=>{let e=Array.from(v),o=l();e.forEach((e=>{e.classList.remove("selected"),t(e.textContent).name==o.name&&e.classList.add("selected")}))})();const E=document.querySelector(".project-body"),j=document.querySelector(".project-name"),q=document.querySelector(".edit-project-form-modal"),k=document.querySelector(".edit-project-form"),b=document.querySelector(".edit-project"),N=document.querySelector(".delete-project"),C=document.querySelector(".new-todo-form-modal"),x=document.querySelector(".new-todo-form"),A=document.querySelector(".new-todo"),I=document.querySelector(".todo-list"),$=(0==e().length&&E.classList.add("hidden"),(()=>{let e=l();e&&(j.innerHTML=e.name,E.classList.remove("hidden"),I.innerHTML=n(e))})(),b.onclick=()=>{q.classList.toggle("hidden")},k.addEventListener("submit",(e=>{let t=l(),n=l();n.name=e.target.elements.name.value,r(n),o(n,t)})),N.addEventListener("click",(()=>{if(!confirm("Delete this project?"))return;let e=l(),t=l();localStorage.removeItem("currentProject"),o(t,e),location.reload()})),A.onclick=()=>{C.classList.toggle("hidden")},x.addEventListener("submit",(e=>{let t=(e=>{let t=e.target.elements;return{title:t.title.value,due:t.due.value,priority:t.priority.value,checked:!1}})(e),n=l(),c=l();c.todo.push(t),r(c),o(c,n)})),document.getElementsByClassName("check-todo")),w=document.getElementsByClassName("edit-todo"),B=document.querySelector(".edit-todo-form-modal"),P=document.querySelector(".edit-todo-form"),J=document.getElementsByClassName("delete-todo");Array.from($).forEach((e=>{e.addEventListener("click",c)})),Array.from(w).forEach((e=>{e.addEventListener("click",(e=>{B.classList.toggle("hidden");let t=e.target.closest("button").dataset.index;((e,t)=>{let o=l().todo[t];const{title:r,due:n,priority:c}=o;let a=r,d=n,s=c;e.title.value=a,e.due.value=d,e.priority.value=s})(P,t),P.addEventListener("submit",(e=>{((e,t)=>{let n=l(),c=l(),a=c.todo[t],d=e.target.elements;a.title=d.title.value,a.due=d.due.value,a.priority=d.priority.value,r(c),o(c,n)})(e,t)}))}))})),Array.from(J).forEach((e=>{e.addEventListener("click",a)}))})();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly90b2RvX2xpc3QvLi9zcmMvcHJvamVjdC5qcyIsIndlYnBhY2s6Ly90b2RvX2xpc3QvLi9zcmMvdG9kby5qcyIsIndlYnBhY2s6Ly90b2RvX2xpc3QvLi9zcmMvc2lkZWJhci5qcyIsIndlYnBhY2s6Ly90b2RvX2xpc3QvLi9zcmMvYm9keS5qcyIsIndlYnBhY2s6Ly90b2RvX2xpc3QvLi9zcmMvdGFibGUuanMiXSwibmFtZXMiOlsiZ2V0QWxsUHJvamVjdHMiLCJwcm9qZWN0TFMiLCJsb2NhbFN0b3JhZ2UiLCJnZXRJdGVtIiwiSlNPTiIsInBhcnNlIiwiZmluZFByb2plY3QiLCJwcm9qZWN0TmFtZSIsImZpbmQiLCJzdG9yZWRQcm9qZWN0IiwibmFtZSIsInVwZGF0ZVByb2plY3RTdG9yYWdlIiwibmV3UHJvamVjdCIsIm9sZFByb2plY3QiLCJ0ZW1wU3RvcmFnZSIsInByb2plY3RTdG9yYWdlIiwibWFwIiwicHJvamVjdCIsImluZGV4Iiwic3BsaWNlIiwic3RyaW5naWZ5Iiwic2V0SXRlbSIsInN5bmNQcm9qZWN0IiwiZ2V0Q3VycmVudFByb2plY3QiLCJjdXJyZW50UHJvamVjdExTIiwic2hvd1RvZG9zIiwidG9kb0l0ZW1zIiwidGFibGVSb3dzIiwidG9kbyIsImZvckVhY2giLCJyb3dIdG1sIiwiY2hlY2tlZCIsInByaW9yaXR5IiwidGl0bGUiLCJkdWUiLCJwdXNoIiwiZ2V0VG9kb0NvbnRlbnQiLCJ0YWJsZVJvdyIsImpvaW4iLCJjaGVja1RvZG8iLCJlIiwidG9kb0luZGV4IiwidGFyZ2V0IiwiY2xvc2VzdCIsImRhdGFzZXQiLCJhbHRlcmVkVG9kbyIsImxvY2F0aW9uIiwicmVsb2FkIiwiZGVsZXRlVG9kbyIsImNvbmZpcm0iLCJtb2RhbFNlY3Rpb25zIiwiZG9jdW1lbnQiLCJnZXRFbGVtZW50c0J5Q2xhc3NOYW1lIiwic2lkZWJhciIsInF1ZXJ5U2VsZWN0b3IiLCJ0b2dnbGVCdG4iLCJ0b2dnbGVJY29ucyIsInF1ZXJ5U2VsZWN0b3JBbGwiLCJhZGRQcm9qZWN0QnRuIiwiZ2V0RWxlbWVudEJ5SWQiLCJuZXdQcm9qZWN0TW9kYWwiLCJuZXdQcm9qZWN0Rm9ybSIsImNhbmNlbEJ0bnMiLCJwcm9qZWN0TGlzdCIsInByb2plY3RCb2R5IiwidG9kb0xpc3QiLCJwcm9qZWN0c0xpc3QiLCJvbmNsaWNrIiwiY2xhc3NMaXN0IiwidG9nZ2xlIiwiaWNvbiIsImFkZEV2ZW50TGlzdGVuZXIiLCJlbGVtZW50cyIsInZhbHVlIiwiYWxsUHJvamVjdHMiLCJzdG9yZVByb2plY3QiLCJBcnJheSIsImZyb20iLCJidXR0b24iLCJtb2RhbCIsIndpbmRvdyIsImNsYXNzTmFtZSIsInNwbGl0Iiwic29tZSIsIm9uZWNsYXNzIiwiZWxlbWVudCIsImFkZCIsIm5ld0xpbmUiLCJjcmVhdGVFbGVtZW50IiwiaW5uZXJIVE1MIiwiYXBwZW5kQ2hpbGQiLCJsaXN0SXRlbSIsInRleHRDb250ZW50IiwicmVtb3ZlIiwicHJvamVjdHNBcnJheSIsImVkaXRQcm9qZWN0TW9kYWwiLCJlZGl0UHJvamVjdEZvcm0iLCJlZGl0UHJvamVjdEJ0biIsImRlbFByb2plY3RCdG4iLCJuZXdUb2RvTW9kYWwiLCJuZXdUb2RvQnRuIiwiY2hlY2tUb2RvQnRucyIsImxlbmd0aCIsImN1cnJlbnRQcm9qZWN0IiwicmVtb3ZlSXRlbSIsIm5ld1RvZG8iLCJmb3JtRGF0YSIsImNyZWF0ZVRvZG8iLCJlZGl0VG9kb0J0bnMiLCJlZGl0VG9kb01vZGFsIiwiZWRpdFRvZG9Gb3JtIiwiZGVsVG9kb0J0bnMiLCJmb3JtIiwib2xkVG9kbyIsIm9sZFRpdGxlIiwib2xkRHVlIiwib2xkUHJpb3JpdHkiLCJmaWxsVG9kb2NvbnRlbnQiLCJmb3JtVmFsdWUiLCJlZGl0VG9kbyJdLCJtYXBwaW5ncyI6Im1CQUNBLE1BZ0JNQSxFQUFpQixLQUNyQixJQUFJQyxFQUFZQyxhQUFhQyxRQUFRLGFBQ3JDLE9BQUdGLEVBQ2lCRyxLQUFLQyxNQUFNSixHQUd0QixJQUtMSyxFQUFlQyxH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LE1BQ2hDNUIsRUFBWWIsU0FBV3NGLEVBQVV0RixTQUFTeUMsTUFFMUNuRCxFQUFZVixHQUNaRCxFQUFxQkMsRUFBWUMsSUdsRjNCMEcsQ0FBUy9FLEVBQUdDLFlBUUptQyxNQUFNQyxLQUFLa0MsR0FDakJsRixTQUFTaUQsSUFDZkEsRUFBT1AsaUJBQWlCLFFBQVN2QixPIiwiZmlsZSI6Im1haW4uanMiLCJzb3VyY2VzQ29udGVudCI6WyIvLyBQcm9qZWN0IGZhY3RvcnlcbmNvbnN0IFByb2plY3QgPSAobmFtZSkgPT4ge1xuICBsZXQgdG9kbyA9IFtdXG4gIHJldHVybiB7XG4gICAgbmFtZSxcbiAgICB0b2RvXG4gIH1cbn1cblxuLy8gU3RvcmUgbmV3IHByb2plY3RcbmNvbnN0IHN0b3JlUHJvamVjdCA9IChuZXdQcm9qZWN0KSA9PiB7XG4gIGxldCBhbGxQcm9qZWN0cyA9IGdldEFsbFByb2plY3RzKClcbiAgYWxsUHJvamVjdHMucHVzaChuZXdQcm9qZWN0KVxuICBsb2NhbFN0b3JhZ2Uuc2V0SXRlbShcIm15UHJvamVjdFwiLCBKU09OLnN0cmluZ2lmeShhbGxQcm9qZWN0cykpXG59XG5cbi8vIEdldCBzdG9yZWQgcHJvamVjdHNcbmNvbnN0IGdldEFsbFByb2plY3RzID0gKCkgPT4ge1xuICBsZXQgcHJvamVjdExTID0gbG9jYWxTdG9yYWdlLmdldEl0ZW0oXCJteVByb2plY3RcIilcbiAgaWYocHJvamVjdExTKSB7XG4gICAgbGV0IGFsbFByb2plY3RzID0gSlNPTi5wYXJzZShwcm9qZWN0TFMpXG4gICAgcmV0dXJuIGFsbFByb2plY3RzXG4gIH0gZWxzZSB7XG4gICAgcmV0dXJuIFtdXG4gIH1cbn1cblxuLy8gRmluZCBhIHByb2plY3RcbmNvbnN0IGZpbmRQcm9qZWN0ID0gKHByb2plY3ROYW1lKSA9PiB7XG4gIGxldCBhbGxQcm9qZWN0cyA9IGdldEFsbFByb2plY3RzKClcbiAgbGV0IHRoYXRQcm9qZWN0ID0gYWxsUHJvamVjdHMuZmluZChzdG9yZWRQcm9qZWN0ID0+IHN0b3JlZFByb2plY3QubmFtZSA9PSBwcm9qZWN0TmFtZSlcbiAgcmV0dXJuIHRoYXRQcm9qZWN0XG59XG5cbi8vIFVwZGF0ZSBwcm9qZWN0IHN0b3JhZ2VcbmNvbnN0IHVwZGF0ZVByb2plY3RTdG9yYWdlID0gKG5ld1Byb2plY3QsIG9sZFByb2plY3QpID0+IHtcbiAgbGV0IHByb2plY3RTdG9yYWdlID0gZ2V0QWxsUHJvamVjdHMoKVxuICBsZXQgdGVtcFN0b3JhZ2VcblxuICBwcm9qZWN0U3RvcmFnZS5tYXAoKHByb2plY3QsIGluZGV4KSA9PiB7XG4gICAgaWYgKHByb2plY3QubmFtZSA9PSBvbGRQcm9qZWN0Lm5hbWUgJiYgbmV3UHJvamVjdCA9PT0gb2xkUHJvamVjdCkge1xuICAgICAgLy8gRGVsZXRlXG4gICAgICBwcm9qZWN0U3RvcmFnZS5zcGxpY2UoaW5kZXgsIDEpXG4gICAgICB0ZW1wU3RvcmFnZSA9IEpTT04uc3RyaW5naWZ5KHByb2plY3RTdG9yYWdlKVxuICAgICAgbG9jYWxTdG9yYWdlLnNldEl0ZW0oXCJteVByb2plY3RcIiwgdGVtcFN0b3JhZ2UpXG4gICAgfSBlbHNlIGlmIChwcm9qZWN0Lm5hbWUgPT0gb2xkUHJvamVjdC5uYW1lKSB7XG4gICAgICAvLyBBZGRcbiAgICAgIHByb2plY3RTdG9yYWdlLnNwbGljZShpbmRleCwgMSwgbmV3UHJvamVjdClcbiAgICAgIHRlbXBTdG9yYWdlID0gSlNPTi5zdHJpbmdpZnkocHJvamVjdFN0b3JhZ2UpXG4gICAgICBsb2NhbFN0b3JhZ2Uuc2V0SXRlbShcIm15UHJvamVjdFwiLCB0ZW1wU3RvcmFnZSlcbiAgICB9IFxuICB9KVxufVxuXG4vLyBTeW5jaHJvbml6ZSBjdXJyZW50IHByb2plY3RcbmNvbnN0IHN5bmNQcm9qZWN0ID0gKHByb2plY3QpID0+IHtcbiAgbG9jYWxTdG9yYWdlLnNldEl0ZW0oXCJjdXJyZW50UHJvamVjdFwiLEpTT04uc3RyaW5naWZ5KHByb2plY3QpKVxufVxuXG4vLyBHZXQgY3VycmVudCBwcm9qZWN0XG5jb25zdCBnZXRDdXJyZW50UHJvamVjdCA9ICgpID0+IHtcbiAgbGV0IGN1cnJlbnRQcm9qZWN0TFMgPSBsb2NhbFN0b3JhZ2UuZ2V0SXRlbShcImN1cnJlbnRQcm9qZWN0XCIpXG4gIGlmIChjdXJyZW50UHJvamVjdExTKSB7XG4gICAgbGV0IGN1cnJlbnRQcm9qZWN0ID0gSlNPTi5wYXJzZShjdXJyZW50UHJvamVjdExTKVxuICAgIHJldHVybiBjdXJyZW50UHJvamVjdFxuICB9IGVsc2Uge1xuICAgIHJldHVybiBudWxsXG4gIH1cbn1cblxuLy8gQ3JlYXRlIG5ldyBwcm9qZWN0XG5jb25zdCBjcmVhdGVOZXdQcm9qZWN0ID0gKGUpID0+IHtcbiAgbGV0IHByb2plY3ROYW1lID0gZS50YXJnZXQuZWxlbWVudHMubmFtZS52YWx1ZVxuICBsZXQgbmV3UHJvamVjdCA9IFByb2plY3QocHJvamVjdE5hbWUpXG4gIHN0b3JlUHJvamVjdChuZXdQcm9qZWN0KSAgXG4gIHN5bmNQcm9qZWN0KG5ld1Byb2plY3QpXG59XG5cbi8vIEVkaXQgcHJvamVjdCBuYW1lXG5jb25zdCBlZGl0VGhpc1Byb2plY3QgPSAoZSkgPT4ge1xuICBsZXQgb2xkUHJvamVjdCA9IGdldEN1cnJlbnRQcm9qZWN0KClcbiAgbGV0IG5ld1Byb2plY3QgPSBnZXRDdXJyZW50UHJvamVjdCgpXG4gIG5ld1Byb2plY3QubmFtZSA9IGUudGFyZ2V0LmVsZW1lbnRzLm5hbWUudmFsdWVcbiAgc3luY1Byb2plY3QobmV3UHJvamVjdClcbiAgdXBkYXRlUHJvamVjdFN0b3JhZ2UobmV3UHJvamVjdCwgb2xkUHJvamVjdClcbn1cblxuLy8gRGVsZXRlIHByb2plY3RcbmNvbnN0IGRlbGV0ZVRoaXNQcm9qZWN0ID0gKCkgPT4ge1xuICBsZXQgY29uZmlybWF0aW9uID0gY29uZmlybShcIkRlbGV0ZSB0aGlzIHByb2plY3Q/XCIpXG4gIGlmICghY29uZmlybWF0aW9uKSByZXR1cm5cblxuICBsZXQgb2xkUHJvamVjdCA9IGdldEN1cnJlbnRQcm9qZWN0KClcbiAgbGV0IG5ld1Byb2plY3QgPSBnZXRDdXJyZW50UHJvamVjdCgpXG4gIFxuICAvLyBVcGRhdGUgdHdvIGRhdGFiYXNlXG4gIGxvY2FsU3RvcmFnZS5yZW1vdmVJdGVtKFwiY3VycmVudFByb2plY3RcIilcbiAgdXBkYXRlUHJvamVjdFN0b3JhZ2UobmV3UHJvamVjdCwgb2xkUHJvamVjdClcbiAgbG9jYXRpb24ucmVsb2FkKClcbn1cblxuZXhwb3J0IHtcbiAgUHJvamVjdCxcbiAgc3RvcmVQcm9qZWN0LFxuICBnZXRBbGxQcm9qZWN0cyxcbiAgZmluZFByb2plY3QsXG4gIHN5bmNQcm9qZWN0LFxuICBnZXRDdXJyZW50UHJvamVjdCxcbiAgY3JlYXRlTmV3UHJvamVjdCxcbiAgZWRpdFRoaXNQcm9qZWN0LFxuICBkZWxldGVUaGlzUHJvamVjdCxcbiAgdXBkYXRlUHJvamVjdFN0b3JhZ2Vcbn0iLCJpbXBvcnQgeyB1cGRhdGVQcm9qZWN0U3RvcmFnZSwgc3luY1Byb2plY3QsXG4gICAgICAgIGdldEN1cnJlbnRQcm9qZWN0IH0gZnJvbSBcIi4vcHJvamVjdFwiXG5cbi8vIFRvZG8gZmFjdG9yeVxuY29uc3QgVG9kbyA9ICh0aXRsZSwgZHVlLCBwcmlvcml0eSwgY2hlY2tlZCkgPT4ge1xuXG4gIHJldHVybiB7XG4gICAgdGl0bGUsXG4gICAgZHVlLFxuICAgIHByaW9yaXR5LFxuICAgIGNoZWNrZWRcbiAgfVxufVxuXG4vLyBDcmVhdGUgbmV3IHRvZG9cbmNvbnN0IGNyZWF0ZVRvZG8gPSAoZSkgPT4ge1xuICBsZXQgZm9ybURhdGEgPSBlLnRhcmdldC5lbGVtZW50c1xuICBsZXQgdGl0bGUgPSBmb3JtRGF0YS50aXRsZS52YWx1ZVxuICBsZXQgZHVlID0gZm9ybURhdGEuZHVlLnZhbHVlXG4gIGxldCBwcmlvcml0eSA9IGZvcm1EYXRhLnByaW9yaXR5LnZhbHVlXG4gIGxldCBjaGVja2VkID0gZmFsc2VcbiAgbGV0IG5ld1RvZG8gPSBUb2RvKHRpdGxlLCBkdWUsIHByaW9yaXR5LCBjaGVja2VkKVxuXG4gIHJldHVybiBuZXdUb2RvXG59XG5cbi8vIEdldCB0b2RvIGNvbnRlbnRcbmNvbnN0IGdldFRvZG9Db250ZW50ID0gKHByb2plY3QpID0+IHtcbiAgbGV0IHRhYmxlUm93cyA9IFtdXG4gIGxldCBhcnJheSA9IHByb2plY3QudG9kb1xuXG4gIGFycmF5LmZvckVhY2goKHRvZG8sIGluZGV4KSA9PiB7XG4gICAgbGV0IHJvd0h0bWwgPSBgXG4gICAgPHRyIGNsYXNzPScke3RvZG8uY2hlY2tlZCA/ICdjb21wbGV0ZScgOiB0b2RvLnByaW9yaXR5fSc+XG4gICAgICA8dGQ+JHt0b2RvLnRpdGxlfTwvdGQ+XG4gICAgICA8dGQ+JHt0b2RvLmR1ZX08L3RkPlxuICAgICAgPHRkPiR7dG9kby5wcmlvcml0eX08L3RkPlxuICAgICAgPHRkPlxuICAgICAgICA8YnV0dG9uIGNsYXNzPSdjaGVjay10b2RvJyBkYXRhLWluZGV4PScke2luZGV4fSc+XG4gICAgICAgICAgJHtcbiAgICAgICAgICAgIHRvZG8uY2hlY2tlZFxuICAgICAgICAgICAgICA/IFwiPHNwYW4gY2xhc3M9J21hdGVyaWFsLWljb25zJz50YXNrX2FsdDwvc3Bhbj5cIlxuICAgICAgICAgICAgICA6IFwiPHNwYW4gY2xhc3M9J21hdGVyaWFsLWljb25zJz5yZW1vdmVfY2lyY2xlX291dGxpbmU8L3NwYW4+XCJcbiAgICAgICAgICB9XG4gICAgICAgIDwvYnV0dG9uPlxuICAgICAgPC90ZD5cbiAgICAgIDx0ZD48YnV0dG9uIGNsYXNzPSdlZGl0LXRvZG8nIGRhdGEtaW5kZXg9JyR7aW5kZXh9Jz48c3BhbiBjbGFzcz1cIm1hdGVyaWFsLWljb25zXCI+ZGVzY3JpcHRpb248L3NwYW4+PC9idXR0b24+PC90ZD5cbiAgICAgIDx0ZD48YnV0dG9uIGNsYXNzPSdkZWxldGUtdG9kbycgZGF0YS1pbmRleD0nJHtpbmRleH0nPjxzcGFuIGNsYXNzPVwibWF0ZXJpYWwtaWNvbnNcIj5kZWxldGVfZm9yZXZlcjwvc3Bhbj48L2J1dHRvbj48L3RkPlxuICAgIDwvdHI+YFxuXG4gIHRhYmxlUm93cy5wdXNoKHJvd0h0bWwpXG4gIH0pXG5cbiAgcmV0dXJuIHRhYmxlUm93c1xufVxuXG4vLyBTaG93IHRvZG9zXG5jb25zdCBzaG93VG9kb3MgPSAocHJvamVjdCkgPT4ge1xuICBsZXQgdG9kb0l0ZW1zID0gZ2V0VG9kb0NvbnRlbnQocHJvamVjdClcbiAgaWYgKHRvZG9JdGVtcykge1xuICAgIGxldCBsaXN0SHRtbCA9IHRvZG9JdGVtcy5tYXAoKHRhYmxlUm93KSA9PiB0YWJsZVJvdykuam9pbihcIlwiKVxuICAgIHJldHVybiBsaXN0SHRtbFxuICB9IGVsc2Uge1xuICAgIHJldHVybiBbXVxuICB9XG59XG5cbi8vIENoZWNrIG9yIHVuY2hlY2sgdG9kb1xuY29uc3QgY2hlY2tUb2RvID0gKGUpID0+IHtcbiAgbGV0IG9sZFByb2plY3QgPSBnZXRDdXJyZW50UHJvamVjdCgpXG4gIGxldCBuZXdQcm9qZWN0ID0gZ2V0Q3VycmVudFByb2plY3QoKVxuICBsZXQgdG9kb0luZGV4ID0gZS50YXJnZXQuY2xvc2VzdChcImJ1dHRvblwiKS5kYXRhc2V0LmluZGV4XG4gIGxldCBhbHRlcmVkVG9kbyA9IG5ld1Byb2plY3QudG9kb1t0b2RvSW5kZXhdXG4gIFxuICBhbHRlcmVkVG9kby5jaGVja2VkID0gIShhbHRlcmVkVG9kby5jaGVja2VkKVxuICBzeW5jUHJvamVjdChuZXdQcm9qZWN0KVxuICB1cGRhdGVQcm9qZWN0U3RvcmFnZShuZXdQcm9qZWN0LCBvbGRQcm9qZWN0KVxuICAvLyBVcGRhdGUgaW50ZXJmYWNlXG4gIGxvY2F0aW9uLnJlbG9hZCgpXG59XG5cbi8vIEF1dG9maWxsIG9sZCB0b2RvIGNvbnRlbnRcbmNvbnN0IGZpbGxUb2RvY29udGVudCA9IChmb3JtLCB0b2RvSW5kZXgpID0+IHtcbiAgbGV0IG9sZFByb2plY3QgPSBnZXRDdXJyZW50UHJvamVjdCgpXG4gIGxldCBvbGRUb2RvID0gb2xkUHJvamVjdC50b2RvW3RvZG9JbmRleF1cblxuICAvLyBPYmplY3QgZGVzdHJ1Y3R1cmluZ1xuICBjb25zdCB7dGl0bGUsIGR1ZSwgcHJpb3JpdHl9ID0gb2xkVG9kb1xuICBsZXQgb2xkVGl0bGUgPSB0aXRsZVxuICBsZXQgb2xkRHVlID0gZHVlXG4gIGxldCBvbGRQcmlvcml0eSA9IHByaW9yaXR5XG5cbiAgZm9ybS50aXRsZS52YWx1ZSA9IG9sZFRpdGxlXG4gIGZvcm0uZHVlLnZhbHVlID0gb2xkRHVlXG4gIGZvcm0ucHJpb3JpdHkudmFsdWUgPSBvbGRQcmlvcml0eVxufVxuXG4vLyBFZGl0IHRvZG8gY29udGVudFxuY29uc3QgZWRpdFRvZG8gPSAoZSwgdG9kb0luZGV4KSA9PiB7XG4gIGxldCBvbGRQcm9qZWN0ID0gZ2V0Q3VycmVudFByb2plY3QoKVxuICBsZXQgbmV3UHJvamVjdCA9IGdldEN1cnJlbnRQcm9qZWN0KClcbiAgbGV0IGFsdGVyZWRUb2RvID0gbmV3UHJvamVjdC50b2RvW3RvZG9JbmRleF1cbiAgbGV0IGZvcm1WYWx1ZSA9IGUudGFyZ2V0LmVsZW1lbnRzXG4gIFxuICBhbHRlcmVkVG9kby50aXRsZSA9IGZvcm1WYWx1ZS50aXRsZS52YWx1ZVxuICBhbHRlcmVkVG9kby5kdWUgPSBmb3JtVmFsdWUuZHVlLnZhbHVlXG4gIGFsdGVyZWRUb2RvLnByaW9yaXR5ID0gZm9ybVZhbHVlLnByaW9yaXR5LnZhbHVlXG5cbiAgc3luY1Byb2plY3QobmV3UHJvamVjdClcbiAgdXBkYXRlUHJvamVjdFN0b3JhZ2UobmV3UHJvamVjdCwgb2xkUHJvamVjdClcbn1cblxuLy8gRGVsZXRlIHRvZG9cbmNvbnN0IGRlbGV0ZVRvZG8gPSAoZSkgPT4ge1xuICBsZXQgY29uZmlybWF0aW9uID0gY29uZmlybShcIkRlbGV0ZSB0aGlzIHRvZG8/XCIpXG4gIGlmICghY29uZmlybWF0aW9uKSByZXR1cm5cblxuICBsZXQgb2xkUHJvamVjdCA9IGdldEN1cnJlbnRQcm9qZWN0KClcbiAgbGV0IG5ld1Byb2plY3QgPSBnZXRDdXJyZW50UHJvamVjdCgpXG4gIGxldCB0b2RvSW5kZXggPSBlLnRhcmdldC5jbG9zZXN0KFwiYnV0dG9uXCIpLmRhdGFzZXQuaW5kZXhcbiAgbGV0IGFsdGVyZWRUb2RvID0gbmV3UHJvamVjdC50b2RvXG5cbiAgYWx0ZXJlZFRvZG8uc3BsaWNlKHRvZG9JbmRleCwgMSlcbiAgXG4gIC8vIFVwZGF0ZSB0d28gZGF0YWJhc2VcbiAgc3luY1Byb2plY3QobmV3UHJvamVjdClcbiAgdXBkYXRlUHJvamVjdFN0b3JhZ2UobmV3UHJvamVjdCwgb2xkUHJvamVjdClcbiAgbG9jYXRpb24ucmVsb2FkKClcbn1cblxuZXhwb3J0IHtcbiAgVG9kbyxcbiAgY3JlYXRlVG9kbyxcbiAgc2hvd1RvZG9zLFxuICBjaGVja1RvZG8sXG4gIGZpbGxUb2RvY29udGVudCxcbiAgZWRpdFRvZG8sXG4gIGRlbGV0ZVRvZG9cbn0iLCJpbXBvcnQgeyBnZXRBbGxQcm9qZWN0cywgZmluZFByb2plY3QsIHN5bmNQcm9qZWN0LCBcbiAgICAgICAgZ2V0Q3VycmVudFByb2plY3QsIGNyZWF0ZU5ld1Byb2plY3QgfSBmcm9tIFwiLi9wcm9qZWN0XCJcbmltcG9ydCB7IHNob3dUb2RvcyB9IGZyb20gXCIuL3RvZG9cIlxuXG5jb25zdCBtb2RhbFNlY3Rpb25zID0gZG9jdW1lbnQuZ2V0RWxlbWVudHNCeUNsYXNzTmFtZShcIm1vZGFsXCIpXG5jb25zdCBzaWRlYmFyID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5wcm9qZWN0XCIpXG5jb25zdCB0b2dnbGVCdG4gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLnRvZ2dsZS1wcm9qZWN0XCIpXG5jb25zdCB0b2dnbGVJY29ucyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoXCIudG9nZ2xlLWljb25zXCIpXG5jb25zdCBhZGRQcm9qZWN0QnRuID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJhZGQtcHJvamVjdFwiKVxuY29uc3QgbmV3UHJvamVjdE1vZGFsID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5uZXctcHJvamVjdC1mb3JtLW1vZGFsXCIpICBcbmNvbnN0IG5ld1Byb2plY3RGb3JtID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5uZXctcHJvamVjdC1mb3JtXCIpXG5jb25zdCBjYW5jZWxCdG5zID0gZG9jdW1lbnQuZ2V0RWxlbWVudHNCeUNsYXNzTmFtZShcImNhbmNlbFwiKVxuY29uc3QgcHJvamVjdExpc3QgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLnByb2plY3QtbGlzdFwiKVxuY29uc3QgcHJvamVjdEJvZHkgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLnByb2plY3QtYm9keVwiKVxuY29uc3QgcHJvamVjdE5hbWUgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLnByb2plY3QtbmFtZVwiKVxuY29uc3QgdG9kb0xpc3QgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLnRvZG8tbGlzdFwiKVxuY29uc3QgcHJvamVjdHNMaXN0ID0gZG9jdW1lbnQuZ2V0RWxlbWVudHNCeUNsYXNzTmFtZShcImxpc3QtaXRlbVwiKVxuXG4vLyBTaG93IG9yIGhpZGUgc2lkZWJhclxubGV0IGNhblRvZ2dsZVNpZGVCYXIgPSAoKCkgPT4ge1xuICB0b2dnbGVCdG4ub25jbGljayA9ICgpID0+IHtcbiAgICBzaWRlYmFyLmNsYXNzTGlzdC50b2dnbGUoXCJhY3RpdmVcIilcbiAgICB0b2dnbGVJY29ucy5mb3JFYWNoKChpY29uKSA9PiBpY29uLmNsYXNzTGlzdC50b2dnbGUoXCJoaWRkZW5cIikpXG4gIH1cbn0pKClcblxuLy8gT3BlbiBuZXcgcHJvamVjdCBmb3JtXG5sZXQgY2FuVHJpZ2dlck5ld1Byb2plY3RGb3JtID0gKCgpID0+IHtcbiAgYWRkUHJvamVjdEJ0bi5vbmNsaWNrID0gKCkgPT4ge1xuICAgIG5ld1Byb2plY3RNb2RhbC5jbGFzc0xpc3QudG9nZ2xlKFwiaGlkZGVuXCIpXG4gIH1cbn0pKClcblxuLy8gQ3JlYXRlIHByb2plY3RcbmxldCBjYW5DcmVhdGVQcm9qZWN0ID0gKCgpID0+IHtcbiAgbmV3UHJvamVjdEZvcm0uYWRkRXZlbnRMaXN0ZW5lcihcInN1Ym1pdFwiLCBjcmVhdGVOZXdQcm9qZWN0KVxufSkoKVxuXG4vLyBDYW5jZWwgZm9ybVxubGV0IGNhbkNhbmNlbEZvcm0gPSAoKCkgPT4ge1xuICBsZXQgYnV0dG9uc0FycmF5ID0gQXJyYXkuZnJvbShjYW5jZWxCdG5zKVxuICBidXR0b25zQXJyYXkuZm9yRWFjaCgoYnV0dG9uKSA9PiB7XG4gICAgbGV0IG1vZGFsID0gYnV0dG9uLmNsb3Nlc3QoXCJzZWN0aW9uXCIpXG4gICAgYnV0dG9uLm9uY2xpY2sgPSAoKSA9PiB7XG4gICAgICBtb2RhbC5jbGFzc0xpc3QudG9nZ2xlKFwiaGlkZGVuXCIpXG4gICAgfVxuICB9KVxufSkoKVxuXG4vLyBDYW5jZWwgZm9ybSBieSBjbGlja2luZyBvdXRzaWRlXG5sZXQgY2FuQ2xpY2tPdXRzaWRlID0gKCgpID0+IHtcbiAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoZSkgPT4ge1xuICAgIGxldCBjbGFzc2VzID0gZS50YXJnZXQuY2xhc3NOYW1lLnNwbGl0KFwiIFwiKVxuICAgIGxldCBoYXNNb2RhbCA9IGNsYXNzZXMuc29tZSgob25lY2xhc3MpID0+IG9uZWNsYXNzID09IFwibW9kYWxcIilcbiAgICBpZiAoaGFzTW9kYWwpIHtcbiAgICAgIC8vIEFycmF5IGZyb20gbWFwXG4gICAgICBBcnJheS5mcm9tKG1vZGFsU2VjdGlvbnMsIChlbGVtZW50KSA9PiB7XG4gICAgICAgIGVsZW1lbnQuY2xhc3NMaXN0LmFkZChcImhpZGRlblwiKVxuICAgICAgfSlcbiAgICB9XG4gIH0pICBcbn0pKClcblxuLy8gU2hvdyBwcm9qZWN0c1xubGV0IGNhblNob3dQcm9qZWN0ID0gKCgpID0+IHtcbiAgbGV0IGFsbFByb2plY3RzID0gZ2V0QWxsUHJvamVjdHMoKVxuICBhbGxQcm9qZWN0cy5tYXAoKHByb2plY3QpID0+IHtcbiAgICBsZXQgbmV3TGluZSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJsaVwiKVxuICAgIG5ld0xpbmUuaW5uZXJIVE1MID0gcHJvamVjdC5uYW1lXG4gICAgbmV3TGluZS5jbGFzc0xpc3QuYWRkKFwibGlzdC1pdGVtXCIpXG4gICAgcHJvamVjdExpc3QuYXBwZW5kQ2hpbGQobmV3TGluZSlcbiAgfSlcbn0pKClcblxuLy8gU2hvdyB0b2RvXG5sZXQgY2FuU2hvd0NvbnRlbnQgPSAoKCkgPT4ge1xuICBsZXQgcHJvamVjdHNBcnJheSA9IEFycmF5LmZyb20ocHJvamVjdHNMaXN0KVxuICBwcm9qZWN0c0FycmF5LmZvckVhY2goKGxpc3RJdGVtKSA9PiB7ICAgIFxuICAgIGxpc3RJdGVtLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLChlKSA9PiB7XG4gICAgICBsZXQgcHJvamVjdCA9IGZpbmRQcm9qZWN0KGxpc3RJdGVtLnRleHRDb250ZW50KVxuXG4gICAgICAvLyBTeW5jaHJvbml6ZSBjdXJyZW50IHByb2plY3RcbiAgICAgIHN5bmNQcm9qZWN0KHByb2plY3QpXG4gICAgICBcbiAgICAgIC8vIEF1dG8gdXBkYXRlIHByb2plY3QgY29udGVudFxuICAgICAgcHJvamVjdE5hbWUuaW5uZXJIVE1MID0gcHJvamVjdC5uYW1lXG4gICAgICB0b2RvTGlzdC5pbm5lckhUTUwgPSBzaG93VG9kb3MocHJvamVjdClcbiAgICAgIHByb2plY3RCb2R5LmNsYXNzTGlzdC5yZW1vdmUoXCJoaWRkZW5cIikgIFxuICAgICAgbG9jYXRpb24ucmVsb2FkKClcbiAgICB9KVxuICB9KVxufSkoKVxuXG4vLyBEaXNwbGF5IGN1cnJlbnQgcHJvamVjdFxuY29uc3QgY2FuRGlzcGxheUN1cnJlbnRQcm9qZWN0ID0gKCgpID0+IHtcbiAgbGV0IHByb2plY3RzQXJyYXkgPSBBcnJheS5mcm9tKHByb2plY3RzTGlzdClcbiAgbGV0IHN0b3JlZFByb2plY3QgPSBnZXRDdXJyZW50UHJvamVjdCgpXG4gIHByb2plY3RzQXJyYXkuZm9yRWFjaCgobGlzdEl0ZW0pID0+IHtcbiAgICBsaXN0SXRlbS5jbGFzc0xpc3QucmVtb3ZlKFwic2VsZWN0ZWRcIilcbiAgICBsZXQgY3VycmVudFByb2plY3QgPSBmaW5kUHJvamVjdChsaXN0SXRlbS50ZXh0Q29udGVudClcbiAgICBpZiAoY3VycmVudFByb2plY3QubmFtZSA9PSBzdG9yZWRQcm9qZWN0Lm5hbWUpIHtcbiAgICAgIGxpc3RJdGVtLmNsYXNzTGlzdC5hZGQoXCJzZWxlY3RlZFwiKVxuICAgIH1cbiAgfSlcbn0pKCkiLCJpbXBvcnQgeyBnZXRBbGxQcm9qZWN0cywgZ2V0Q3VycmVudFByb2plY3QsIGVkaXRUaGlzUHJvamVjdCwgXG4gICAgICAgIGRlbGV0ZVRoaXNQcm9qZWN0LCBzeW5jUHJvamVjdCwgdXBkYXRlUHJvamVjdFN0b3JhZ2UgfSBmcm9tIFwiLi9wcm9qZWN0XCJcbmltcG9ydCB7IGNyZWF0ZVRvZG8sIHNob3dUb2RvcyB9IGZyb20gXCIuL3RvZG9cIlxuXG5jb25zdCBwcm9qZWN0Qm9keSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIucHJvamVjdC1ib2R5XCIpXG5jb25zdCBwcm9qZWN0TmFtZSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIucHJvamVjdC1uYW1lXCIpXG5jb25zdCBlZGl0UHJvamVjdE1vZGFsID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5lZGl0LXByb2plY3QtZm9ybS1tb2RhbFwiKVxuY29uc3QgZWRpdFByb2plY3RGb3JtID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5lZGl0LXByb2plY3QtZm9ybVwiKVxuY29uc3QgZWRpdFByb2plY3RCdG4gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLmVkaXQtcHJvamVjdFwiKVxuY29uc3QgZGVsUHJvamVjdEJ0biA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuZGVsZXRlLXByb2plY3RcIilcbmNvbnN0IG5ld1RvZG9Nb2RhbCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIubmV3LXRvZG8tZm9ybS1tb2RhbFwiKVxuY29uc3QgbmV3UHJvamVjdEZvcm0gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLm5ldy10b2RvLWZvcm1cIilcbmNvbnN0IG5ld1RvZG9CdG4gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLm5ldy10b2RvXCIpXG5jb25zdCB0b2RvTGlzdCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIudG9kby1saXN0XCIpXG5cbi8vIEF1dG8gaGlkZSBib2R5IHdoZW4gbm8gcHJvamVjdHNcbmNvbnN0IGF1dG9IaWRlQm9keSA9ICgoKSA9PiB7XG4gIGxldCBhbGxQcm9qZWN0cyA9IGdldEFsbFByb2plY3RzKClcbiAgaWYgKGFsbFByb2plY3RzLmxlbmd0aCA9PSAwKSB7XG4gICAgcHJvamVjdEJvZHkuY2xhc3NMaXN0LmFkZChcImhpZGRlblwiKVxuICB9XG59KSgpXG5cbi8vIEF1dG8gc2hvdyBsYXN0IGNoZWNrZWQgcHJvamVjdFxuY29uc3QgYXV0b1Nob3dCb2R5ID0gKCgpID0+IHtcbiAgbGV0IGN1cnJlbnRQcm9qZWN0ID0gZ2V0Q3VycmVudFByb2plY3QoKVxuICBpZiAoY3VycmVudFByb2plY3QpIHtcbiAgICBwcm9qZWN0TmFtZS5pbm5lckhUTUwgPSBjdXJyZW50UHJvamVjdC5uYW1lXG4gICAgcHJvamVjdEJvZHkuY2xhc3NMaXN0LnJlbW92ZShcImhpZGRlblwiKVxuICAgIHRvZG9MaXN0LmlubmVySFRNTCA9IHNob3dUb2RvcyhjdXJyZW50UHJvamVjdClcbiAgfSBcbn0pKClcblxuLy8gT3BlbiBlZGl0IHByb2plY3QgZm9ybVxuY29uc3QgY2FuVHJpZ2dlckVkaXRQcm9qZWN0Rm9ybSA9ICgoKSA9PntcbiAgZWRpdFByb2plY3RCdG4ub25jbGljayA9ICgpID0+IHtcbiAgICBlZGl0UHJvamVjdE1vZGFsLmNsYXNzTGlzdC50b2dnbGUoXCJoaWRkZW5cIilcbiAgfVxufSkoKVxuXG4vLyBFZGl0IHByb2plY3RcbmNvbnN0IGNhbkVkaXRQcm9qZWN0ID0gKCgpID0+IHtcbiAgZWRpdFByb2plY3RGb3JtLmFkZEV2ZW50TGlzdGVuZXIoXCJzdWJtaXRcIiwgZWRpdFRoaXNQcm9qZWN0KVxufSkoKVxuXG4vLyBEZWxldGUgcHJvamVjdFxuY29uc3QgY2FuRGVsZXRlUHJvamVjdCA9ICgoKSA9PiB7XG4gIGRlbFByb2plY3RCdG4uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIGRlbGV0ZVRoaXNQcm9qZWN0KVxufSkoKVxuXG4vLyBPcGVuIG5ldyB0b2RvIGZvcm1cbmNvbnN0IGNhblRyaWdnZXJOZXdUb2RvRm9ybSA9ICgoKSA9PiB7XG4gIG5ld1RvZG9CdG4ub25jbGljayA9ICgpID0+IHtcbiAgICBuZXdUb2RvTW9kYWwuY2xhc3NMaXN0LnRvZ2dsZShcImhpZGRlblwiKVxuICB9XG59KSgpXG5cbi8vIENyZWF0ZSBuZXcgdG9kb1xuY29uc3QgY2FuQ3JlYXRlVG9kbyA9ICgoKSA9PiB7XG4gIG5ld1Byb2plY3RGb3JtLmFkZEV2ZW50TGlzdGVuZXIoXCJzdWJtaXRcIiwoZSkgPT4ge1xuICAgIGxldCBuZXdUb2RvID0gY3JlYXRlVG9kbyhlKVxuICAgIGxldCBvbGRQcm9qZWN0ID0gZ2V0Q3VycmVudFByb2plY3QoKVxuICAgIGxldCBuZXdQcm9qZWN0ID0gZ2V0Q3VycmVudFByb2plY3QoKVxuICAgIG5ld1Byb2plY3QudG9kby5wdXNoKG5ld1RvZG8pXG4gICAgc3luY1Byb2plY3QobmV3UHJvamVjdClcbiAgICB1cGRhdGVQcm9qZWN0U3RvcmFnZShuZXdQcm9qZWN0LCBvbGRQcm9qZWN0KVxuICB9KVxufSkoKSIsIi8vIFRhYmxlIHdpdGhpbiBib2R5XG5pbXBvcnQgeyBjaGVja1RvZG8sIGZpbGxUb2RvY29udGVudCwgZWRpdFRvZG8sXG4gICAgICAgIGRlbGV0ZVRvZG8gfSBmcm9tIFwiLi90b2RvXCJcblxuY29uc3QgY2hlY2tUb2RvQnRucyA9IGRvY3VtZW50LmdldEVsZW1lbnRzQnlDbGFzc05hbWUoXCJjaGVjay10b2RvXCIpXG5jb25zdCBlZGl0VG9kb0J0bnMgPSBkb2N1bWVudC5nZXRFbGVtZW50c0J5Q2xhc3NOYW1lKFwiZWRpdC10b2RvXCIpXG5jb25zdCBlZGl0VG9kb01vZGFsID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5lZGl0LXRvZG8tZm9ybS1tb2RhbFwiKVxuY29uc3QgZWRpdFRvZG9Gb3JtID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5lZGl0LXRvZG8tZm9ybVwiKVxuY29uc3QgZGVsVG9kb0J0bnMgPSBkb2N1bWVudC5nZXRFbGVtZW50c0J5Q2xhc3NOYW1lKFwiZGVsZXRlLXRvZG9cIilcblxuLy8gQ2hlY2sgb3IgdW5jaGVjayBvbmUgdG9kb1xuY29uc3QgY2FuQ2hlY2tUb2RvID0gKCgpID0+IHtcbiAgbGV0IGJ1dHRvbnMgPSBBcnJheS5mcm9tKGNoZWNrVG9kb0J0bnMpXG4gIGJ1dHRvbnMuZm9yRWFjaCgoYnV0dG9uKSA9PiB7XG4gICAgYnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCBjaGVja1RvZG8pXG4gIH0pXG59KSgpXG5cbi8vIE9wZW4gZWRpdCB0b2RvIGZvcm0gYW5kIGVkaXRcbmNvbnN0IGNhblRyaWdnZXJBbmRFZGl0VG9kb0Zvcm0gPSAoKCkgPT57XG4gIGxldCBidXR0b25zID0gQXJyYXkuZnJvbShlZGl0VG9kb0J0bnMpXG4gIGJ1dHRvbnMuZm9yRWFjaCgoYnV0dG9uKSA9PiB7XG4gICAgYnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoZSkgPT4ge1xuICAgICAgZWRpdFRvZG9Nb2RhbC5jbGFzc0xpc3QudG9nZ2xlKFwiaGlkZGVuXCIpXG4gICAgICBsZXQgdG9kb0luZGV4ID0gZS50YXJnZXQuY2xvc2VzdChcImJ1dHRvblwiKS5kYXRhc2V0LmluZGV4XG4gICAgICBmaWxsVG9kb2NvbnRlbnQoZWRpdFRvZG9Gb3JtLCB0b2RvSW5kZXgpXG4gICAgICBlZGl0VG9kb0Zvcm0uYWRkRXZlbnRMaXN0ZW5lcihcInN1Ym1pdFwiLCAoZSkgPT4ge1xuICAgICAgICBlZGl0VG9kbyhlLCB0b2RvSW5kZXgpXG4gICAgICB9KVxuICAgIH0pXG4gIH0pXG59KSgpXG5cbi8vIERlbGV0ZSBvbmUgdG9kb1xuY29uc3QgY2FuRGVsVG9kbyA9ICgoKSA9PiB7XG4gIGxldCBidXR0b25zID0gQXJyYXkuZnJvbShkZWxUb2RvQnRucylcbiAgYnV0dG9ucy5mb3JFYWNoKChidXR0b24pID0+IHtcbiAgICBidXR0b24uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIGRlbGV0ZVRvZG8pXG4gIH0pXG59KSgpIl0sInNvdXJjZVJvb3QiOiIifQ==